<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>【Ubuntu】常用系统维护 | 哈骑士的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言
纯粹笔记，以防忘记">
<meta property="og:type" content="article">
<meta property="og:title" content="【Ubuntu】常用系统维护">
<meta property="og:url" content="https://ZhenshengLee.github.io/2016/08/14/160716常用系统维护/index.html">
<meta property="og:site_name" content="哈骑士的博客">
<meta property="og:description" content="前言
纯粹笔记，以防忘记">
<meta property="og:updated_time" content="2016-08-14T04:01:38.673Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【Ubuntu】常用系统维护">
<meta name="twitter:description" content="前言
纯粹笔记，以防忘记">
  
    <link rel="alternative" href="/atom.xml" title="哈骑士的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xvunf.com1.z0.glb.clouddn.com/%E5%85%B6%E4%BB%96320X425.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">黎振胜</a></h1>
		</hgroup>

		
		<p class="header-subtitle">将科技固化为产品——机器人软件开发</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives/">所有文章</a></li>
				        
							<li><a href="/写在前面/">写在前面</a></li>
				        
							<li><a href="/tags/机器人软件构造/">机器人软件构造</a></li>
				        
							<li><a href="/tags/机器人软件设计/">机器人软件设计</a></li>
				        
							<li><a href="/tags/机器人系统开发/">机器人系统开发</a></li>
				        
							<li><a href="/tags/机械设计/">机械设计</a></li>
				        
							<li><a href="/tags/其他/">其他</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ZhenshengLee" title="github">github</a>
					        
								<a class="mail" target="_blank" href="mailto://lzs_1993@qq.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://cn.linkedin.com/in/zhenshengli" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/其他/" style="font-size: 13.33px;">其他</a> <a href="/tags/写在前面/" style="font-size: 10px;">写在前面</a> <a href="/tags/机器人系统开发/" style="font-size: 13.33px;">机器人系统开发</a> <a href="/tags/机器人软件构造/" style="font-size: 16.67px;">机器人软件构造</a> <a href="/tags/机器人软件设计/" style="font-size: 20px;">机器人软件设计</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">机械电子工程在读研究生，从事协作机器人软件开发，正在找工作</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">黎振胜</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://7xvunf.com1.z0.glb.clouddn.com/%E5%85%B6%E4%BB%96320X425.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">黎振胜</h1>
			</hgroup>
			
			<p class="header-subtitle">将科技固化为产品——机器人软件开发</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives/">所有文章</a></li>
		        
					<li><a href="/写在前面/">写在前面</a></li>
		        
					<li><a href="/tags/机器人软件构造/">机器人软件构造</a></li>
		        
					<li><a href="/tags/机器人软件设计/">机器人软件设计</a></li>
		        
					<li><a href="/tags/机器人系统开发/">机器人系统开发</a></li>
		        
					<li><a href="/tags/机械设计/">机械设计</a></li>
		        
					<li><a href="/tags/其他/">其他</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ZhenshengLee" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto://lzs_1993@qq.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://cn.linkedin.com/in/zhenshengli" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-160716常用系统维护" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/14/160716常用系统维护/" class="article-date">
  	<time datetime="2016-08-14T04:01:38.673Z" itemprop="datePublished">2016-08-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      【Ubuntu】常用系统维护
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/其他/">其他</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>纯粹笔记，以防忘记</li>
</ul>
<a id="more"></a>
<h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><h3 id="在live-cd-下为某磁盘安装grub"><a href="#在live-cd-下为某磁盘安装grub" class="headerlink" title="在live cd 下为某磁盘安装grub"></a>在live cd 下为某磁盘安装grub</h3><ul>
<li>从live cd 进入ubuntu<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">fdisk -l </span><br><span class="line">mount /dev/sdc1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这是某磁盘ubuntu 启动分区</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install --root-directory=/mnt /dev/sdc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>重启电脑进入该磁盘，会报错，但可以正常进入ubuntu，然后在该系统中更新即可！</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop -t hfsplus imagefile.img /mnt</span><br></pre></td></tr></table></figure>
<h3 id="更改主显示器"><a href="#更改主显示器" class="headerlink" title="更改主显示器"></a>更改主显示器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看显示器详细信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr --output DFP5 --auto --primary</span><br></pre></td></tr></table></figure>
<h3 id="查看设备"><a href="#查看设备" class="headerlink" title="查看设备"></a>查看设备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /dev/ | grep video</span><br></pre></td></tr></table></figure>
<h3 id="grub-图形化编辑"><a href="#grub-图形化编辑" class="headerlink" title="grub 图形化编辑"></a>grub 图形化编辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:danielrichter2007/grub-customizer</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install grub-customizer</span><br></pre></td></tr></table></figure>
<h3 id="查找-package"><a href="#查找-package" class="headerlink" title="查找 package"></a>查找 package</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep xmind</span><br></pre></td></tr></table></figure>
<h3 id="查询链接库依赖项"><a href="#查询链接库依赖项" class="headerlink" title="查询链接库依赖项"></a>查询链接库依赖项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.../platforms$ ldd libqxcb.so</span><br></pre></td></tr></table></figure>
<h3 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf ./Robai/</span><br></pre></td></tr></table></figure>
<h3 id="查找包"><a href="#查找包" class="headerlink" title="查找包"></a>查找包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search pcl</span><br></pre></td></tr></table></figure>
<h3 id="卸载包"><a href="#卸载包" class="headerlink" title="卸载包"></a>卸载包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -r pcl</span><br></pre></td></tr></table></figure>
<h3 id="卸载软件"><a href="#卸载软件" class="headerlink" title="卸载软件"></a>卸载软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove ros-indigo-moveit-full</span><br></pre></td></tr></table></figure>
<h3 id="grub"><a href="#grub" class="headerlink" title="grub"></a>grub</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/default/grub /etc/default/grub.bak</span><br><span class="line">sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure>
<blockquote>
<p>GRUB_DEFAULT=<br>GRUB_TIMEOUT=5</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
<h3 id="修改hosts文件"><a href="#修改hosts文件" class="headerlink" title="修改hosts文件"></a>修改hosts文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/hosts</span><br><span class="line">sudo rcnscd restart</span><br><span class="line">sudo apt-get install nscd</span><br><span class="line">sudo /etc/init.d/nscd restart</span><br></pre></td></tr></table></figure>
<blockquote>
<p>127.0.1.1    zsUbuntu</p>
</blockquote>
<h3 id="Choose-server"><a href="#Choose-server" class="headerlink" title="Choose server"></a>Choose server</h3><ul>
<li>Choose the ubuntu server sjtu.edu.cn</li>
</ul>
<h3 id="su-命令失败"><a href="#su-命令失败" class="headerlink" title="su 命令失败"></a>su 命令失败</h3><ul>
<li>试试sudo su进入root模式</li>
</ul>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看环境变量</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看所有变量（环境变量+自定义变量）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;PATH&#125;</span><br><span class="line">PATH=&quot;$PATH&quot;:&apos;/home/zs/VSCode-linux-x64&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>添加路径至PATH环境变量<br>路径可以不加单引号</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $$</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当前线程的PID号码</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $?</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上个命令的回传码（没错为0）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自定义变量转成环境变量，子进程仅会继承父进程的的环境变量，而不会继承自定义变量<br>declare反过来</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PYTHONPATH=~/Documents/zsProjects/zsNao/zsROSNaoqi/pynaoqi-python2.7-2.1.4.13-linux64:$PYTHONPATH</span><br></pre></td></tr></table></figure>
<blockquote>
<p>添加环境变量</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;export PYTHONPATH=~/Documents/zsProjects/zsNao/zsROSNaoqi/pynaoqi-python2.7-2.1.4.13-linux64:$PYTHONPATH&apos; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>永久添加环境变量</p>
</blockquote>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get dist-upgrade</span><br><span class="line">sudo apt-get autoremove</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aptitude install name</span><br></pre></td></tr></table></figure>
<h3 id="更改计算机名"><a href="#更改计算机名" class="headerlink" title="更改计算机名"></a>更改计算机名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/hostname</span><br><span class="line">sudo gedit /etc/hosts</span><br></pre></td></tr></table></figure>
<blockquote>
<p>两个地方的名字需一致</p>
</blockquote>
<h3 id="网络远程登陆工具"><a href="#网络远程登陆工具" class="headerlink" title="网络远程登陆工具"></a>网络远程登陆工具</h3><blockquote>
<p>ssh</p>
</blockquote>
<h3 id="查看网速"><a href="#查看网速" class="headerlink" title="查看网速"></a>查看网速</h3><blockquote>
<p>nload</p>
</blockquote>
<h3 id="启动器上应用程序图标为灰色问号？"><a href="#启动器上应用程序图标为灰色问号？" class="headerlink" title="启动器上应用程序图标为灰色问号？"></a>启动器上应用程序图标为灰色问号？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ～/.local/share/applications/</span><br><span class="line">gedit $&#123;某一个桌面快捷方式文件&#125;</span><br><span class="line">$&#123;ICON&#125;变量进行设置</span><br></pre></td></tr></table></figure>
<h3 id="处理包冲突问题技巧"><a href="#处理包冲突问题技巧" class="headerlink" title="处理包冲突问题技巧"></a>处理包冲突问题技巧</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aptitude</span><br></pre></td></tr></table></figure>
<h4 id="Getting-Help"><a href="#Getting-Help" class="headerlink" title="Getting Help:"></a>Getting Help:</h4><ul>
<li>When asking for help on Askubuntu or any other help forum, you should include the output of the following commands in your question:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install package-name</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>Output of actual error.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This will show your sources.list</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list.d/*</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This will show the list of PPAs (If any).</p>
</blockquote>
<h3 id="Umet-dependencies——软件安装包冲突时的解决思路"><a href="#Umet-dependencies——软件安装包冲突时的解决思路" class="headerlink" title="Umet dependencies——软件安装包冲突时的解决思路"></a>Umet dependencies——软件安装包冲突时的解决思路</h3><ul>
<li><p>备份APT源数据文件</p>
<blockquote>
<p>APT is a package management system for Debian and other Linux distributions based on it, such as Ubuntu. For the most part, APT is easy to use for installing, removing, and updating packages. In rare instances, often when you are mixing in third-party dependencies, there is a chance that apt-get may end up giving you an error telling you that a package installation could not be completed.<br>It is always a good idea to back up configuration files like /etc/apt/sources.list, so you can revert the changes if needed.</p>
</blockquote>
</li>
<li><p>版本号不一致，有一个版本已经安装，但是你要安装另一个版本</p>
<blockquote>
<p>If the error shows something like this:<br><some-package>: Depends: <other-package> (= version) but this-version is to be installed<br>Then make sure that the restricted and universe repositories are enabled. Hit Alt+F2, type software-properties-gtk and hit Enter.<br>Under Ubuntu Software tab, enable all the repositories.</other-package></some-package></p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get clean</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
<blockquote>
<p>One possible cause of unmet dependencies could be corrupted package database, and/or some packages weren’t installed properly. To fix this problem, hit Alt+Ctrl+T to open terminal and try to run one of the following commands:<br>apt-get clean clears out the local repository of retrieved package files (the .deb files). It removes everything but the lock file from /var/cache/apt/archives/ and /var/cache/apt/archives/partial/. apt-get autoclean clears out the local repository of retrieved package files, but unlike apt-get clean, it only removes package files that can no longer be downloaded, and are largely useless.</p>
</blockquote>
<ul>
<li>autoclean基本没什么用，clean有用一些</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>One of the most basic fixes to resolve dependencies problems is to run:<br>The -f here stands for “fix broken”. Apt will attempt to correct broken dependencies. If you manually installed a package that had unmet dependencies, apt-get will install those dependencies, if possible, otherwise it may simply remove the package that you installed in order to resolve the problem.<br>Then run:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --configure -a</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Then run this again:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>If the output is:<br>0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.<br>That means it failed.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -u dist-upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Next solution is to run:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -o Debug::pkgProblemResolver=yes dist-upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>If it shows any held packages, it is best to eliminate them. Packages are held because of dependency conflicts that apt cannot resolve. Try this command to find and repair the conflicts:<br>If it cannot fix the conflicts, it will exit with:<br>0 upgraded, 0 newly installed, 0 to remove and 6 not upgraded.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --dry-run package-name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Delete the held packages one by one, running dist-upgrade each time, until there are no more held packages. Then reinstall any needed packages. Be sure to use the –dry-runoption, so that you are fully informed of consequences:<br>Since removing the package you are trying to install may not be ideal, you might also try finding a repository that has the packages you need to satisfy the dependencies.</p>
<p>使用命令计算处有错误的包集，尝试删除之，注意所有删除的细节，免得造成不好后果。<br>Finally, if all else fails, you can attempt to satisfy the dependencies yourself, either by finding and installing the necessary packages, or by installing them from source and then creating “deb” packages for them.</p>
</blockquote>
<ul>
<li>如果所有的都失败了，没办法了，手动找吧。删除或者安装</li>
</ul>
<h3 id="关于PPAs-Personal-Package-Archive"><a href="#关于PPAs-Personal-Package-Archive" class="headerlink" title="关于PPAs(Personal Package Archive)"></a>关于PPAs(Personal Package Archive)</h3><ul>
<li>PPAs (Personal Package Archive) are repositories hosted on Launchpad. You can use PPAs to install or upgrade packages that are not available in the official Ubuntu repositories.</li>
<li><p>One of the most common causes of unmet dependencies are PPAs, specially when used to upgrade the existing package in Ubuntu repositories. To solve the problem you have three options, disable, purge (revert back to original package in Ubuntu repositories) or remove PPA.</p>
<h4 id="Disable"><a href="#Disable" class="headerlink" title="Disable:"></a>Disable:</h4></li>
<li><p>Disabling a PPA means no more updates for the packages installed from that PPA. To disable a PPA: Open Software Center &gt; Edit &gt; Software Sources Or,</p>
</li>
<li>Hit Alt+F2 and run software-properties-gtk.<br>Click on Other Software tab, you’ll see that each PPA have two lines here, one for the compiled packages and one for the source, Uncheck both lines to disable a PPA. Here you can also add and remove PPAs.<h4 id="Purge"><a href="#Purge" class="headerlink" title="Purge:"></a>Purge:</h4></li>
</ul>
<p>Purging a PPA means, downgrading the packages in the selected PPA to the version in the official Ubuntu repositories and disabling that PPA. PPA Purge does exactly that. To install PPA Purge run the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ppa-purge</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>But, Considering the question apt is broken so the above command will fail. So use this command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ppa-purge &amp;&amp; cd ppa-purge &amp;&amp; wget http://mirror.pnl.gov/ubuntu/pool/universe/p/ppa-purge/ppa-purge_0.2.8+bzr56_all.deb &amp;&amp; wget http://mirror.pnl.gov/ubuntu//pool/main/a/aptitude/aptitude_0.6.6-1ubuntu1_i386.deb &amp;&amp; sudo dpkg -i ./*.deb</span><br></pre></td></tr></table></figure>
</li>
<li><p>To use PPA Purge:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ppa-purge ppa:someppa/ppa</span><br></pre></td></tr></table></figure>
</li>
<li><p>If ‘ppa-purge’ command fails for some reason, you can’t run ‘ppa-purge’ again unless you re-enable the PPA (To enable the PPA follow the same steps as disabling a PPA and Check the both lines of a particular PPA to enable it).<br>Note: PPA Purge doesn’t remove PPAs (may be in future), So you’ll have to manually remove the PPA.</p>
</li>
</ul>
<h4 id="Remove"><a href="#Remove" class="headerlink" title="Remove:"></a>Remove:</h4><ul>
<li><p>If the package installed from a PPA doesn’t exist in official Ubuntu repositories then using PPA Purge is not recommended, because there’s nothing to be downgraded and PPA Purge wouldn’t delete it either. To remove a PPA and installed packages run the following commands: (Ignore the first command if you don’t want to remove the installed packages)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove --purge package-name</span><br><span class="line">sudo add-apt-repository --remove ppa:someppa/ppa</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
</li>
<li><p>Alternatively you can use Y PPA Manager to disable/remove/purge PPA’s (Details at the end of answer).</p>
</li>
</ul>
<h4 id="Preventive-Measures"><a href="#Preventive-Measures" class="headerlink" title="Preventive Measures:"></a>Preventive Measures:</h4><ul>
<li>So how can we avoid this from happening in the first place?<blockquote>
<p>Keep Ubuntu Up to date. Ubuntu automatically notifies when updates are available, you can also check for available updates by clicking on Session Indicator in Unity panel:<br>Or, Hit Alt+Ctrl+T to open terminal and run following commands:</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Update: Synchronizes your list of available packages with the servers in source repositories. Upgrade: Downloads &amp; installs any newer versions of your installed packages.</p>
</blockquote>
<ul>
<li><p>常更新！</p>
<blockquote>
<p>If you decide to add other repositories to sources.list, make sure that the repository is meant to work (and known to work) with Ubuntu. Repositories that are not designed to work with your version of Ubuntu can introduce inconsistencies in your system and might force you to re-install. Also, make sure that you really need to add external repositories as the software package(s) you are looking for may already have been introduced into the official repositories! </p>
</blockquote>
</li>
<li><p>添加源时应谨慎，一定要添加么？这个软件适合当前Ubuntu版本么？这个外部源是否已经存在于官方源中了呢？</p>
<blockquote>
<p>Remove duplicate PPAs. Y PPA Manager (installation guide at the end of answer) can easily scan and remove duplicate PPAs.<br>Hit Alt+F2 and run y-ppa-manager to open Y PPA Manager.Once open, double click or hit Enter on Advanced.In resulting window select Scan and remove duplicate PPAs and click OK.</p>
</blockquote>
</li>
</ul>
<h3 id="双硬盘同引导双系统"><a href="#双硬盘同引导双系统" class="headerlink" title="双硬盘同引导双系统"></a>双硬盘同引导双系统</h3><ul>
<li>先认真把《鸟叔》看懂！</li>
<li>基本条件，SSD（sd0）装windows，同时HDD（sd1）作为数据盘；计划把Ubuntu安装在HDD的一个分区中，分/swap，/boot，/，/home 四个分区；但是第一次安装，建议就在HDD中的F盘，主分区中安装吧，F盘是HDD的一个分区</li>
</ul>
<h3 id="重新分区的问题"><a href="#重新分区的问题" class="headerlink" title="重新分区的问题"></a>重新分区的问题</h3><ul>
<li>恢复分区怎么处理？（恢复分区是主分区，而且有三个，删除哪些？要弄懂）</li>
<li>安装Ubuntu要不要分多个区？（不打算分swap）<ul>
<li>/ 和/home最好分别mount到ssd和hard drive上！</li>
<li>打算这样：SSD上/分18G；HDD上F盘100G分出两个分区用来装/usr和/home</li>
<li>考虑到/var也很费内存，则考虑在SSD上只安装/boot，F盘分两个装/和/home<blockquote>
<p>这样重装系统时候只需格式化/boot和/分区，继续挂载/home分区<br>现在这样，在SSD上的512M地方放/boot，在F盘的扩展分区分两个区，bootloader安装在SSD上</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="装系统实践"><a href="#装系统实践" class="headerlink" title="装系统实践"></a>装系统实践</h3><ul>
<li>备份文件；制作安装U盘；删除卷；检查BIOS；</li>
<li>实测：当前windows还是在HDD的启动扇区进去的，不知道为什么，所以现在的方式是在F盘中分/和/home，bootloader安装在HDD中，注意如果有选择HDD的哪一个分区的话，马上取消，查答案。（结果是，既可以选在硬盘的第一个扇区，也可以选择硬盘的某一个分区的扇区）</li>
<li>关于device for boot loader installation<ul>
<li>这个bootloader 其实是grub，即选择grub的安装位置</li>
<li>device for boot loader installation的选择（grub的安装位置），如果选择整个硬盘，则开机启动时win会被ubuntu管理启动（用grub引导 windows），这样卸载ubuntu后，win也会将启动丢失，引起系统进不去的问题（当然可以修复）；如果device for boot loader installation选择ubuntu的/boot所在的分区后，下次启动会默认进入win，这时只要在win下用freebcd添加个ubuntu的引导就行了。</li>
<li>装完系统后请关闭windows的快速启动，不然关机后再次启动直接进Linux无法挂载windows磁盘，因为windows并未真正关闭</li>
<li>当然，如果不关闭快速启动，可以每次开机默认进入windows，然后想使用Linux时按重新启动即可。</li>
<li>设置Grub，配置文件，设置默认启动项和等待秒数</li>
</ul>
</li>
</ul>
<h3 id="缺少库文件"><a href="#缺少库文件" class="headerlink" title="缺少库文件"></a>缺少库文件</h3><ul>
<li>原因一般有两个, 一个是操作系统里确实没有包含该共享库(lib<em>.so.</em>文件)或者共享库版本不对, 遇到这种情况那就去网上下载并安装上即可. </li>
<li>另外一个原因就是已经安装了该共享库, 但执行需要调用该共享库的程序的时候, 程序按照默认共享库路径找不到该共享库文件. </li>
<li>共享库路径设置问题, 如下:</li>
</ul>
<ol>
<li>如果共享库文件安装到了/lib或/usr/lib目录下, 那么需执行一下ldconfig命令<br>ldconfig命令的用途, 主要是在默认搜寻目录(/lib和/usr/lib)以及动态库配置文件/etc/ld.so.conf内所列的目录下, 搜索出可共享的动态链接库(格式如lib<em>.so</em>), 进而创建出动态装入程序(ld.so)所需的连接和缓存文件. 缓存文件默认为/etc/ld.so.cache, 此文件保存已排好序的动态链接库名字列表. </li>
<li>如果共享库文件安装到了/usr/local/lib(很多开源的共享库都会安装到该目录下)或其它”非/lib或/usr/lib”目录下, 那么在执行ldconfig命令前, 还要把新共享库目录加入到共享库配置文件/etc/ld.so.conf中, 如下:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/ld.so.conf</span><br><span class="line">include ld.so.conf.d/*.conf</span><br><span class="line"># echo &quot;/usr/local/lib&quot; &gt;&gt; /etc/ld.so.conf</span><br><span class="line"># ldconfig</span><br></pre></td></tr></table></figure>
<ol>
<li>如果共享库文件安装到了其它”非/lib或/usr/lib” 目录下,  但是又不想在/etc/ld.so.conf中加路径(或者是没有权限加路径). 那可以export一个全局变量LD_LIBRARY_PATH, 然后运行程序的时候就会去这个目录中找共享库. </li>
</ol>
<ul>
<li>LD_LIBRARY_PATH的意思是告诉loader在哪些目录中可以找到共享库. 可以设置多个搜索目录, 这些目录之间用冒号分隔开. 比如安装了一个mysql到/usr/local/mysql目录下, 其中有一大堆库文件在/usr/local/mysql/lib下面, 则可以在.bashrc或.bash_profile或shell里加入以下语句即可:<br><code>export LD_LIBRARY_PATH=/usr/local/mysql/lib:$LD_LIBRARY_PATH</code><blockquote>
<p>一般来讲这只是一种临时的解决方案, 在没有权限或临时需要的时候使用.</p>
</blockquote>
</li>
</ul>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/08/16/160816ROS-Bag介绍/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          【ROS】rosbag-数据记录工具
        
      </div>
    </a>
  
  
    <a href="/2016/07/16/160619开开心心建网站/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">【建站】开开心心建网站</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="160716常用系统维护" data-title="【Ubuntu】常用系统维护" data-url="https://ZhenshengLee.github.io/2016/08/14/160716常用系统维护/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"zhenshenglee"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 黎振胜
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>