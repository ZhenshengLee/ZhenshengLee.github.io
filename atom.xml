<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>哈骑士的博客</title>
  <subtitle>将科技固化为产品——机器人软件开发</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ZhenshengLee.github.io/"/>
  <updated>2016-08-14T04:01:38.000Z</updated>
  <id>https://ZhenshengLee.github.io/</id>
  
  <author>
    <name>黎振胜</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【Ubuntu】常用系统维护</title>
    <link href="https://ZhenshengLee.github.io/2016/11/22/160716%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%BB%B4%E6%8A%A4/"/>
    <id>https://ZhenshengLee.github.io/2016/11/22/160716常用系统维护/</id>
    <published>2016-11-22T08:46:27.576Z</published>
    <updated>2016-08-14T04:01:38.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>纯粹笔记，以防忘记</li>
</ul>
<a id="more"></a>
<h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><h3 id="在live-cd-下为某磁盘安装grub"><a href="#在live-cd-下为某磁盘安装grub" class="headerlink" title="在live cd 下为某磁盘安装grub"></a>在live cd 下为某磁盘安装grub</h3><ul>
<li>从live cd 进入ubuntu<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">fdisk -l </span><br><span class="line">mount /dev/sdc1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这是某磁盘ubuntu 启动分区</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install --root-directory=/mnt /dev/sdc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>重启电脑进入该磁盘，会报错，但可以正常进入ubuntu，然后在该系统中更新即可！</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop -t hfsplus imagefile.img /mnt</span><br></pre></td></tr></table></figure>
<h3 id="更改主显示器"><a href="#更改主显示器" class="headerlink" title="更改主显示器"></a>更改主显示器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看显示器详细信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr --output DFP5 --auto --primary</span><br></pre></td></tr></table></figure>
<h3 id="查看设备"><a href="#查看设备" class="headerlink" title="查看设备"></a>查看设备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /dev/ | grep video</span><br></pre></td></tr></table></figure>
<h3 id="grub-图形化编辑"><a href="#grub-图形化编辑" class="headerlink" title="grub 图形化编辑"></a>grub 图形化编辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:danielrichter2007/grub-customizer</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install grub-customizer</span><br></pre></td></tr></table></figure>
<h3 id="查找-package"><a href="#查找-package" class="headerlink" title="查找 package"></a>查找 package</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep xmind</span><br></pre></td></tr></table></figure>
<h3 id="查询链接库依赖项"><a href="#查询链接库依赖项" class="headerlink" title="查询链接库依赖项"></a>查询链接库依赖项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.../platforms$ ldd libqxcb.so</span><br></pre></td></tr></table></figure>
<h3 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf ./Robai/</span><br></pre></td></tr></table></figure>
<h3 id="查找包"><a href="#查找包" class="headerlink" title="查找包"></a>查找包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search pcl</span><br></pre></td></tr></table></figure>
<h3 id="卸载包"><a href="#卸载包" class="headerlink" title="卸载包"></a>卸载包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -r pcl</span><br></pre></td></tr></table></figure>
<h3 id="卸载软件"><a href="#卸载软件" class="headerlink" title="卸载软件"></a>卸载软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove ros-indigo-moveit-full</span><br></pre></td></tr></table></figure>
<h3 id="grub"><a href="#grub" class="headerlink" title="grub"></a>grub</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/default/grub /etc/default/grub.bak</span><br><span class="line">sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure>
<blockquote>
<p>GRUB_DEFAULT=<br>GRUB_TIMEOUT=5</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
<h3 id="修改hosts文件"><a href="#修改hosts文件" class="headerlink" title="修改hosts文件"></a>修改hosts文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/hosts</span><br><span class="line">sudo rcnscd restart</span><br><span class="line">sudo apt-get install nscd</span><br><span class="line">sudo /etc/init.d/nscd restart</span><br></pre></td></tr></table></figure>
<blockquote>
<p>127.0.1.1    zsUbuntu</p>
</blockquote>
<h3 id="Choose-server"><a href="#Choose-server" class="headerlink" title="Choose server"></a>Choose server</h3><ul>
<li>Choose the ubuntu server sjtu.edu.cn</li>
</ul>
<h3 id="su-命令失败"><a href="#su-命令失败" class="headerlink" title="su 命令失败"></a>su 命令失败</h3><ul>
<li>试试sudo su进入root模式</li>
</ul>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看环境变量</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看所有变量（环境变量+自定义变量）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;PATH&#125;</span><br><span class="line">PATH=&quot;$PATH&quot;:&apos;/home/zs/VSCode-linux-x64&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>添加路径至PATH环境变量<br>路径可以不加单引号</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $$</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当前线程的PID号码</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $?</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上个命令的回传码（没错为0）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自定义变量转成环境变量，子进程仅会继承父进程的的环境变量，而不会继承自定义变量<br>declare反过来</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PYTHONPATH=~/Documents/zsProjects/zsNao/zsROSNaoqi/pynaoqi-python2.7-2.1.4.13-linux64:$PYTHONPATH</span><br></pre></td></tr></table></figure>
<blockquote>
<p>添加环境变量</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;export PYTHONPATH=~/Documents/zsProjects/zsNao/zsROSNaoqi/pynaoqi-python2.7-2.1.4.13-linux64:$PYTHONPATH&apos; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>永久添加环境变量</p>
</blockquote>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get dist-upgrade</span><br><span class="line">sudo apt-get autoremove</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aptitude install name</span><br></pre></td></tr></table></figure>
<h3 id="更改计算机名"><a href="#更改计算机名" class="headerlink" title="更改计算机名"></a>更改计算机名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/hostname</span><br><span class="line">sudo gedit /etc/hosts</span><br></pre></td></tr></table></figure>
<blockquote>
<p>两个地方的名字需一致</p>
</blockquote>
<h3 id="网络远程登陆工具"><a href="#网络远程登陆工具" class="headerlink" title="网络远程登陆工具"></a>网络远程登陆工具</h3><blockquote>
<p>ssh</p>
</blockquote>
<h3 id="查看网速"><a href="#查看网速" class="headerlink" title="查看网速"></a>查看网速</h3><blockquote>
<p>nload</p>
</blockquote>
<h3 id="启动器上应用程序图标为灰色问号？"><a href="#启动器上应用程序图标为灰色问号？" class="headerlink" title="启动器上应用程序图标为灰色问号？"></a>启动器上应用程序图标为灰色问号？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ～/.local/share/applications/</span><br><span class="line">gedit $&#123;某一个桌面快捷方式文件&#125;</span><br><span class="line">$&#123;ICON&#125;变量进行设置</span><br></pre></td></tr></table></figure>
<h3 id="处理包冲突问题技巧"><a href="#处理包冲突问题技巧" class="headerlink" title="处理包冲突问题技巧"></a>处理包冲突问题技巧</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aptitude</span><br></pre></td></tr></table></figure>
<h4 id="Getting-Help"><a href="#Getting-Help" class="headerlink" title="Getting Help:"></a>Getting Help:</h4><ul>
<li>When asking for help on Askubuntu or any other help forum, you should include the output of the following commands in your question:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install package-name</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>Output of actual error.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This will show your sources.list</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list.d/*</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This will show the list of PPAs (If any).</p>
</blockquote>
<h3 id="Umet-dependencies——软件安装包冲突时的解决思路"><a href="#Umet-dependencies——软件安装包冲突时的解决思路" class="headerlink" title="Umet dependencies——软件安装包冲突时的解决思路"></a>Umet dependencies——软件安装包冲突时的解决思路</h3><ul>
<li><p>备份APT源数据文件</p>
<blockquote>
<p>APT is a package management system for Debian and other Linux distributions based on it, such as Ubuntu. For the most part, APT is easy to use for installing, removing, and updating packages. In rare instances, often when you are mixing in third-party dependencies, there is a chance that apt-get may end up giving you an error telling you that a package installation could not be completed.<br>It is always a good idea to back up configuration files like /etc/apt/sources.list, so you can revert the changes if needed.</p>
</blockquote>
</li>
<li><p>版本号不一致，有一个版本已经安装，但是你要安装另一个版本</p>
<blockquote>
<p>If the error shows something like this:<br><some-package>: Depends: <other-package> (= version) but this-version is to be installed<br>Then make sure that the restricted and universe repositories are enabled. Hit Alt+F2, type software-properties-gtk and hit Enter.<br>Under Ubuntu Software tab, enable all the repositories.</other-package></some-package></p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get clean</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
<blockquote>
<p>One possible cause of unmet dependencies could be corrupted package database, and/or some packages weren’t installed properly. To fix this problem, hit Alt+Ctrl+T to open terminal and try to run one of the following commands:<br>apt-get clean clears out the local repository of retrieved package files (the .deb files). It removes everything but the lock file from /var/cache/apt/archives/ and /var/cache/apt/archives/partial/. apt-get autoclean clears out the local repository of retrieved package files, but unlike apt-get clean, it only removes package files that can no longer be downloaded, and are largely useless.</p>
</blockquote>
<ul>
<li>autoclean基本没什么用，clean有用一些</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>One of the most basic fixes to resolve dependencies problems is to run:<br>The -f here stands for “fix broken”. Apt will attempt to correct broken dependencies. If you manually installed a package that had unmet dependencies, apt-get will install those dependencies, if possible, otherwise it may simply remove the package that you installed in order to resolve the problem.<br>Then run:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --configure -a</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Then run this again:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>If the output is:<br>0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.<br>That means it failed.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -u dist-upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Next solution is to run:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -o Debug::pkgProblemResolver=yes dist-upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>If it shows any held packages, it is best to eliminate them. Packages are held because of dependency conflicts that apt cannot resolve. Try this command to find and repair the conflicts:<br>If it cannot fix the conflicts, it will exit with:<br>0 upgraded, 0 newly installed, 0 to remove and 6 not upgraded.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove --dry-run package-name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Delete the held packages one by one, running dist-upgrade each time, until there are no more held packages. Then reinstall any needed packages. Be sure to use the –dry-runoption, so that you are fully informed of consequences:<br>Since removing the package you are trying to install may not be ideal, you might also try finding a repository that has the packages you need to satisfy the dependencies.</p>
<p>使用命令计算处有错误的包集，尝试删除之，注意所有删除的细节，免得造成不好后果。<br>Finally, if all else fails, you can attempt to satisfy the dependencies yourself, either by finding and installing the necessary packages, or by installing them from source and then creating “deb” packages for them.</p>
</blockquote>
<ul>
<li>如果所有的都失败了，没办法了，手动找吧。删除或者安装</li>
</ul>
<h3 id="关于PPAs-Personal-Package-Archive"><a href="#关于PPAs-Personal-Package-Archive" class="headerlink" title="关于PPAs(Personal Package Archive)"></a>关于PPAs(Personal Package Archive)</h3><ul>
<li>PPAs (Personal Package Archive) are repositories hosted on Launchpad. You can use PPAs to install or upgrade packages that are not available in the official Ubuntu repositories.</li>
<li><p>One of the most common causes of unmet dependencies are PPAs, specially when used to upgrade the existing package in Ubuntu repositories. To solve the problem you have three options, disable, purge (revert back to original package in Ubuntu repositories) or remove PPA.</p>
<h4 id="Disable"><a href="#Disable" class="headerlink" title="Disable:"></a>Disable:</h4></li>
<li><p>Disabling a PPA means no more updates for the packages installed from that PPA. To disable a PPA: Open Software Center &gt; Edit &gt; Software Sources Or,</p>
</li>
<li>Hit Alt+F2 and run software-properties-gtk.<br>Click on Other Software tab, you’ll see that each PPA have two lines here, one for the compiled packages and one for the source, Uncheck both lines to disable a PPA. Here you can also add and remove PPAs.<h4 id="Purge"><a href="#Purge" class="headerlink" title="Purge:"></a>Purge:</h4></li>
</ul>
<p>Purging a PPA means, downgrading the packages in the selected PPA to the version in the official Ubuntu repositories and disabling that PPA. PPA Purge does exactly that. To install PPA Purge run the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ppa-purge</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>But, Considering the question apt is broken so the above command will fail. So use this command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ppa-purge &amp;&amp; cd ppa-purge &amp;&amp; wget http://mirror.pnl.gov/ubuntu/pool/universe/p/ppa-purge/ppa-purge_0.2.8+bzr56_all.deb &amp;&amp; wget http://mirror.pnl.gov/ubuntu//pool/main/a/aptitude/aptitude_0.6.6-1ubuntu1_i386.deb &amp;&amp; sudo dpkg -i ./*.deb</span><br></pre></td></tr></table></figure>
</li>
<li><p>To use PPA Purge:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ppa-purge ppa:someppa/ppa</span><br></pre></td></tr></table></figure>
</li>
<li><p>If ‘ppa-purge’ command fails for some reason, you can’t run ‘ppa-purge’ again unless you re-enable the PPA (To enable the PPA follow the same steps as disabling a PPA and Check the both lines of a particular PPA to enable it).<br>Note: PPA Purge doesn’t remove PPAs (may be in future), So you’ll have to manually remove the PPA.</p>
</li>
</ul>
<h4 id="Remove"><a href="#Remove" class="headerlink" title="Remove:"></a>Remove:</h4><ul>
<li><p>If the package installed from a PPA doesn’t exist in official Ubuntu repositories then using PPA Purge is not recommended, because there’s nothing to be downgraded and PPA Purge wouldn’t delete it either. To remove a PPA and installed packages run the following commands: (Ignore the first command if you don’t want to remove the installed packages)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove --purge package-name</span><br><span class="line">sudo add-apt-repository --remove ppa:someppa/ppa</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure>
</li>
<li><p>Alternatively you can use Y PPA Manager to disable/remove/purge PPA’s (Details at the end of answer).</p>
</li>
</ul>
<h4 id="Preventive-Measures"><a href="#Preventive-Measures" class="headerlink" title="Preventive Measures:"></a>Preventive Measures:</h4><ul>
<li>So how can we avoid this from happening in the first place?<blockquote>
<p>Keep Ubuntu Up to date. Ubuntu automatically notifies when updates are available, you can also check for available updates by clicking on Session Indicator in Unity panel:<br>Or, Hit Alt+Ctrl+T to open terminal and run following commands:</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Update: Synchronizes your list of available packages with the servers in source repositories. Upgrade: Downloads &amp; installs any newer versions of your installed packages.</p>
</blockquote>
<ul>
<li><p>常更新！</p>
<blockquote>
<p>If you decide to add other repositories to sources.list, make sure that the repository is meant to work (and known to work) with Ubuntu. Repositories that are not designed to work with your version of Ubuntu can introduce inconsistencies in your system and might force you to re-install. Also, make sure that you really need to add external repositories as the software package(s) you are looking for may already have been introduced into the official repositories! </p>
</blockquote>
</li>
<li><p>添加源时应谨慎，一定要添加么？这个软件适合当前Ubuntu版本么？这个外部源是否已经存在于官方源中了呢？</p>
<blockquote>
<p>Remove duplicate PPAs. Y PPA Manager (installation guide at the end of answer) can easily scan and remove duplicate PPAs.<br>Hit Alt+F2 and run y-ppa-manager to open Y PPA Manager.Once open, double click or hit Enter on Advanced.In resulting window select Scan and remove duplicate PPAs and click OK.</p>
</blockquote>
</li>
</ul>
<h3 id="双硬盘同引导双系统"><a href="#双硬盘同引导双系统" class="headerlink" title="双硬盘同引导双系统"></a>双硬盘同引导双系统</h3><ul>
<li>先认真把《鸟叔》看懂！</li>
<li>基本条件，SSD（sd0）装windows，同时HDD（sd1）作为数据盘；计划把Ubuntu安装在HDD的一个分区中，分/swap，/boot，/，/home 四个分区；但是第一次安装，建议就在HDD中的F盘，主分区中安装吧，F盘是HDD的一个分区</li>
</ul>
<h3 id="重新分区的问题"><a href="#重新分区的问题" class="headerlink" title="重新分区的问题"></a>重新分区的问题</h3><ul>
<li>恢复分区怎么处理？（恢复分区是主分区，而且有三个，删除哪些？要弄懂）</li>
<li>安装Ubuntu要不要分多个区？（不打算分swap）<ul>
<li>/ 和/home最好分别mount到ssd和hard drive上！</li>
<li>打算这样：SSD上/分18G；HDD上F盘100G分出两个分区用来装/usr和/home</li>
<li>考虑到/var也很费内存，则考虑在SSD上只安装/boot，F盘分两个装/和/home<blockquote>
<p>这样重装系统时候只需格式化/boot和/分区，继续挂载/home分区<br>现在这样，在SSD上的512M地方放/boot，在F盘的扩展分区分两个区，bootloader安装在SSD上</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="装系统实践"><a href="#装系统实践" class="headerlink" title="装系统实践"></a>装系统实践</h3><ul>
<li>备份文件；制作安装U盘；删除卷；检查BIOS；</li>
<li>实测：当前windows还是在HDD的启动扇区进去的，不知道为什么，所以现在的方式是在F盘中分/和/home，bootloader安装在HDD中，注意如果有选择HDD的哪一个分区的话，马上取消，查答案。（结果是，既可以选在硬盘的第一个扇区，也可以选择硬盘的某一个分区的扇区）</li>
<li>关于device for boot loader installation<ul>
<li>这个bootloader 其实是grub，即选择grub的安装位置</li>
<li>device for boot loader installation的选择（grub的安装位置），如果选择整个硬盘，则开机启动时win会被ubuntu管理启动（用grub引导 windows），这样卸载ubuntu后，win也会将启动丢失，引起系统进不去的问题（当然可以修复）；如果device for boot loader installation选择ubuntu的/boot所在的分区后，下次启动会默认进入win，这时只要在win下用freebcd添加个ubuntu的引导就行了。</li>
<li>装完系统后请关闭windows的快速启动，不然关机后再次启动直接进Linux无法挂载windows磁盘，因为windows并未真正关闭</li>
<li>当然，如果不关闭快速启动，可以每次开机默认进入windows，然后想使用Linux时按重新启动即可。</li>
<li>设置Grub，配置文件，设置默认启动项和等待秒数</li>
</ul>
</li>
</ul>
<h3 id="缺少库文件"><a href="#缺少库文件" class="headerlink" title="缺少库文件"></a>缺少库文件</h3><ul>
<li>原因一般有两个, 一个是操作系统里确实没有包含该共享库(lib<em>.so.</em>文件)或者共享库版本不对, 遇到这种情况那就去网上下载并安装上即可. </li>
<li>另外一个原因就是已经安装了该共享库, 但执行需要调用该共享库的程序的时候, 程序按照默认共享库路径找不到该共享库文件. </li>
<li>共享库路径设置问题, 如下:</li>
</ul>
<ol>
<li>如果共享库文件安装到了/lib或/usr/lib目录下, 那么需执行一下ldconfig命令<br>ldconfig命令的用途, 主要是在默认搜寻目录(/lib和/usr/lib)以及动态库配置文件/etc/ld.so.conf内所列的目录下, 搜索出可共享的动态链接库(格式如lib<em>.so</em>), 进而创建出动态装入程序(ld.so)所需的连接和缓存文件. 缓存文件默认为/etc/ld.so.cache, 此文件保存已排好序的动态链接库名字列表. </li>
<li>如果共享库文件安装到了/usr/local/lib(很多开源的共享库都会安装到该目录下)或其它”非/lib或/usr/lib”目录下, 那么在执行ldconfig命令前, 还要把新共享库目录加入到共享库配置文件/etc/ld.so.conf中, 如下:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/ld.so.conf</span><br><span class="line">include ld.so.conf.d/*.conf</span><br><span class="line"># echo &quot;/usr/local/lib&quot; &gt;&gt; /etc/ld.so.conf</span><br><span class="line"># ldconfig</span><br></pre></td></tr></table></figure>
<ol>
<li>如果共享库文件安装到了其它”非/lib或/usr/lib” 目录下,  但是又不想在/etc/ld.so.conf中加路径(或者是没有权限加路径). 那可以export一个全局变量LD_LIBRARY_PATH, 然后运行程序的时候就会去这个目录中找共享库. </li>
</ol>
<ul>
<li>LD_LIBRARY_PATH的意思是告诉loader在哪些目录中可以找到共享库. 可以设置多个搜索目录, 这些目录之间用冒号分隔开. 比如安装了一个mysql到/usr/local/mysql目录下, 其中有一大堆库文件在/usr/local/mysql/lib下面, 则可以在.bashrc或.bash_profile或shell里加入以下语句即可:<br><code>export LD_LIBRARY_PATH=/usr/local/mysql/lib:$LD_LIBRARY_PATH</code><blockquote>
<p>一般来讲这只是一种临时的解决方案, 在没有权限或临时需要的时候使用.</p>
</blockquote>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;纯粹笔记，以防忘记&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="其他" scheme="https://ZhenshengLee.github.io/tags/%E5%85%B6%E4%BB%96/"/>
    
  </entry>
  
  <entry>
    <title>【建站】开开心心建网站</title>
    <link href="https://ZhenshengLee.github.io/2016/11/22/160619%E5%BC%80%E5%BC%80%E5%BF%83%E5%BF%83%E5%BB%BA%E7%BD%91%E7%AB%99/"/>
    <id>https://ZhenshengLee.github.io/2016/11/22/160619开开心心建网站/</id>
    <published>2016-11-22T08:46:24.888Z</published>
    <updated>2016-07-16T03:52:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>本来准备在CSDN上建个博客，后来为了能够更加自动化，还是在GitHub Pages 上弄一个</li>
</ul>
<a id="more"></a>
<p>[TOC]</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh</span><br><span class="line"></span><br><span class="line">nvm install node</span><br><span class="line"></span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<ul>
<li>建立github.io项目</li>
</ul>
<h3 id="本地建站"><a href="#本地建站" class="headerlink" title="本地建站"></a>本地建站</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mkdir zsBlog</span><br><span class="line"></span><br><span class="line">cd ./zsBlog/</span><br><span class="line"></span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<h3 id="第一个页面"><a href="#第一个页面" class="headerlink" title="第一个页面"></a>第一个页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hexo is running at <a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a>. Press Ctrl+C to stop.</p>
</blockquote>
<ul>
<li>进入浏览器访问页面即可</li>
</ul>
<h3 id="创建一个页面并预览"><a href="#创建一个页面并预览" class="headerlink" title="创建一个页面并预览"></a>创建一个页面并预览</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;Zhensheng的第一个博客&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Created: ~/zsBlog/source/_posts/Zhensheng的第一个博客.md</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd source/_posts</span><br><span class="line">code ./Zhensheng的第一个博客</span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器访问预览</li>
</ul>
<h3 id="设置一个主题"><a href="#设置一个主题" class="headerlink" title="设置一个主题"></a>设置一个主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/zsBlog</span><br><span class="line">git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br><span class="line">code ./_config.yml</span><br></pre></td></tr></table></figure>
<ul>
<li>更改这一行</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> yilia</span><br></pre></td></tr></table></figure>
<h3 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd themes/yilia</span><br><span class="line">code ./_config.yml</span><br><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repo: git@github.com:ZhenshengLee/ZhenshengLee.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>
<ul>
<li>更新并部署</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<h3 id="deploy-没反应"><a href="#deploy-没反应" class="headerlink" title="deploy 没反应"></a>deploy 没反应</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h2 id="Hexo配置"><a href="#Hexo配置" class="headerlink" title="Hexo配置"></a>Hexo配置</h2><h3 id="首页显示摘要"><a href="#首页显示摘要" class="headerlink" title="首页显示摘要"></a>首页显示摘要</h3><ul>
<li>如果你需要主页显示文章全部内容，只显示摘要的话，就在文章中加一行 &lt;!–more—&gt; 在这个标记之前的就是摘要</li>
</ul>
<h3 id="关于位置显示”Uber”"><a href="#关于位置显示”Uber”" class="headerlink" title="关于位置显示”Über”"></a>关于位置显示”Über”</h3><ul>
<li>使用CLion替换所有文件中的此单词，替换为About</li>
</ul>
<h3 id="多说评论"><a href="#多说评论" class="headerlink" title="多说评论"></a>多说评论</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">subl themes/yilia/layout/_partial/post/duoshuo.ejs</span><br><span class="line"></span><br><span class="line">var duoshuoQuery = &#123;short_name:&quot;zhenshenglee&quot;&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="注册google-analytics"><a href="#注册google-analytics" class="headerlink" title="注册google_analytics"></a>注册google_analytics</h3><h3 id="添加RSS"><a href="#添加RSS" class="headerlink" title="添加RSS"></a>添加RSS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>
<h3 id="添加sitemap"><a href="#添加sitemap" class="headerlink" title="添加sitemap"></a>添加sitemap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<ul>
<li>最后的配置文件</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> 哈骑士的博客</span><br><span class="line"><span class="attr">subtitle:</span> 将科技固化为产品——机器人软件开发</span><br><span class="line"><span class="attr">description:</span> 点滴记录，学习成长</span><br><span class="line"><span class="attr">author:</span> 黎振胜</span><br><span class="line"><span class="attr">language:</span> zh-Hans</span><br><span class="line"><span class="attr">timezone:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> https://ZhenshengLee.github.io</span><br><span class="line"><span class="attr">root:</span> /</span><br><span class="line"><span class="attr">permalink:</span> :year/:month/:day/:title/</span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> source</span><br><span class="line"><span class="attr">public_dir:</span> public</span><br><span class="line"><span class="attr">tag_dir:</span> tags</span><br><span class="line"><span class="attr">archive_dir:</span> archives</span><br><span class="line"><span class="attr">category_dir:</span> categories</span><br><span class="line"><span class="attr">code_dir:</span> downloads/code</span><br><span class="line"><span class="attr">i18n_dir:</span> :lang</span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> :title.md <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> post</span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  line_number:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  auto_detect:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  tab_replace:</span></span><br><span class="line"><span class="attr">  style:</span> <span class="string">'github'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> uncategorized</span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> YYYY-MM-DD</span><br><span class="line"><span class="attr">time_format:</span> HH:mm:ss</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> page</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="comment"># theme: landscape</span></span><br><span class="line"><span class="attr">theme:</span> yilia</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> git</span><br><span class="line"><span class="attr">  repo:</span> git@github.com:ZhenshengLee/ZhenshengLee.github.io.git</span><br><span class="line"><span class="attr">  branch:</span> master</span><br><span class="line"></span><br><span class="line"><span class="comment"># RSS订阅</span></span><br><span class="line"><span class="attr">plugin:</span></span><br><span class="line"><span class="bullet">    -</span> hexo-generator-feed</span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line"><span class="attr">type:</span> atom</span><br><span class="line"><span class="attr">path:</span> atom.xml</span><br><span class="line"><span class="attr">limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>
<h2 id="Yilia主题配置"><a href="#Yilia主题配置" class="headerlink" title="Yilia主题配置"></a>Yilia主题配置</h2><ul>
<li>最后的配置文件</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Header</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line"></span><br><span class="line">  主页: /</span><br><span class="line"></span><br><span class="line">  所有文章: /archives/</span><br><span class="line"></span><br><span class="line">  写在前面: /front_page/</span><br><span class="line"></span><br><span class="line">  机器人软件构造: /tags/software_build/</span><br><span class="line"></span><br><span class="line">  机器人软件设计: /tags/software_design/</span><br><span class="line"></span><br><span class="line">  机器人系统开发: /tags/system_dev/</span><br><span class="line"></span><br><span class="line">  机械设计: /tags/machine_design/</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 机器视觉: /tags/机器视觉/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 深度学习: /tags/深度学习/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 其他: /tags/others/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 关于: /about/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># SubNav</span></span><br><span class="line"></span><br><span class="line"><span class="attr">subnav:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  github:</span> <span class="string">"https://github.com/ZhenshengLee"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#weibo: "#"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#rss: "/atom.xml"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#zhihu: "#"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#douban: "#"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  mail:</span> <span class="string">"mailto://lzs_1993@qq.com"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#facebook: "#"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#google: "#"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#twitter: "#"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  linkedin:</span> <span class="string">"https://cn.linkedin.com/in/zhenshengli"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">rss:</span> /atom.xml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Content</span></span><br><span class="line"></span><br><span class="line"><span class="attr">excerpt_link:</span> 阅读全文</span><br><span class="line"></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mathjax:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否开启动画效果</span></span><br><span class="line"></span><br><span class="line"><span class="attr">animate:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否在新窗口打开链接</span></span><br><span class="line"></span><br><span class="line"><span class="attr">open_in_new:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Miscellaneous</span></span><br><span class="line"></span><br><span class="line"><span class="attr">google_analytics:</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="attr">favicon:</span> /favicon.png</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#你的头像url</span></span><br><span class="line"></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">"http://7xvunf.com1.z0.glb.clouddn.com/%E5%85%B6%E4%BB%96320X425.jpg"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启分享</span></span><br><span class="line"></span><br><span class="line"><span class="attr">share_jia:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">share_addthis:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启多说评论，填写你在多说申请的项目名称 duoshuo: duoshuo-key</span></span><br><span class="line"></span><br><span class="line"><span class="attr">duoshuo:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">duoshuo_shortname:</span> zhenshenglee</span><br><span class="line"></span><br><span class="line"><span class="comment">#若使用disqus，请在博客config文件中填写disqus_shortname，并关闭多说评论</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启云标签</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tagcloud:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启友情链接</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#不开启——</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#friends: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#开启——</span></span><br><span class="line"></span><br><span class="line"><span class="attr">friends:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 奥巴马的博客: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 卡卡的美丽传说: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 本泽马的博客: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 吉格斯的博客: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 习大大大不同: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 托蒂的博客: http://localhost:4000/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启“关于我”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#不开启——</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#aboutme: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#开启——</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aboutme:</span> 机械电子工程在读研究生，从事协作机器人软件开发，正在找工作</span><br></pre></td></tr></table></figure>
<h2 id="其他设置"><a href="#其他设置" class="headerlink" title="其他设置"></a>其他设置</h2><h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><ul>
<li>.npmignore中添加<code>.vscode</code></li>
</ul>
<h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><blockquote>
<p><a href="http://yanceywang.com/2015/07/30/Ubuntu+Hexo+GithubPages%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" target="_blank" rel="external">YanceyWang</a></p>
<p><a href="http://blog.csdn.net/poem_of_sunshine/article/details/29369785" target="_blank" rel="external">一个更全的包括hexo配置的介绍</a></p>
<p><a href="https://chinafishnews.github.io/2016/02/21/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/" target="_blank" rel="external">yilia主题设置</a></p>
<p><a href="http://blog.xiaobaidonghui.cn/2015/07/28/%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AE%E4%BA%86%E4%B8%8B%E5%A4%9A%E8%AF%B4/" target="_blank" rel="external">配置多说</a></p>
<p><a href="http://www.voidking.com/2015/05/31/deve-hexo-theme-optimize/" target="_blank" rel="external">主题优化</a></p>
<p><a href="http://www.axialis.com/iconworkshop/" target="_blank" rel="external">图标制作</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;本来准备在CSDN上建个博客，后来为了能够更加自动化，还是在GitHub Pages 上弄一个&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="其他" scheme="https://ZhenshengLee.github.io/tags/%E5%85%B6%E4%BB%96/"/>
    
  </entry>
  
  <entry>
    <title>161107-thunderbird配置</title>
    <link href="https://ZhenshengLee.github.io/2016/11/07/161107-thunderbird%E9%85%8D%E7%BD%AE/"/>
    <id>https://ZhenshengLee.github.io/2016/11/07/161107-thunderbird配置/</id>
    <published>2016-11-07T12:26:57.000Z</published>
    <updated>2016-11-07T12:31:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="邮箱软件增强"><a href="#邮箱软件增强" class="headerlink" title="邮箱软件增强"></a>邮箱软件增强</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>属于日常维护系列</li>
</ul>
<a id="more"></a>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="http://libukai.me/post/_public/2014-03-01-thunderbird-preferences" target="_blank" rel="external">奔歌版配置教程</a></p>
<p><a href="http://www.linnhe2.free-online.co.uk/thunderbird/chrome.html" target="_blank" rel="external">Thunderbird chrome 配置文件</a></p>
<p><a href="https://support.mozilla.org/en-US/kb/using-lightning-google-calendar" target="_blank" rel="external">using lighting with google calander</a></p>
</blockquote>
<h3 id="边栏字体"><a href="#边栏字体" class="headerlink" title="边栏字体"></a>边栏字体</h3><ul>
<li>使用tweak更换字体之后不需要调整字体大小也能在高分屏上正常观看了</li>
</ul>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><ul>
<li><p>Adblock Plus</p>
</li>
<li><p>Lightning and Provider for google calander</p>
</li>
<li><p>Manually sort folders!</p>
</li>
<li><p>Thunderbird conversations</p>
</li>
</ul>
<h3 id="新建谷歌日历"><a href="#新建谷歌日历" class="headerlink" title="新建谷歌日历"></a>新建谷歌日历</h3><ul>
<li>New-Calander-on the network</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;邮箱软件增强&quot;&gt;&lt;a href=&quot;#邮箱软件增强&quot; class=&quot;headerlink&quot; title=&quot;邮箱软件增强&quot;&gt;&lt;/a&gt;邮箱软件增强&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;属于日常维护系列&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="其他" scheme="https://ZhenshengLee.github.io/tags/%E5%85%B6%E4%BB%96/"/>
    
  </entry>
  
  <entry>
    <title>【组件】ompl-open motion planning library2-omplapp</title>
    <link href="https://ZhenshengLee.github.io/2016/10/05/161005-ompl2-%E4%BD%BF%E7%94%A8omplapp/"/>
    <id>https://ZhenshengLee.github.io/2016/10/05/161005-ompl2-使用omplapp/</id>
    <published>2016-10-05T04:18:45.000Z</published>
    <updated>2016-10-05T04:21:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>使用ompl前端工具</li>
</ul>
<p>[TOC]</p>
<a id="more"></a>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="https://bitbucket.org/ompl/ompl/issues/232/omplapp-cmake-issue" target="_blank" rel="external">CMake issue installing omplapp</a><br><a href="https://bitbucket.org/ompl/ompl/issues/8/no-module-named-_util" target="_blank" rel="external">no moudule name _util</a><br><a href="http://ompl.kavrakilab.org/installPyPlusPlus.html" target="_blank" rel="external">installing of Py++</a><br><a href="https://bitbucket.org/ompl/ompl/issues/267/ompl-installation-fails-at-updte_bindings" target="_blank" rel="external">Python binding failed</a></p>
</blockquote>
<h2 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>castxml，若没有安装的话</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O - https://midas3.kitware.com/midas/download/item/318227/castxml-linux.tar.gz | tar zxf - -C $HOME</span><br><span class="line">export PATH=$HOME/castxml/bin:$PATH</span><br></pre></td></tr></table></figure>
<ul>
<li>pygccxml，若没有安装的话</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install pygccxml https://bitbucket.org/ompl/pyplusplus/get/1.6.tar.gz</span><br></pre></td></tr></table></figure>
<ul>
<li>py++，如果没有安装的话</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-py++</span><br></pre></td></tr></table></figure>
<p>或者（最好都装吧，我搞怕了）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/wget --no-check-certificate -O - https://bitbucket.org/ompl/pyplusplus/downloads/pyplusplus-r1247.tgz | tar xzf -</span><br><span class="line">cd ../pyplusplus</span><br><span class="line">/usr/bin/python setup.py build</span><br><span class="line">sudo /usr/bin/python setup.py install</span><br></pre></td></tr></table></figure>
<ul>
<li>参考网页，下好依赖项，代码不赘述，主要注意几点：<ul>
<li>记得将ompl文件夹（就是核心库文件夹，需要另外下载）放置到omplapp/</li>
<li>cmake 找不到libccd，是因为找到了ros中的旧版本文件，此时需要对环境变量进行一下设置，以便让pkg_config先查询/usr/local/lib<br><strong><em>哎，linux下的包配置真是满满的恶意！</em></strong></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd ./build/Release</span><br><span class="line">cmake -DCMAKE_BUILD_TYPE=Release ../..</span><br><span class="line">make update_bindings  -j4</span><br><span class="line"># 注意，如果内存不够大，请不要用-j4，不然会出现未知错误！</span><br><span class="line">make -j4</span><br><span class="line">sudo make install</span><br><span class="line"># 请耐心等待</span><br></pre></td></tr></table></figure>
<ul>
<li>make 通不过</li>
</ul>
<h3 id="运行实例"><a href="#运行实例" class="headerlink" title="运行实例"></a>运行实例</h3><ul>
<li>启动前端界面<ul>
<li>./ompl_app.py</li>
</ul>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;使用ompl前端工具&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>【设计】CMake专题-finding libraries</title>
    <link href="https://ZhenshengLee.github.io/2016/10/05/161005-CMakeFind%E6%A8%A1%E5%9D%97/"/>
    <id>https://ZhenshengLee.github.io/2016/10/05/161005-CMakeFind模块/</id>
    <published>2016-10-05T04:15:02.000Z</published>
    <updated>2016-10-05T04:25:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>cmake 过程中总是出现找不到模块，所以学习一下，最好要会写FindXXX.cmake</li>
</ul>
<p>[TOC]</p>
<a id="more"></a>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="https://cmake.org/Wiki/CMake:How_To_Find_Libraries" target="_blank" rel="external">cmake wiki: how to find libraries</a><br><a href="https://cmake.org/Wiki/CMake/Tutorials/How_to_create_a_ProjectConfig.cmake_file" target="_blank" rel="external">How_to_create_a_ProjectConfig.cmake_file</a><br><a href="https://cmake.org/cmake/help/v2.8.8/cmake.html#command:find_package" target="_blank" rel="external">cmake documentation: home page</a><br><a href="https://github.com/rpavlik/cmake-modules/blob/master/module-docs/Example-FindMyPackage.cmake" target="_blank" rel="external">Find package example</a><br>Martin K, Hoffman B. Mastering CMake[M]. Kitware, 2015.</p>
</blockquote>
<h2 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><ul>
<li>使用VERBOSE=1来检查各种构建选项。</li>
<li>在/build/Release/…/CMakeFiles/${cmake_target}.dir/中，有四个文件，用作CMake对依赖项的分析：<ul>
<li>depend.make：存储依赖项信息</li>
<li>flag.make：存储编译选项，如果该文件改变，将重新编译</li>
<li>build.make：依赖项如何构建，如果该文件改变，CMake将重新计算依赖</li>
<li>DependInfo.cmake：当前项目中有哪些文件和哪些语言</li>
</ul>
</li>
<li>add_library(foo STATIC foo1.c foo2.c)<ul>
<li>注意第一个参数是目标名，第二个参数是目标的修饰词，如果没有这个修饰词，那么将检查环境变量BUILD_SHARED_LIBS，如果没有定义这个环境变量，则按默认，生成静态链接库</li>
</ul>
</li>
<li>target_link_libraries(foo bar)<ul>
<li>bar可为：库名字，库的完整路径名和之前用add_library()指令生成的库名</li>
</ul>
</li>
<li>环境变量有局部特性：意味着子函数，子路径，子CMake指令中的变量名字不会影响上一个环境</li>
<li>函数举例</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(foo)</span><br><span class="line">    <span class="keyword">message</span>(<span class="variable">$&#123;test&#125;</span>) <span class="comment"># test is 1 here</span></span><br><span class="line">    <span class="keyword">set</span>(test <span class="number">2</span> PARENT_SCOPE)</span><br><span class="line">    <span class="keyword">message</span>(<span class="variable">$&#123;test&#125;</span>) <span class="comment"># test is still 1 in this scope</span></span><br><span class="line"><span class="keyword">endfunction</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(test <span class="number">1</span>)</span><br><span class="line">foo()</span><br><span class="line"><span class="keyword">message</span>(<span class="variable">$&#123;test&#125;</span>) <span class="comment"># test will now be 2 here</span></span><br></pre></td></tr></table></figure>
<ul>
<li>循环举例</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> (items_to_buy apple orange pear beer)</span><br><span class="line"><span class="keyword">foreach</span> (item <span class="variable">$&#123;items_to_buy&#125;</span>)</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">"Don't forget to buy one $&#123;item&#125;"</span>)</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br></pre></td></tr></table></figure>
<ul>
<li>CMake Cache<ul>
<li>作用：缓存，下一次可以直接用；人机界面使用这个信息</li>
<li>注意：一旦Cache中有了信息，则只能通过人机界面来修改？</li>
<li>用法：option(USE_JPEG “DO you want to use jepg library?”)，这句话会创建一个变量名存入Cache。</li>
<li>直接使用CACHE option</li>
<li>set(USE_JPEG ON CACHE BOOL “include jpeg support?”)</li>
<li>ON：变量值；CACHE：选项；BOOL：变量类型；”include jepg …”：文档字符串</li>
</ul>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_library</span>(TIFF_LIBRARY</span><br><span class="line">                NAMES tiff tiff2</span><br><span class="line">                PATHS /usr/local/lib /usr/lib</span><br><span class="line">                )</span><br><span class="line"><span class="keyword">find_path</span>(TIFF_INCLUDES tiff.h</span><br><span class="line">                /usr/local/<span class="keyword">include</span></span><br><span class="line">                /usr/<span class="keyword">include</span></span><br><span class="line">                )</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;TIFF_INCLUDES&#125;</span>)</span><br><span class="line"><span class="keyword">add_executable</span>(mytiff mytiff.c)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(myprogram <span class="variable">$&#123;TIFF_LIBRARY&#125;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>find_library<ul>
<li>当不同的系统，相同的库文件被安装在不同路径下时，就需要使用这个命令</li>
<li>只需要库的base name，即不需要libtiff，libtiff2，或者tiff.so，tiff.so.2</li>
<li>find命令，会去${PATH}里面找文件</li>
<li>命令会默认创建CACHE</li>
</ul>
</li>
<li>find_path<ul>
<li>当不同的系统，相同的头文件被安装在不同路径下时，就需要使用这个命令</li>
<li>其他和find_library差不多</li>
</ul>
</li>
<li>find_package<ul>
<li>./Modules/里面有默认的FindXX.cmake，运行这个命令就相当于运行这个.cmake文件，如果找到模块，则赋予多个环境变量值</li>
</ul>
</li>
</ul>
<h3 id="find-package详解"><a href="#find-package详解" class="headerlink" title="find_package详解"></a>find_package详解</h3><h4 id="使用外部库"><a href="#使用外部库" class="headerlink" title="使用外部库"></a>使用外部库</h4><ul>
<li>CMake原生支持许多module的寻找，通过cmake –help-modul-list，可以查看，相关原生.cmake文件存放在/usr/share/cmake/Modules/</li>
</ul>
<h4 id="如果在网上找到了FindXXX-cmake文件"><a href="#如果在网上找到了FindXXX-cmake文件" class="headerlink" title="如果在网上找到了FindXXX.cmake文件"></a>如果在网上找到了FindXXX.cmake文件</h4><ul>
<li>第一步，检查这个包是否是必须的，如果不是必须，将REQUIRED关键字去掉即可</li>
<li>如果该包必须，则将此文件放入你的当前项目的./cmake/modules/中，然后在根目录的CMakeLists文件中，添加<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_MODULE_PATH <span class="variable">$&#123;CMAKE_MODULE_PATH&#125;</span> <span class="string">"$&#123;CMAKE_SOURCE_DIR&#125;/cmake/Modules/"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="带有组件的库"><a href="#带有组件的库" class="headerlink" title="带有组件的库"></a>带有组件的库</h4><ul>
<li>注意，以下句子都是等同的</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(Qt COMPONENTS QtOpenGL QtXml REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(Qt COMPONENTS QtOpenGL QtXml REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(Qt REQUIRED COMPONENTS QtOpenGL QtXml)</span><br><span class="line"><span class="keyword">find_package</span>(Qt REQUIRED QtOpenGL QtXml)</span><br></pre></td></tr></table></figure>
<ul>
<li>会产生<package>_<component>_FOUND</component></package></li>
</ul>
<h4 id="find-package工作机制"><a href="#find-package工作机制" class="headerlink" title="find_package工作机制"></a>find_package工作机制</h4><ul>
<li>寻找Findxxx.cmake文件，首先到${CMAKE_MODULE_PATH}中找，然后在自己的/modules/中找。</li>
<li>如果没有找到，则寻找<name>Config.cmake or <lower-case-name>-config.cmake，这些是一些库在安装时候自动生成的，不过一般不会被生成。</lower-case-name></name></li>
<li>找到之后，生成以下变量<ul>
<li><name>_FOUND</name></li>
<li><name>_INCLUDE_DIRS or <name>_INCLUDES</name></name></li>
<li><name>_LIBRARIES or <name>_LIBRARIES or <name>_LIBS</name></name></name></li>
<li><name>_DEFINITIONS</name></li>
</ul>
</li>
</ul>
<h4 id="pkg-config"><a href="#pkg-config" class="headerlink" title="pkg-config"></a>pkg-config</h4><ul>
<li>当某一个库没有内建cmake支持时，无法生成Findxxx.cmake文件进行搜索，可以借助这个工具进行寻找。</li>
<li>不过请注意：这个工具生成的结果不可靠</li>
</ul>
<h3 id="自己写findxxx-cmake"><a href="#自己写findxxx-cmake" class="headerlink" title="自己写findxxx.cmake"></a>自己写findxxx.cmake</h3><h4 id="传统方法"><a href="#传统方法" class="headerlink" title="传统方法"></a>传统方法</h4><ul>
<li>注意，该文件名需要符合特定的规则</li>
<li>使用find_package命令来找到这个包的依赖项。</li>
<li>使用pkd-config来检测包含文件/库文件的目录</li>
<li>使用find_path和find_library来确定库文件和头文件<ul>
<li>pkg-config的生成结果可以作为候选搜索目录</li>
<li>添加一些一定会存在的目录</li>
<li>命令执行后会生成变量</li>
</ul>
</li>
<li>Set <name>_INCLUDE_DIRS to <name>_INCLUDE_DIR <dependency1>_INCLUDE_DIRS …</dependency1></name></name></li>
<li>Set <name>_LIBRARIES to <name>_LIBRARY <dependency1>_LIBRARIES …</dependency1></name></name></li>
<li>Call the find_package_handle_standard_args() macro to set the <name>_FOUND variable and print a success or failure message.</name></li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - Try to find LibXml2</span></span><br><span class="line"><span class="comment"># Once done this will define</span></span><br><span class="line"><span class="comment">#  LIBXML2_FOUND - System has LibXml2</span></span><br><span class="line"><span class="comment">#  LIBXML2_INCLUDE_DIRS - The LibXml2 include directories</span></span><br><span class="line"><span class="comment">#  LIBXML2_LIBRARIES - The libraries needed to use LibXml2</span></span><br><span class="line"><span class="comment">#  LIBXML2_DEFINITIONS - Compiler switches required for using LibXml2</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">find_package</span>(PkgConfig)</span><br><span class="line">pkg_check_modules(PC_LIBXML QUIET libxml-<span class="number">2.0</span>)</span><br><span class="line"><span class="keyword">set</span>(LIBXML2_DEFINITIONS <span class="variable">$&#123;PC_LIBXML_CFLAGS_OTHER&#125;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">find_path</span>(LIBXML2_INCLUDE_DIR libxml/xpath.h</span><br><span class="line">          HINTS <span class="variable">$&#123;PC_LIBXML_INCLUDEDIR&#125;</span> <span class="variable">$&#123;PC_LIBXML_INCLUDE_DIRS&#125;</span></span><br><span class="line">          PATH_SUFFIXES libxml2 )</span><br><span class="line"> </span><br><span class="line"><span class="keyword">find_library</span>(LIBXML2_LIBRARY NAMES xml2 libxml2</span><br><span class="line">             HINTS <span class="variable">$&#123;PC_LIBXML_LIBDIR&#125;</span> <span class="variable">$&#123;PC_LIBXML_LIBRARY_DIRS&#125;</span> )</span><br><span class="line"> </span><br><span class="line"><span class="keyword">include</span>(FindPackageHandleStandardArgs)</span><br><span class="line"><span class="comment"># handle the QUIETLY and REQUIRED arguments and set LIBXML2_FOUND to TRUE</span></span><br><span class="line"><span class="comment"># if all listed variables are TRUE</span></span><br><span class="line">find_package_handle_standard_args(LibXml2  DEFAULT_MSG</span><br><span class="line">                                  LIBXML2_LIBRARY LIBXML2_INCLUDE_DIR)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">mark_as_advanced</span>(LIBXML2_INCLUDE_DIR LIBXML2_LIBRARY )</span><br><span class="line"> </span><br><span class="line"><span class="keyword">set</span>(LIBXML2_LIBRARIES <span class="variable">$&#123;LIBXML2_LIBRARY&#125;</span> )</span><br><span class="line"><span class="keyword">set</span>(LIBXML2_INCLUDE_DIRS <span class="variable">$&#123;LIBXML2_INCLUDE_DIR&#125;</span> )</span><br></pre></td></tr></table></figure>
<h4 id="借助LibFindMacros宏"><a href="#借助LibFindMacros宏" class="headerlink" title="借助LibFindMacros宏"></a>借助LibFindMacros宏</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - Try to find ImageMagick++</span></span><br><span class="line"><span class="comment"># Once done, this will define</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Magick++_FOUND - system has Magick++</span></span><br><span class="line"><span class="comment">#  Magick++_INCLUDE_DIRS - the Magick++ include directories</span></span><br><span class="line"><span class="comment">#  Magick++_LIBRARIES - link these to use Magick++</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">include</span>(LibFindMacros)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Dependencies</span></span><br><span class="line">libfind_package(Magick++ Magick)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Use pkg-config to get hints about paths</span></span><br><span class="line">libfind_pkg_check_modules(Magick++_PKGCONF ImageMagick++)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Include dir</span></span><br><span class="line"><span class="keyword">find_path</span>(Magick++_INCLUDE_DIR</span><br><span class="line">  NAMES Magick++.h</span><br><span class="line">  PATHS <span class="variable">$&#123;Magick++_PKGCONF_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Finally the library itself</span></span><br><span class="line"><span class="keyword">find_library</span>(Magick++_LIBRARY</span><br><span class="line">  NAMES Magick++</span><br><span class="line">  PATHS <span class="variable">$&#123;Magick++_PKGCONF_LIBRARY_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Set the include dir variables and the libraries and let libfind_process do the rest.</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Singular variables for this library, plural for libraries this this lib depends on.</span></span><br><span class="line"><span class="keyword">set</span>(Magick++_PROCESS_INCLUDES Magick++_INCLUDE_DIR Magick_INCLUDE_DIRS)</span><br><span class="line"><span class="keyword">set</span>(Magick++_PROCESS_LIBS Magick++_LIBRARY Magick_LIBRARIES)</span><br><span class="line">libfind_process(Magick++)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;cmake 过程中总是出现找不到模块，所以学习一下，最好要会写FindXXX.cmake&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
    
    </summary>
    
    
      <category term="机器人软件构造" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E6%9E%84%E9%80%A0/"/>
    
  </entry>
  
  <entry>
    <title>【深度学习】Caffe-opencl-1构建</title>
    <link href="https://ZhenshengLee.github.io/2016/10/02/161002-Caffe-opencl-1%E6%9E%84%E5%BB%BA/"/>
    <id>https://ZhenshengLee.github.io/2016/10/02/161002-Caffe-opencl-1构建/</id>
    <published>2016-10-02T11:34:41.000Z</published>
    <updated>2016-10-03T08:08:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>自己脑残，当年买了个A卡，有点兴趣，构建了一下Caffe-opencl</li>
<li>重要经验：重新构建一定要make clean</li>
</ul>
<p>[TOC]</p>
<a id="more"></a>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="https://github.com/BVLC/caffe/issues/4167" target="_blank" rel="external">Problem with greentea</a><br><a href="https://github.com/BVLC/caffe/tree/opencl" target="_blank" rel="external">Github-caffe-opencl</a><br><a href="https://github.com/BVLC/caffe/issues/4157" target="_blank" rel="external">TestSharedWeightsUpdate Test Failed</a></p>
</blockquote>
<h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><h3 id="安装私有显卡驱动程序"><a href="#安装私有显卡驱动程序" class="headerlink" title="安装私有显卡驱动程序"></a>安装私有显卡驱动程序</h3><ul>
<li>到官网即可</li>
</ul>
<h3 id="安装显卡APPSDK"><a href="#安装显卡APPSDK" class="headerlink" title="安装显卡APPSDK"></a>安装显卡APPSDK</h3><ul>
<li>到官网即可</li>
<li>记住clinfo查看情况，如果没有查看到AMD APP，则按下步骤解决<ul>
<li>sudo apt-get install fglrx fglrx-core fglrx-amdcccle fglrx-dev fglrx-pxpress</li>
</ul>
</li>
</ul>
<h3 id="安装CUDA"><a href="#安装CUDA" class="headerlink" title="安装CUDA"></a>安装CUDA</h3><ul>
<li>sudo apt-get install nvidia-cuda-toolkit</li>
<li>不要安装！</li>
</ul>
<h3 id="安装boost"><a href="#安装boost" class="headerlink" title="安装boost"></a>安装boost</h3><ul>
<li>sudo apt-get install libboost-all-dev</li>
</ul>
<h3 id="安装googletest"><a href="#安装googletest" class="headerlink" title="安装googletest"></a>安装googletest</h3><ul>
<li>sudo apt-get install libgtest-dev</li>
</ul>
<h3 id="使用ACML数学库-AMD-Concurrent-Mathmatical-Library"><a href="#使用ACML数学库-AMD-Concurrent-Mathmatical-Library" class="headerlink" title="使用ACML数学库(AMD Concurrent Mathmatical Library)"></a>使用ACML数学库(AMD Concurrent Mathmatical Library)</h3><h4 id="先安装gfortran"><a href="#先安装gfortran" class="headerlink" title="先安装gfortran"></a>先安装gfortran</h4><ul>
<li>sudo apt-get install gfortran</li>
<li>查看自己CPU支持哪些指令集，本机支持SSE2，AVX，只要支持AVX或者FMA4就可以使用这个库加速以提高性能，不然就不行<ul>
<li>cat /proc/cpuinfo | grep flags</li>
</ul>
</li>
</ul>
<h4 id="安装ACML"><a href="#安装ACML" class="headerlink" title="安装ACML"></a>安装ACML</h4><ul>
<li>sudo mv ./acml6.1.0 /opt</li>
<li>编译时一般使用动态链接库，要使用动态链接库，需设置环境变量LD_LIBRARY_PATH<ul>
<li>If you have an SMP machine and want to take best advantage of it, link against the</li>
</ul>
</li>
</ul>
<p>gfortran OpenMP version of ACML like this:</p>
<ul>
<li>由于本机不是多处理器机器，所以使用gfortran64<ul>
<li>到底是不是呢？多核处理器应该也是多处理器才对啊～加到变量里面再说吧！</li>
</ul>
</li>
</ul>
<ul>
<li>echo ‘export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/acml6.1.0/gfortran64/lib’ &gt;&gt; ~/.bashrc</li>
<li>echo ‘export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/acml6.1.0/gfortran64_mp/lib’ &gt;&gt; ~/.bashrc</li>
<li><p>source ~/.bashrc</p>
<ul>
<li>环境变量立即生效</li>
</ul>
</li>
<li><p>示例程序在/opt/acml6.1.0/gfrotran64/examples</p>
<ul>
<li>使用GNUMakefile进行编译</li>
<li>使用计时程序画图表示</li>
<li><p>sudo apt-get install gnuplot</p>
</li>
<li><p>编译时使用多线程</p>
</li>
<li><p>% make OMP_NUM_THREADS=2</p>
</li>
<li><p>编译时画时间图</p>
</li>
<li>% make plots</li>
<li>You may need to edit the GNUmakefile to point at the correct location of your installed copy of the ACML, or to change compilers and flags.</li>
</ul>
</li>
</ul>
<h3 id="安装cIBLAS-a-software-library-containing-BLAS-functions-written-in-OpenCL"><a href="#安装cIBLAS-a-software-library-containing-BLAS-functions-written-in-OpenCL" class="headerlink" title="安装cIBLAS(a software library containing BLAS functions written in OpenCL)"></a>安装cIBLAS(a software library containing BLAS functions written in OpenCL)</h3><ul>
<li>git clone</li>
<li>cd src &amp; mkdir build &amp; cd build</li>
<li>cmake ..</li>
<li><p>sudo make</p>
<ul>
<li>collect2: error: ld returned 1 exit status</li>
<li>make[2]: <em>*</em> [staging/test-correctness] Error 1</li>
<li>make[1]: <em>*</em> [tests/CMakeFiles/test-correctness.dir/all] Error 2</li>
<li>make: <em>*</em> [all] Error 2</li>
<li>这是个BUG，去下载dev版本的clBLAS吧</li>
<li>还没解决。。。看帖子</li>
<li>检查gcc（4.8.4），CMake（2.8.12.2），Make（3.8.1）版本</li>
</ul>
</li>
<li><p>检查各个依赖项的配置是否正确</p>
<ul>
<li>OPENCL配置<ul>
<li>无误</li>
</ul>
</li>
<li>boost</li>
<li><p>没有设置环境变量</p>
<ul>
<li>export BOOST_ROOT=/usr/lib/x86_64-linux-gnu</li>
</ul>
</li>
<li><p>gTest</p>
</li>
<li>已经安装好了</li>
<li>不仅要装clACML，也要装ACML</li>
<li><p>早就装好了</p>
</li>
<li><p>clBLAS</p>
</li>
<li><p>install cmake-gui</p>
</li>
<li><p>检查cmake 输出</p>
</li>
<li>sudo apt-get install liblapack-dev</li>
</ul>
</li>
<li><p>成功！！！</p>
</li>
<li>安装在/usr/local/lib64<ul>
<li>export CLBALS_ROOT=/usr/local/lib64</li>
<li>/usr/local/include</li>
</ul>
</li>
</ul>
<h3 id="安装Caffe-opencl"><a href="#安装Caffe-opencl" class="headerlink" title="安装Caffe-opencl"></a>安装Caffe-opencl</h3><ul>
<li>sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler</li>
<li>sudo apt-get install –no-install-recommends libboost-all-dev</li>
<li>sudo apt-get install libatlas-base-dev</li>
<li>sudo apt-get install the python-dev</li>
<li>sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</li>
<li>compile opencl-caffe<ul>
<li>修改Makefile.config</li>
</ul>
</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Override BLAS, use clBLAS insead of ViennaclBLAS.</span></span><br><span class="line">USE_CLBLAS := 1</span><br><span class="line"><span class="comment"># Custom clBLAS lib and include directories.</span></span><br><span class="line">CLBLAS_INCLUDE := /usr/local/include</span><br><span class="line">CLBLAS_LIB     := /usr/local/lib64</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># CUDA directory contains bin/ and lib/ directories that we need.</span></span><br><span class="line"><span class="comment"># CUDA_DIR := /usr/local/cuda</span></span><br><span class="line"><span class="comment"># On Ubuntu 14.04, if cuda tools are installed via</span></span><br><span class="line"><span class="comment"># "sudo apt-get install nvidia-cuda-toolkit" then use this instead:</span></span><br><span class="line">CUDA_DIR := /usr</span><br></pre></td></tr></table></figure>
<ul>
<li>make</li>
<li>make runtest<ul>
<li>出错，发现还是GREENTEA的问题，决定重新安装Vienna库（/usr/local/include/）</li>
<li>记住，重新构建一定要make clean</li>
</ul>
</li>
<li>还有一个测试错误</li>
</ul>
<blockquote>
<p>That’s ok, it’s not actually a fail, the epsilon-distance between “is” and “should” is just a bit bigger than the test setting appreciates.</p>
</blockquote>
<ul>
<li>这只是计算误差而已，没有问题！</li>
</ul>
<ul>
<li>大功告成，开始使用</li>
</ul>
<h2 id="mnist实例"><a href="#mnist实例" class="headerlink" title="mnist实例"></a>mnist实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ./caffe-opencl</span><br><span class="line">data/mnist/get_mnist.sh</span><br><span class="line">examples/mnist/create_mnist.sh</span><br><span class="line">examples/mnist/train_lenet.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;自己脑残，当年买了个A卡，有点兴趣，构建了一下Caffe-opencl&lt;/li&gt;
&lt;li&gt;重要经验：重新构建一定要make clean&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>【库】Cpp常用库集合</title>
    <link href="https://ZhenshengLee.github.io/2016/10/02/161002-Cpp%E5%B8%B8%E7%94%A8%E5%BA%93%E9%9B%86%E5%90%88/"/>
    <id>https://ZhenshengLee.github.io/2016/10/02/161002-Cpp常用库集合/</id>
    <published>2016-10-02T03:35:06.000Z</published>
    <updated>2016-10-02T03:37:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>没事儿到网上知乎了一下，有时间就积累，学习吧</li>
</ul>
<a id="more"></a>
<h2 id="清单"><a href="#清单" class="headerlink" title="清单"></a>清单</h2><h3 id="标准库"><a href="#标准库" class="headerlink" title="标准库"></a>标准库</h3><ul>
<li><p>C/C++ 标准库</p>
<ul>
<li>必须掌握</li>
</ul>
</li>
<li><p>STL/Boost</p>
<ul>
<li>必须掌握</li>
</ul>
</li>
<li><p>POSIX C规范</p>
<ul>
<li>必须掌握</li>
</ul>
</li>
</ul>
<h3 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h3><ul>
<li><p>Qt</p>
<ul>
<li>界面库</li>
</ul>
</li>
</ul>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ul>
<li><p>SQLite</p>
<ul>
<li>一个完全嵌入式的，功能齐全的关系数据库，只有几百K，完全可以包含在项目中</li>
</ul>
</li>
<li><p>MongoDB</p>
</li>
<li><p>OTL</p>
<ul>
<li>知乎网友推荐</li>
</ul>
</li>
</ul>
<h3 id="异步-网络"><a href="#异步-网络" class="headerlink" title="异步/网络"></a>异步/网络</h3><ul>
<li><p>boost.asio</p>
</li>
<li><p>ZeroMQ</p>
<ul>
<li>知乎推荐</li>
</ul>
</li>
<li><p>muduo</p>
</li>
</ul>
<h3 id="并发多线程"><a href="#并发多线程" class="headerlink" title="并发多线程"></a>并发多线程</h3><ul>
<li><p>OpenCL</p>
</li>
<li><p>OpenMP</p>
</li>
</ul>
<h3 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h3><ul>
<li><p>Gurobi</p>
<ul>
<li>优化问题解算</li>
</ul>
</li>
<li><p>GNU Scientific Library</p>
<ul>
<li>最优化，排序，线性代数，稀疏矩阵</li>
</ul>
</li>
<li><p>MKL</p>
<ul>
<li>来自Intel</li>
</ul>
</li>
<li><p>NLopt</p>
<ul>
<li>有约束类问题用这个最优化包不错</li>
</ul>
</li>
<li><p>FFTW</p>
<ul>
<li>用一维或多维计算DFT的库</li>
</ul>
</li>
</ul>
<h3 id="动力学仿真"><a href="#动力学仿真" class="headerlink" title="动力学仿真"></a>动力学仿真</h3><ul>
<li><p>Box2D</p>
<ul>
<li>2d游戏物理引擎</li>
</ul>
</li>
<li><p>Bullet</p>
<ul>
<li>3d的游戏物理引擎</li>
</ul>
</li>
<li><p>ODE</p>
<ul>
<li>开源，高性能，刚体动力学仿真</li>
</ul>
</li>
<li><p>Simbody</p>
<ul>
<li>模拟关节生物力学，如人体骨骼</li>
</ul>
</li>
</ul>
<h3 id="机器人"><a href="#机器人" class="headerlink" title="机器人"></a>机器人</h3><ul>
<li><p>MOOS-lvp</p>
<ul>
<li>提供机器人平台的自主权，主攻海洋车辆</li>
</ul>
</li>
<li><p><a href="http://www.mrpt.org/" target="_blank" rel="external">MRPT</a></p>
<ul>
<li><p>Moblie Robot Programming Toolkit，五脏俱全，但跟ROS比不得</p>
</li>
<li><p><a href="http://www.mrpt.org/tutorials/supported_hardware_and_sensors/" target="_blank" rel="external">对NI设备提供直接支持</a></p>
</li>
</ul>
</li>
<li><p><a href="http://www.roboticslibrary.org/" target="_blank" rel="external">Robotics Library</a></p>
<ul>
<li><p>机器人动力学，运动规划和控制，跟<a href="http://www.orocos.org/" target="_blank" rel="external">Orocos</a>的不同是这个库自带前端</p>
</li>
<li><p><a href="http://www.roboticslibrary.org/tutorials/" target="_blank" rel="external">重要特点是官方支持在Windows中构建！</a></p>
</li>
</ul>
</li>
<li><p><a href="http://www.robwork.dk/" target="_blank" rel="external">RobWorkProject</a></p>
<ul>
<li>一个大学出的算法集合，主要目标是学生，貌似适合学习源代码！</li>
</ul>
</li>
</ul>
<h3 id="机器学习"><a href="#机器学习" class="headerlink" title="机器学习"></a>机器学习</h3><ul>
<li><p>Caffe</p>
</li>
<li><p>Shark</p>
</li>
<li><p>Dlib</p>
</li>
</ul>
<h3 id="计算机图形"><a href="#计算机图形" class="headerlink" title="计算机图形"></a>计算机图形</h3><ul>
<li><p>HDK</p>
<ul>
<li>3D库</li>
</ul>
</li>
</ul>
<h3 id="日志库"><a href="#日志库" class="headerlink" title="日志库"></a>日志库</h3><ul>
<li><p>log4cpp</p>
</li>
<li><p>easylogging++</p>
<ul>
<li>知乎推荐</li>
</ul>
</li>
<li><p>glog</p>
<ul>
<li>Google出品</li>
</ul>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p>protobuf</p>
<ul>
<li>序列化工具</li>
</ul>
</li>
<li><p>Folly</p>
<ul>
<li>Facebook开发和使用的库</li>
</ul>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;没事儿到网上知乎了一下，有时间就积累，学习吧&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>草稿：机器人协作平台软件建模，设计与实现</title>
    <link href="https://ZhenshengLee.github.io/2016/09/30/160808%E5%8D%8F%E4%BD%9C%E5%B9%B3%E5%8F%B0%E8%BD%AF%E4%BB%B6%E5%BB%BA%E6%A8%A1%E4%B8%8E%E8%AE%BE%E8%AE%A1/"/>
    <id>https://ZhenshengLee.github.io/2016/09/30/160808协作平台软件建模与设计/</id>
    <published>2016-09-30T01:14:50.000Z</published>
    <updated>2016-09-30T01:23:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h2 id="0-摘要"><a href="#0-摘要" class="headerlink" title="0 摘要"></a>0 摘要</h2><ul>
<li>（第一章）探讨和综述了机器人系统设计中的复用，包括设计方法级别复用（各种设计方法和原则）和体系结构级别复用（传统的智能组织到基于组件机器人工程）。介绍基于组件机器人工程（软总线技术CORBA和组件库技术）</li>
<li>（第一章）介绍机器人系统设计中的一个重要模块，人机协作系统。</li>
<li>（第二章）基础知识。</li>
<li>（第三，四章）基于功能分析和UML模型对机器人协作系统软件进行建模和设计</li>
<li>（第五章）基于LabVIEW对软件进行实现</li>
<li>（第六章）针对当前软件的扩展性，提出一种软件设计参考模型。</li>
</ul>
<a id="more"></a>
<h2 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1 绪论"></a>1 绪论</h2><h3 id="1-1-机器人系统开发概述"><a href="#1-1-机器人系统开发概述" class="headerlink" title="1.1 机器人系统开发概述"></a>1.1 机器人系统开发概述</h3><ul>
<li>如何科学而高效地设计机器人系统，一直是业界的热点问题。由于缺乏有效的软件集成方式，开发者在不断地重复“造轮子”，导致开发效率低下。一直以来，学者们不断在探索在机器人系统设计中的复用，包括方法复用和体系结构复用，在方法复用的探索上，研究者们不断提出新的系统化的机器人设计方法，在体系结构复用方面，研究者们期望能够得到一个通用的系统架构。（Wei and Jiachen et al., 2011）</li>
<li>分析领域内的复用<ul>
<li>关于如何设计机器人系统，学者们从各个角度阐述了不同观点。在设计方法学上，一直存在着两种传统观点：基于符号处理的自顶向下方法和基于生物学原则的自底向上方法（Jones and Roth, 2004），不过当前的趋势是两种方法深度结合的混合设计方法。Pfeier（Pfeifer and Iida et al., 2005）在其论文中提出了一系列机器人的设计原则，包括通用的设计流程原则和具体的智能体设计原则两大类，在设计流程方面的原则包括“在构建中理解（Understanding by building）”的合成方法原则，紧急原则（系统应具有适应性，如能够在非正常情况下工作）等；智能体设计原则包括三构造原则（设计智能系统必须将环境，任务，智能体考虑在内），并行低耦合原则（与环境的交互任务必须是并行的，异步的，部分自主的，低耦合的）等等，为我们设计新一代机器人系统提供了指导。Yavuz提出了一种面向功能的概念分析方法来设计智能移动机器人，其主要流程分为：1）多学科功能分析；2）将功能分解至合适的细粒度；3）对于每一个子功能，找出多种实现手段和可替代功能；4）设计总体模型。其论文给出了一个案例，在案例中把机器人的功能分为三个大类：移动性（Mobility），导航（Navigation）和自主（Autonomy），同时考虑到机器人产品的商品性，提供了五个非功能性设计需求：简单的总体结构（Simple overall structure）；高效率（Cost effective）；鲁棒性的结构（Robust structure）；智能和具适应性的行为（Intelligent and adaptive behavior）；操作可靠（Reliable operation）。接下来使用FD树对这些需求进行分解，并选择使用机械，电子或软件的方法进行实现，最后给出一个总体的结构图。这种方法的优点是概念清晰，在功能较少的情况下设计简单，不过当系统变得复杂之后，设计仍然面临很多困难。2010年OROCOS的作者提出了以关注点分离为核心的BRICS设计原则并作为机器人开发最佳实践，BRICS提出了“5C模型”，即通信（Communication），计算（Computation），协调（Coordinator），配置（Configuration），构造（Composition）在设计和实现过程中得到分离，给予我们许多有益的启示。</li>
</ul>
</li>
<li>设计领域内的复用<ul>
<li>架构是构建复杂智能系统的基石，好的架构可以清晰描述如何将智能系统分解为子系统。关于寻求通用的系统架构，在20世纪90年代，学者们的关注点在于整体构建机器人的智能，提出了三种机器人范式：慎思式，反应式和混合范式（Arkin, 1998），随着计算机性能的快速发展，同时具有慎思式和反应式优点的混合范式已经称为主流。到21世纪初，不同厂商的机电设备，模块的不通用性已经成为制约机器人开发成本和设计周期的主要障碍，学者们的关注点从机器人系统的整体构建转移到基于组件技术的中间件研究，代表性成果包括软总线技术标准CORBA（Common Object Request Broke Architecture）（OMG）和组件库OROCOS（参考文献）。CORBA支持异构平台下对象的可互操作性和移植性方面具有很大开放性与灵活性，该标准主要特点是实现了软总线结构，通过功能抽象，屏蔽和隐藏底层诸如操作系统、开发语言和具体技术、协议等细节差异，形成一套统一的接口描述，从而解除了各个组件之间的紧密的耦合性；同时将各类应用模块按总线规范封装成组件，插入总线即可实现集成运行。OROCOS项目具体由四个C++组件库组成：实时工具集（RTT），运动学与动力学算法集（KDL），贝叶斯过滤库（BFL）与OROCOS组件库（OCL）：（1）实时工具集不仅是一个应用程序，还为机器人系统开发人员提供了大量的组件化应用案例；（2）运动与动力学组件是一个C++的函数库，提供了实时的动力学约束计算服务；（3）贝叶斯过滤库提供了一种专有的应用算法库，是由动态贝叶斯网络理论推导出的。这个理论可用于递归信息处理及基于贝叶斯规则的算法评估，例如卡尔曼滤波，粒子滤波算法等；（4）OROCOS组件库提供了一些典型的控制模块，如硬件接口模块，控制模块及模块的管理功能组件。</li>
</ul>
</li>
<li>基于组件机器人工程<ul>
<li>基于组件的软件设计，综合了设计方法层次和体系结构层次的软件复用（需要文献支撑），其理念受到业界广泛应用，历年来不断出现的机器人中间件（FINROC，2012）（GenoM3，2010）（OPRoS，2010），以ROS（机器人操作系统，2011）为代表，能够有效屏蔽操作系统、开发语言和网络协议的差异，为机器人开发提供多种通信和服务机制，是解决机器人组件化设计、消除机器人系统异构性问题的有效途径之一，目前已成为国际机器人研究的热点领域。（接下来介绍2010年基于组件机器人工程（Component-based robotic engineering）的提出）（Brugali and Shakhimardanov, 2010）（文献待阅读）</li>
</ul>
</li>
</ul>
<h3 id="1-2-人机协作系统"><a href="#1-2-人机协作系统" class="headerlink" title="1.2 人机协作系统"></a>1.2 人机协作系统</h3><h4 id="1-2-1-人机协作系统的提出"><a href="#1-2-1-人机协作系统的提出" class="headerlink" title="1.2.1 人机协作系统的提出"></a>1.2.1 人机协作系统的提出</h4><ul>
<li>智能移动机器人正在以惊人的关注度走进人类生产生活的各个方面，这已成为学界和工业界的共识。为了完成复杂的任务，机器人不仅仅需要在非结构环境下安全高效工作，而且需要与人有较高层次的合作与沟通。历史上移动机器人与人的交互模型主要有三种，第一种是遥操作，即人与机器人为主从关系，机器人实际上是人的工具，人与机器人构成控制闭环，人的作用就是控制器。这种交互方式的不足在于；1）如果工作人员离岗，机器人就停止工作，即人需要长时间在线；2）由于人控制的精确性和稳定性远远不如机器，机器人的工作能力被人所弱化；3）如果系统延时较大，如发生紧急事故，人不能立即操作机器人解决问题。第二种交互模型为监督控制，即人传递给机器人一个简单具体的指令清单，机器人按照指令清单执行动作，人主要进行机器人监控和流程控制。这种交互模型的不足在于1）由于机器人及所处环境未知且复杂，机器人指令清单设计困难2）非结构环境下难以保证机器人动作执行正确。第三种交互模型为全自主控制，人只需传递机器人一个抽象的任务目标，机器人借助人工智能技术自主感知环境，进行任务规划和执行。这种交互模型的不足在于，当前的人工智能技术（尽管飞速发展）与人类智能的差距太大，但技术还远未成熟。三种交互方式的控制结构示意图如下所示(徐坤, 2009)</li>
</ul>
<p><strong><em>图取自他人论文，尝试修改或者新建一套图</em></strong></p>
<ul>
<li>随着基于行为移动机器人研究的兴起，机器人自主性不断提升，人与机器人交互模型也相应有了新的发展——人机协作（HRC）。在这种模式下，人与机器人合作完成工作任务，机器人并不是人类的工具而是伙伴，能够跟人进行沟通，思考人类的意图，主动向人类提问或寻求帮助，将人类作为外界的消息来源，更好地完成目标。人机协作，作为新的人机交互模式，拥有极其广阔的研究价值</li>
</ul>
<p><strong><em>需要最新文献支持</em></strong>。</p>
<h4 id="1-2-2-人机协作系统的特点（王挺-2004）"><a href="#1-2-2-人机协作系统的特点（王挺-2004）" class="headerlink" title="1.2.2 人机协作系统的特点（王挺, 2004）"></a>1.2.2 人机协作系统的特点（王挺, 2004）</h4><ul>
<li>在人机协作系统中，人通过某种方式参与到系统的感知，判断，决策过程中。与通常的半自主机器人不同，人类智能作为智能机器人系统的一个智能模块，和其他功能模块一样具有特点的功能与接口，由于其拥有所有环境信息，所以可认为具有最高级的智能。需要注意的是，人类智能无法直接作用于机器人的执行机构，而是需要与机器智能协作。</li>
<li>具体来讲，人类智能模块接收来自于机器人的系统状态信息、传感器环境信息和一定条件下可以获得的操作者直接观察到的环境信息, 对这些信息进行整理、抽取、分析、合并得到用以辅助机器智能操作的输出, 输出量应该在机器智能算法遇到局限时起到辅助和指导作用。按照传统的三层递阶体系结构分类，人类智能位于组织层，机器智能跨越组织层和协调层，是某种特定形式的人工智能算法，它接收系统状态信息，传感器环境信息和来自于人类智能模块的指导性输入，经运算得到相应的控制量输出，送给位于执行层的任务分解单元。在大多数情况下机器人可以凭借自身的智能算法完成移动功能，只有当机器人遇到复杂环境无法完全根据自身的算法获得有效输出的时候，人类智能模块的指导性输入量才被引入。体系结构示意图如下。</li>
</ul>
<p><strong><em>图取自他人论文</em></strong></p>
<ul>
<li>当然作为适当的功能保留，操作者应当具备对机器人的直接指令操作能力，并在任何时候对于机器人系统享有高于机器智能的优先控制权，但这时人机系统便退化成为人机交互系统(半自主系统)(体系结构示意图如下)，从图中可以看出人机系统与人机交互系统(半自主系统)的另一个区别在于前者人与协层交互，后者人与执行层交互。</li>
</ul>
<p><strong><em>图取自他人论文</em></strong></p>
<h3 id="1-3-本项目背景和意义"><a href="#1-3-本项目背景和意义" class="headerlink" title="1.3 本项目背景和意义"></a>1.3 本项目背景和意义</h3><h4 id="1-3-1-背景"><a href="#1-3-1-背景" class="headerlink" title="1.3.1 背景"></a>1.3.1 背景</h4><ul>
<li>智能移动机器人正在以惊人的关注度走进人类生产生活的各个方面，这已成对为学界和工业界的共识。人们机器人抱有极大的热情和期待，例如期待机器人能够代替人类去危险、有毒、有害的场所实施灾害救援任务，能够进入太空或其它星球完成太空探索任务，能够在我们步入老龄社会时承担助老任务，能够帮助残疾人实现生活自理……。但目前的科学技术水平距离人们的期待还有很长的路要走，机器人没有办法独立完成这些任务。本项目以“人”与“机器人”的协作为出发点，试图通过协作，充分发挥人与机器人各自的优势，以实际可行的方式，在一定程度上实现人们对机器人的期待。本项目充分利用机器人的精准、“钢铁之躯”和人类在意识、决策上的优势，实现任何单独一方难以完成的任务，具有极大的应用前景。</li>
<li>大量文献资料表明，人机协作乃至对等协作的人机交互方式是移动机器人控制的研究热点和发展方向。对机器人人机协作平台软件的研制，将有效提高机器人的工作效率和能力，进而提高机器人的自主性；采用新的软件复用方法和工具，将有望产生新的可复用的软件体系架构和软件开发过程模型，为以后的研究打好基础和提供指导，为同行提供可借鉴的经验。</li>
<li>本课题受国家“973”计划课题“核电站紧急救灾机器人的主从控制和自律协同”资助（编号2013CB0S35504）。</li>
</ul>
<h4 id="1-3-2-主要创新点"><a href="#1-3-2-主要创新点" class="headerlink" title="1.3.2 主要创新点"></a>1.3.2 主要创新点</h4><ul>
<li>在机器人软件设计不成熟的背景下，基于UML规范对机器人协作平台软件进行建模和设计。基于模型的设计通用性好，可向同行提供有价值经验。</li>
<li>创新性的使用Actor编程模型对软件进行详细设计，软件模块化，扩展性能好。</li>
<li>提出一个机器人协作平台软件的通用参考模型，有望实现多机器人人机协作平台。</li>
<li>不仅提供了一种模型表示，还给出了实际开发过程。</li>
</ul>
<h3 id="1-4-人机系统相关工作"><a href="#1-4-人机系统相关工作" class="headerlink" title="1.4 人机系统相关工作"></a>1.4 人机系统相关工作</h3><p><strong><em>有待文献查取和写作</em></strong></p>
<h2 id="2-基础"><a href="#2-基础" class="headerlink" title="2 基础"></a>2 基础</h2><h3 id="2-1-本项目概述"><a href="#2-1-本项目概述" class="headerlink" title="2.1 本项目概述"></a>2.1 本项目概述</h3><p><strong><em>暂时摆两张图</em></strong></p>
<h3 id="2-2-LabVIEW"><a href="#2-2-LabVIEW" class="headerlink" title="2.2 LabVIEW"></a>2.2 LabVIEW</h3><h4 id="2-2-1-LabVIEW执行系统（多线程，多任务）"><a href="#2-2-1-LabVIEW执行系统（多线程，多任务）" class="headerlink" title="2.2.1 LabVIEW执行系统（多线程，多任务）"></a>2.2.1 LabVIEW执行系统（多线程，多任务）</h4><ul>
<li>在LabVIEW中，VI文件是基本的程序运行单元，一个VI包括前面板和后面板，开发者通过在前面板上放置控件，在后面板上进行图形编程的方式，制作虚拟仪器程序。每一个VI应用程序可以执行特定的任务，并拥有完整的人机交互界面。本节将介绍LabVIEW非常重要的特性——自动多线程，LabVIEW自动将每个应用程序分解为多个执行线程。本节先介绍LabVIEW单个应用程序的自动多线程原理，然后介绍VI的线程模型，最后介绍LabVIEW中的多任务。</li>
</ul>
<h5 id="2-2-1-1-LabVIEW的VI自动多线程"><a href="#2-2-1-1-LabVIEW的VI自动多线程" class="headerlink" title="2.2.1.1 LabVIEW的VI自动多线程"></a>2.2.1.1 LabVIEW的VI自动多线程</h5><p><strong><em>以下内容为摘抄，待修改</em></strong></p>
<ul>
<li>线程管理的复杂任务内化在LabVIEW执行系统之中。</li>
<li>所有线程管理的复杂任务在LabVIEW执行系统中都是透明的。基于文本程序设计的程序员必须学习新的复杂的编程方法来创建多线程应用程序。但是所有LabVIEW应用程序都可自动进行多线程化，无需修改任何代码。</li>
<li>除了操作系统的抢占式多任务处理，LabVIEW还采用了协同式多任务系统。在编译过程中，LabVIEW将分析VI查找可以同时运行的节点组合，这种节点组合也称为程序块。每个优先级和执行系统的组合都有一个运行队列数据结构，以保留哪些程序块能够一起运行。执行系统在激活一个线程的同时会从运行队列中重新找回并执行这个程序块。执行系统完成执行后，将存储其他的队列中符合输入条件的程序块，允许程序框图在4个可执行线程中的任何一个线程上执行。如果程序框图包含足够的并行机制，它可以在所有线程上同时执行。</li>
<li>LabVIEW不能永久地给一个特定的线程分配程序块代码。下次运行VI时，LabVIEW将以不同的线程执行程序块。</li>
<li><p>下列程序框图上的红色长方形显示了LabVIEW如何将节点组合为程序块。</p>
</li>
<li><p>在该例中，程序框图由三个程序块组成，输入控件的程序块与显示控件的程序块是一样的。因此，该程序块在两个时间点执行。程序块在执行前后会进入休眠或延迟状态。左边第一个程序块开始执行后，第一个程序块即开始休眠，其他两个For循环程序块开始执行。VI准备开始执行显示控件程序块时，左右两个程序块停止休眠。</p>
</li>
</ul>
<h5 id="2-2-1-2-单个应用程序的线程模型"><a href="#2-2-1-2-单个应用程序的线程模型" class="headerlink" title="2.2.1.2 单个应用程序的线程模型"></a>2.2.1.2 单个应用程序的线程模型</h5><ul>
<li>根据上一节的原理，VI根据实际编写的代码，自动分配个多个线程完成任务，这在多核处理器电脑中会带来性能提升。那么每一个VI中到底包含多少线程？</li>
<li><p>LabVIEW分配大致三类型线程：</p>
<ul>
<li>1个UI线程，用于屏幕刷新和键盘鼠标输入。这个线程同时也用于特定VI的执行，譬如属性节点，非安全线程和DLL等。</li>
<li>内部线程，LabVIEW内部使用。如一对定时线程。</li>
<li>20个执行线程(每一个CPU)。</li>
<li>可选线程。如果使用ActiveX客户端工作，那么还会分配更多的线程。</li>
</ul>
</li>
<li><p>关于20个执行线程，LabVIEW有5个 “执行系统”, 并且每个执行系统分4个不同等级分配线程。于是总共有20个线程（并且没有包含UI线程，也是用来执行的）。这5个执行子系统包括：Standard，I/O，DAQ，Other 1，Other 2，示意图如下所示。关于各个子系统的职能以及更多信息，请参考文献（Bitter and Mohiuddin et al., 2006）</p>
</li>
</ul>
<h5 id="2-2-1-3-LabVIEW中的多任务"><a href="#2-2-1-3-LabVIEW中的多任务" class="headerlink" title="2.2.1.3 LabVIEW中的多任务"></a>2.2.1.3 LabVIEW中的多任务</h5><p><strong><em>介绍在LabVIEW中的线程，进程间通信方式，参考《LabVIEW宝典》</em></strong></p>
<h4 id="2-2-2-LabVIEW软件开发（项目管理，面向对象，CBSE扩展性）"><a href="#2-2-2-LabVIEW软件开发（项目管理，面向对象，CBSE扩展性）" class="headerlink" title="2.2.2 LabVIEW软件开发（项目管理，面向对象，CBSE扩展性）"></a>2.2.2 LabVIEW软件开发（项目管理，面向对象，CBSE扩展性）</h4><ul>
<li>LabVIEW不仅仅用来编写概念验证代码和一次性测量程序，作为一种成熟的编程语言，依然支持复杂的软件工程实现各种应用。本节阐述了使用LabVIEW进行更复杂编程时会用到的功能特性。主要包括LabVIEW项目管理器，面向对象编程，和软件扩展性三个方面。</li>
<li>在本文的接下来部分，我们将通过LabVIEW面向对象编程和操作者框架来展示如何使用LabVIEW来构建大型程序。</li>
</ul>
<p><strong><em>都是教科书上的内容，先贴几张图</em></strong></p>
<h5 id="2-2-2-1-项目管理器"><a href="#2-2-2-1-项目管理器" class="headerlink" title="2.2.2.1 项目管理器"></a>2.2.2.1 项目管理器</h5><h5 id="2-2-2-2-面向对象"><a href="#2-2-2-2-面向对象" class="headerlink" title="2.2.2.2 面向对象"></a>2.2.2.2 面向对象</h5><h5 id="2-2-2-3-扩展性"><a href="#2-2-2-3-扩展性" class="headerlink" title="2.2.2.3 扩展性"></a>2.2.2.3 扩展性</h5><p><strong><em>暂时摆图一张</em></strong></p>
<h2 id="3-机器人软件的分析建模"><a href="#3-机器人软件的分析建模" class="headerlink" title="3 机器人软件的分析建模"></a>3 机器人软件的分析建模</h2><ul>
<li>本项目将移动机器人软件开发过程建模为7个阶段：【需求建模（需求分析）】用例建模；数据流建模；【设计建模】早期设计；体系结构设计；构件选择和复用；构件精化；【软件实现】系统实现阶段。在第四，五，六章依次进行介绍。本章介绍分析建模部分的两个阶段：早期需求分析和结构化分析。</li>
</ul>
<h3 id="3-1-早期需求分析"><a href="#3-1-早期需求分析" class="headerlink" title="3.1 早期需求分析"></a>3.1 早期需求分析</h3><ul>
<li>早期需求分析的主要工作是基于用户场景产生用例模型，如果需要还应使用诸如活动图，泳道图等作为补充用例。本项目根据移动机器人的应用场景，撰写用户场景叙事，最终产生用例图和用例描述。</li>
</ul>
<p><strong><em>限于篇幅限制，只提供顶层用例图和一个用例的用例文档，其他查阅外部文档</em></strong></p>
<h4 id="3-1-1-用户场景叙事"><a href="#3-1-1-用户场景叙事" class="headerlink" title="3.1.1 用户场景叙事"></a>3.1.1 用户场景叙事</h4><ul>
<li>机器人监管者（Supervisor）在本地工作站上，通过无线局域网与远程的P3AT移动机器人（P3-AT Mobile Robot）进行协作，完成巡逻，环境监测，危险排除等任务。具体来讲，机器人监管者可以使用两种方式与机器人进行协作：手动控制（Manual Synergetic Control）和语音控制（Voice Synergetic Control），为了更好地与机器人进行协作，机器人在监管者面前应该是透明的，即机器人本体状态及周围环境信息应实时展现给监管者。</li>
<li>在手动控制中，监管者在本地工作站上使用操纵杆对机器人进行远程控制，监管者能够直接控制机器人自身移动，操作机械臂等执行机构，监管者也可以在地图上点击一个目标点，命令机器人到达该点位置；在语音交互中，监管者对手机讲述中文语音，将声音信号传递给机器人，机器人收到语音信号后执行对应的任务，如“向前走五米”命令。</li>
<li>机器人应做到较底层的行为自主，能够做到自我保护，环境识别与推理，路径规划等。机器人能够在较高的思维抽象层次与监管者进行协作。机器人在工作过程中，监管者能够随时打断机器人，获得最终控制权。</li>
<li>在监管者向机器人发送协作指令的同时，机器人将自身的状态信息和采集到的周围环境信息传输回本地工作站，本地工作站对其进行建模，通过人机交互界面将信息可视化。监管者在本地工作站上将能够清晰地了解机器人的情况。</li>
</ul>
<h4 id="3-1-2-顶层用例图"><a href="#3-1-2-顶层用例图" class="headerlink" title="3.1.2 顶层用例图"></a>3.1.2 顶层用例图</h4><p><strong><em>见图Top Level Use Case.pdf</em></strong></p>
<h4 id="3-1-3-“语音协作控制”用例文档"><a href="#3-1-3-“语音协作控制”用例文档" class="headerlink" title="3.1.3 “语音协作控制”用例文档"></a>3.1.3 “语音协作控制”用例文档</h4><ul>
<li>用例名：语音协作控制</li>
<li>概述：监管者在本地工作站，使用安卓手机输入语音信号，对机器人进行远程控制。</li>
<li>参与者：监管者和P3-AT机器人</li>
<li>前置条件：工作站与机器人连接成功</li>
<li>主序列：<ol>
<li>机器人与监管者交互定位</li>
<li>监管员要求进行语音协作控制</li>
<li>监管者使用手机输入进行语音信号录入，手机端将语音信号解释为中文命令，录入到本地工作站</li>
<li>本地工作站结合机器人状态数据，对命令进行初步分析，得到指令的抽象信息（类型，参数大小等），验证命令的合法性</li>
<li>如果命令合法，本地工作站对命令进行解释（翻译？），解释成机器人能够理解或直接执行的指令</li>
<li>如果解释成功，本地工作站将解释好的指令传递给远程机器人</li>
<li>远程机器人对指令进行执行，并在人机交互界面显示命令执行情况</li>
<li>如果命令执行情况正常，则在命令执行完毕后在人机交互界面显示执行结束情况</li>
</ol>
</li>
<li>可替换序列：<ul>
<li>步骤5：如果命令不合法，工作站人机交互界面上予以显示并停止，并要求监管者修改或者重新输入命令</li>
<li>步骤6：如果命令解释失败，工作站人机交互界面上予以显示并停止，并要求监管者检查命令或重新输入命令</li>
<li>步骤8：如果命令执行过程中出现失败，则在人机交互界面上予以显示并停止，并要求监管者重新输入命令。</li>
<li>步骤2-8：监管者放弃语音协作控制，控制结束。</li>
</ul>
</li>
</ul>
<h3 id="3-2-面向数据流建模"><a href="#3-2-面向数据流建模" class="headerlink" title="3.2 面向数据流建模"></a>3.2 面向数据流建模</h3><ul>
<li>数据流模型本是软件结构化分析方法的核心步骤，它从数据传递和加工的角度，刻画数据对象通过系统时如何转换数据。在本项目中其作为主要的需求分析表达方式，以提供对系统需求和流程的补充认识，在后面可以看到，数据流模型非常方便地映射为LabVIEW程序结构，使得软件开发效率大大提升。数据流模型的主要工作产品是数据流图（DFD）</li>
</ul>
<h4 id="3-2-1-为什么使用面向流程的建模方法"><a href="#3-2-1-为什么使用面向流程的建模方法" class="headerlink" title="3.2.1 为什么使用面向流程的建模方法"></a>3.2.1 为什么使用面向流程的建模方法</h4><ul>
<li>1.<strong>符合机器人结构的基本范式，便于从基本范式映射到软件模型</strong>。根据文献[Murphy.2001]，机器人的各种控制结构，都是由三种基元构成，即感知、规划、执行，各种机器人结构，都是三种基元经过不同抽象层次的分解和相互作用的结构。一般来讲，感知基元对传感器信息进行处理，生成感知/认知信息，规划基元对感知/认知信息进行处理，生成机器人能够直接执行的指令，而执行基元对指令进行处理，生成更加具体的执行器指令。整个过程可以非常直观地用数据流图表示</li>
<li>2.<strong>数据流模型可以直接映射到LabVIEW程序结构</strong>。LabVIEW开发平台使用图形化编程语言G语言，G语言设计的核心就是对数据流的表示[Hugo.1998]。<br><strong><em>本文提供环境图（顶层DFD）、一个分解举例和底层DFD</em></strong></li>
</ul>
<h4 id="3-2-2-顶层数据流模型"><a href="#3-2-2-顶层数据流模型" class="headerlink" title="3.2.2 顶层数据流模型"></a>3.2.2 顶层数据流模型</h4><ul>
<li>DFD采取了系统的输入-处理-输出的观点，也就是说，流入软件的数据对象，经由处理元素变换，最后以结果数据对象的形式流出软件。带标记的箭头表示数据对象，圆圈表示转换。DFD使用分层的方式表示，即第一个数据流模型表示整个系统，随后每个后续层提供更多的细节[Pressman.2005]。</li>
<li>顶层数据流模型（环境图）将整个软件系统描述为一个转换，用圆圈表示，外部实体（方框）产生系统所使用的信息，带标记的箭头代表数据对象。</li>
</ul>
<p><strong><em>顶层数据流模型见Context Diagram.pdf</em></strong></p>
<h4 id="3-2-3-第一层数据流模型"><a href="#3-2-3-第一层数据流模型" class="headerlink" title="3.2.3 第一层数据流模型"></a>3.2.3 第一层数据流模型</h4><ul>
<li>根据用例模型，我们将DFD扩展到第一层。DFD的扩展遵循传统上对机器人结构的认识，即感知、规划和执行。</li>
</ul>
<p><strong><em>第一层DFD见First-Level DFD.pdf</em></strong></p>
<h4 id="3-2-4-数据流模型的精化"><a href="#3-2-4-数据流模型的精化" class="headerlink" title="3.2.4 数据流模型的精化"></a>3.2.4 数据流模型的精化</h4><ul>
<li>接下来应该对DFD进行求精，以获得更多需求信息，直到每一个泡泡都执行某一个单一的功能，这样该功能就很容易地成为一个程序构件。这里以Interacting management处理的精化为例，直观地，用户与软件交互按照目的划分，分为配置定位、配置地图、配置机器人、停止和启动四个方面，按照这种逻辑精化，得到第二层DFD。</li>
</ul>
<p><strong><em>DFD精化例子见Management.pdf</em></strong></p>
<h4 id="3-2-5-第二层DFD"><a href="#3-2-5-第二层DFD" class="headerlink" title="3.2.5 第二层DFD"></a>3.2.5 第二层DFD</h4><ul>
<li>进行DFD分解要注重每一个变换都要有相对高的内聚性，对每一个变换进行精化后的第二层DFD如下。</li>
</ul>
<p><strong><em>第二层DFD见Lowest-Level DFD.pdf</em></strong></p>
<h2 id="4-机器人软件的设计建模"><a href="#4-机器人软件的设计建模" class="headerlink" title="4-机器人软件的设计建模"></a>4-机器人软件的设计建模</h2><ul>
<li>基于并发构件的软件体系结构</li>
</ul>
<p><strong><em>使用像“软件系统的软件体系结构被设计成一个基于分布式构件的软件体系结构”的句式是否具有说服力？</em></strong></p>
<ul>
<li>在上一章中，已经使用面向流程的方法进行了需求分析，通过构建数据流图并进行精化，软件系统的每一个功能已经转化成DFD中的一个个变换和数据流动，接下来的设计建模过程，将基于需求分析模型设计软件体系结构，给出更多软件系统的表示信息，包括通信图，顺序图和状态图等。</li>
<li>本项目中， “机器人协作系统”被设计为一个基于并发构件的，分层控制的软件体系结构。<ul>
<li>本项目中，设计建模的第一步就是将分析模型（主要为DFD）精化映射为构件模型，接下来设计构件间通信消息及通信消息模式，给出更多UML图形表示。【这里的DFD相当于“COMET”方法中设计子系统之前的集成通信图】</li>
</ul>
</li>
</ul>
<h3 id="4-1-从数据流图到软件子系统的映射"><a href="#4-1-从数据流图到软件子系统的映射" class="headerlink" title="4.1 从数据流图到软件子系统的映射"></a>4.1 从数据流图到软件子系统的映射</h3><ul>
<li>在设计构件之前，需要先设计软件子系统，</li>
<li>在分析建模阶段，我们通过功能分解描绘了软件系统的逻辑模型，在设计建模阶段，我们将基于此设计“机器人协作软件系统”的各个子系统，设计目标是让每个子系统都能负责执行一个相对独立的功能。这样，当定义好子系统之间的接口之后，就可以独立进行各个子系统的设计了。</li>
</ul>
<h4 id="4-1-1-关注点分离"><a href="#4-1-1-关注点分离" class="headerlink" title="4.1.1 关注点分离"></a>4.1.1 关注点分离</h4><ul>
<li>在子系统设计时需要解决关注点分离问题，即让不同的子系统关注不同的关注点，目的是让子系统的独立性更好。根据文献[Gomaa. 2011]，考虑不同的子系统组织准则，可以将软件系统分解为客户端子系统，用户交互子系统，服务子系统，控制子系统，协调者子系统，输入/输出子系统等，这些子系统组织准则同样可以应用于构件设计。</li>
<li>下面简要介绍各种子系统的特点<ul>
<li>客户端子系统：一个客户端子系统是一个或多个服务的请求者。客户端子系统包括用户交互子系统，控制子系统和输入/输出子系统。</li>
<li>用户交互子系统：用户交互子系统提供用户接口，并且充当一个客户端/服务系统中的客户端角色，提供用户访问服务。</li>
<li>服务子系统：服务子系统为客户端子系统提供服务。服务子系统并不会发出任何请求，而是对来自客户端子系统的请求进行响应。</li>
<li>控制子系统：一个控制子系统控制系统中的一个特定部分。控制子系统接收来自外部环境的输入，产生面向外部环境的输出，其中通常没有人工干预。一个控制子系统通常是状态相关的。一个控制子系统可以从另一个给予其总体方向的子系统那里接收一些高层指令，然后持续地或者以按需的方式向其他结点提供低层控制或者发送状态信息。</li>
<li>协调者子系统：协调者子系统协调其他子系统的执行，例如控制子系统或服务子系统。所以协调者子系统相应地分成这两类：协调控制子系统的子系统和协调服务子系统的子系统。</li>
<li>输入/输出子系统：一个输入，输出或输入/输出子系统是一个代表其他子系统执行输入和/或输出操作的子系统，通常由一个或更多的设备接口对象组成，并且还可能包括提供本地化控制的控制对象和存储本地数据的实体对象。</li>
</ul>
</li>
<li>本文将根据以上原则将数据流图中的各个流程转换为独立的软件子系统，在下一小节进行控制模式的选择之后，添加相应的控制子系统。</li>
</ul>
<h3 id="4-1-2-层次化的控制模式"><a href="#4-1-2-层次化的控制模式" class="headerlink" title="4.1.2 层次化的控制模式"></a>4.1.2 层次化的控制模式</h3><ul>
<li>并发软件体系结构中的控制模式主要包括集中式，分布式和层次化控制体系结构<ul>
<li>集中式控制模式：集中式控制体系结构中只包含一个控制子系统。从概念上来说控制构件要执行一个状态图以总控全局并管理整个系统的行为顺序。</li>
<li>分布式控制模式：分布式控制体系结构中包含多个控制子系统。控制分布在各个控制模块中，控制模块通过点对点的通信实现重要事件的通知，也通过与集中式控制模式中类似的方式与外部环境交互。</li>
<li>层次化控制模式包含多个控制子系统，不过与分布式控制模式不同，存在一个协调者子系统，通过协调所有控制模块完成整个系统的控制。协调者提供高层控制，包括直接与各个控制模块进行通信并且决定各个控制模块的下一步动作，同时协调者也从控制模块中接收状态信息。</li>
</ul>
</li>
<li>由于本项目需要处理多个输入输出，且需要一定的扩展性，所以采用层次化控制模式。</li>
</ul>
<h4 id="4-1-3-初始软件子系统图"><a href="#4-1-3-初始软件子系统图" class="headerlink" title="4.1.3 初始软件子系统图"></a>4.1.3 初始软件子系统图</h4><ul>
<li>根据前两小节的子系统组织准则，将数据流图转映射为如下所示的软件子系统图，可以确定以下子系统：<ul>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
</ul>
<p><strong><em>初始软件子系统图见Components-1st-Refinement-final.pdf</em></strong><br><strong><em>最后不能用构件图来画这几张图</em></strong></p>
<p>*不难看出，这里得到的子系统图只是数据流图和控制构件的简单组合，“碎片化”严重，存在着多种子系统执行类似功能，以及控制构件控制单一构件的情况。在下一节基于构件的软件体系结构设计中，将针对这两种情况，对当前子系统图进行精化，生成构件图。</p>
<h3 id="4-2-基于并发构件的体系结构"><a href="#4-2-基于并发构件的体系结构" class="headerlink" title="4.2 基于并发构件的体系结构"></a>4.2 基于并发构件的体系结构</h3><ul>
<li>软件体系结构的设计，主要考虑系统的静态结构和动态结构。本节将基于前面生成的软件子系统图，生成静态的软件构件图即构件图，和动态的软件体系结构图即通信图。</li>
<li>软件体系结构的静态结构设计，通常都会应用得到广泛接受的基于构件的思想，本文也不例外。一个基于构件的软件体系结构由多个构件组成，其中每个构件相互独立且封装了信息，在外部暴露接口，通过接口与其他构件进行通信，所有与其他构件进行通信所需要的信息都包含在接口之中，并且接口与实现相分离。构件之间使用预先定义好的通信模式进行通信。良好设计的构件应能够在后续设计中得到复用。</li>
<li>由于本项目机器人协作系统涉及多个输入输出，所以需要开发一个并发的软件体系结构。这样在软件体系结构中，每一个构件都可以是并发的，进而可以是分布式的，软件构件可以部署到不同的物理结点上，这些特点可以极大增强软件体系结构的扩展性。</li>
<li>在本项目的基于构件的开发方法中，每一个子系统都被设计成一个分布式的独立构件。根据一定原则，多个构件可以组合得到复合构件。本文将对上节产生的子系统图进行精化，生成构件图，描述其静态结构（结构图）和动态结构（高层通信图）。</li>
</ul>
<h4 id="4-2-1-子系统图的精化——体系结构的静态视图"><a href="#4-2-1-子系统图的精化——体系结构的静态视图" class="headerlink" title="4.2.1 子系统图的精化——体系结构的静态视图"></a>4.2.1 子系统图的精化——体系结构的静态视图</h4><p><strong><em>复合构件的组织原则：地理位置一致，功能类似</em></strong></p>
<ul>
<li>上一节生成了作为初始软件体系结构的软件子系统图并提出了相应问题。这一节将针对这些问题对软件体系结构进行精化，生成最后的构件图。</li>
<li>针对前一种情况，应将执行类似功能的子系统合并，虽适当降低了内聚性，但使得构件组织结构更合理；针对后一种情况，只需把控制子系统省略掉即可。</li>
<li>具体的精化步骤如下：<ul>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
<li>最后生成的构件图如下</li>
</ul>
<p><strong><em>软件子系统图见Components-2nd-Refinement-final.pdf</em></strong></p>
<h4 id="4-2-2-高层通信图——体系结构的动态视图"><a href="#4-2-2-高层通信图——体系结构的动态视图" class="headerlink" title="4.2.2 高层通信图——体系结构的动态视图"></a>4.2.2 高层通信图——体系结构的动态视图</h4><ul>
<li>通信图是描述软件体系结构动态视图的主要方式，本节先简要介绍软件体系结构的主要通信模式，然后介绍本项目中构件与构件之间的通信方式，设计确定每条消息的名称和参数（接口规约）和精确语义。</li>
</ul>
<h5 id="4-2-2-1-体系结构通信模式"><a href="#4-2-2-1-体系结构通信模式" class="headerlink" title="4.2.2.1 体系结构通信模式"></a>4.2.2.1 体系结构通信模式</h5><ul>
<li>在从分析模型到设计模型的过渡中，最重要的决策之一就是与子系统之间需要哪种类型的消息通信，在分布式系统中，常见的消息通信模式如下：<ul>
<li>异步（松耦合）消息通信：通过异步消息通信模式，生产者构件发送一条消息给消费者构件并且不等待其回复，生产者会继续执行，因为它要么不需要一个回复，要么在收到回复之前还要执行一些其他的功能。消费者收到消息，如果消费者正在处理其他事情，那么该消息会进入等待队列。由于生产者和消费者构件是异步执行的，因此可以在生产者和消费者之间建立一个先进先出的消息队列。当消费者请求消息但消息却没有到达时，该消费者会被挂起，当消息到达后，消费者会被唤醒继续工作。在分布式的环境中，任何可能会提高灵活性的地方都可能使用异步消息通信模式。该方法也可以用在发送者不需要接受者进行回复的情况下。</li>
<li>带回复的同步（紧耦合）消息通信：在这种通信模式下，生产者向消费者发送消息并等待消费者的答复，如果有多个生产者向消费者发送消息请求，则在消费者端建立一个消息队列。</li>
<li>不带回复的同步（紧耦合）消息通信：在这种通信模式下，消息生产者向消息消费者发送消息，并等待消息被消费者接收。当消息到达时，消费者接收消息并释放生产者，随后生产者和消费者一起继续执行消息收发过程。如果没有消息到来，消费者会挂起。</li>
</ul>
</li>
</ul>
<h5 id="4-2-2-2-高层通信图设计"><a href="#4-2-2-2-高层通信图设计" class="headerlink" title="4.2.2.2 高层通信图设计"></a>4.2.2.2 高层通信图设计</h5><ul>
<li><p>在前面的分析模型中，已经通过数据流图展现了信息以及在软件模块之间流动的方向，也就基本确定了模块间消息的类型。如下：</p>
<ul>
<li>。。。<strong><em>此处写上软件设计中的消息类型</em></strong></li>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
<li><p>根据具体的项目需要，每条消息的接口规约如下：</p>
<ul>
<li>。。。</li>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
<li><p>最后的高层通信图如图所示。</p>
</li>
</ul>
<h4 id="4-2-3-构件间交互图——体系结构的动态视图"><a href="#4-2-3-构件间交互图——体系结构的动态视图" class="headerlink" title="4.2.3 构件间交互图——体系结构的动态视图"></a>4.2.3 构件间交互图——体系结构的动态视图</h4><p><strong><em>此处介绍各个用例的顺序图</em></strong></p>
<ul>
<li>。。。</li>
</ul>
<h3 id="4-3-软件构件部署"><a href="#4-3-软件构件部署" class="headerlink" title="4.3 软件构件部署"></a>4.3 软件构件部署</h3><ul>
<li>一个典型的系统的软件部署如图所示，每一个构件都被分配到一个特定的物理结点，结点之间通过互联网连接。具体情况如下：<ul>
<li>。。。</li>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
</ul>
<h2 id="5-软件构件的设计与实现"><a href="#5-软件构件的设计与实现" class="headerlink" title="5-软件构件的设计与实现"></a>5-软件构件的设计与实现</h2><ul>
<li>在体系结构设计完成之后，就开始进行构件级设计和编程实现，在本项目中，由于软件体系结构的分布式并发特性，我们创新性地使用LabVIEW开发平台及其多进程异步通信框架Actor Framework对机器人协作软件进行实现，在本节中，将先对LabVIEW开发平台及Actor编程模型做简单介绍，然后根据之前的设计模型进行进一步设计和详细编程实现，模型进一步设计包括构件模型映射为LabVIEW中的Actor编程模型，详细编程实现包括Actor实现及其各个通信模式的实现。</li>
</ul>
<h3 id="5-1-Actor编程模型的应用"><a href="#5-1-Actor编程模型的应用" class="headerlink" title="5.1 Actor编程模型的应用"></a>5.1 Actor编程模型的应用</h3><h4 id="5-1-1-LabVIEW-Actor-Framework"><a href="#5-1-1-LabVIEW-Actor-Framework" class="headerlink" title="5.1.1 LabVIEW Actor Framework"></a>5.1.1 LabVIEW Actor Framework</h4><ul>
<li>LabVIEW于1986年由美国国家仪器公司发布，是一个虚拟仪器开发环境，其本质用途是为硬件提供可视化和控制接口。LabVIEW拥有独特的G语言，这种特性同时提供了人机交互和源代码（Dr. Sumathi and Prof. Surekha, 2007），给开发者提供了巨大的便利，关于LabVIEW的使用，请参考文献（Bitter and Mohiuddin et al., 2006），下面介绍本文主要使用的LabVIEW Actor Framework，一个基于面向对象的程序模板，其实现了Actor编程模型，提供了多进程通信的框架。</li>
<li>Actor模型，于1973年被提出（Hewitt and Bishop et al., 1973），是一种并发运算上的模型，Actor是一种程序上的抽象概念，被视为并发运算的基本单元，当一个Actor接收到一则消息，它可以做出一些决策、创建更多的Actor、发送更多的消息、决定要如何回应接下来的消息。LabVIEW Actor Framework（操作者框架）是Actor模型在LabVIEW上的实现。操作者框架专为多进程程序设计，为了增强代码复用使用了面向对象编程，其模板提供了基本功能，包括创建操作者，创建消息，定义消息的响应函数，关于操作者框架的详细使用，请参考官方文档（。。。），本文接下来将对操作者框架进行概念性阐释，在下一节将对机器人协作系统软件进行映射。<strong><em>考虑是否引入1973年的Actor Model，只将LabVIEW Actor Framework阐述为一种编程框架</em></strong></li>
</ul>
<h5 id="5-1-1-1-操作者框架概述"><a href="#5-1-1-1-操作者框架概述" class="headerlink" title="5.1.1.1 操作者框架概述"></a>5.1.1.1 操作者框架概述</h5><ul>
<li>“操作者框架”由操作者和消息构成。消息在消息队列中传输。为减少出错和提高应用程序的可靠性，“操作者框架”限制了能够互相发送消息的操作者。</li>
<li>在这儿，我们利用LabVIEW自带示例项目进行解释，该示例项目包括三个操作者：顶层操作者，Alpha操作者和Beta操作者。</li>
</ul>
<h5 id="5-1-1-2-操作者及消息"><a href="#5-1-1-2-操作者及消息" class="headerlink" title="5.1.1.2 操作者及消息"></a>5.1.1.2 操作者及消息</h5><ul>
<li><p>操作者是LabVIEW类，代表某个任务的状态。所有操作者类均从LabVIEW中的“操作者”类继承。该类由三个主要部分构成：</p>
<ul>
<li>操作者的核心VI－核心VI是一个特定命名的方法（“操作者核心”），用来定义操作者的连续行为。该方法定义了所有操作者的消息处理行为。该类的子孙类重写方法以显示操作者的用户界面、添加并行循环和启动嵌套操作者。</li>
<li>操作者的特定方法－这些VI是LabVIEW类的成员VI，用于定义操作者。通常每个方法对应于操作者能够执行的一个任务。祖先类（“操作者”类）包含几个专门设计用于被子孙类重写的方法。</li>
<li>操作者的消息－消息是一个LabVIEW类，定义了操作者能够接收的指令和作出响应的方式。其他操作者将这些消息发送至一个操作者，以便让操作者调用其中的一个方法。在“操作者框架”基础上创建应用程序时，通常需要为操作者的每个方法定义一个消息。所有消息均从LabVIEW中的“消息”类继承。</li>
</ul>
</li>
<li><p>例如，下图显示的项目库包含一个操作者Alpha（Alpha类）和一个消息(Alpha任务消息类)。</p>
</li>
<li><p>下面介绍各个文件：</p>
<ul>
<li>操作者的核心VI是操作者核心。该方法重写其祖先的“操作者核心”方法，定义了Alpha操作者特有的连续行为。</li>
<li>操作者的方法是停止核心和任务。这些方法在下列条件下执行：</li>
<li>停止核心在Alpha操作者收到“停止”消息时执行。该方法重写“操作者”类的“停止核心”方法，用于定义Alpha操作者特有的行为。</li>
<li>任务在Alpha操作者收到“任务”消息时执行。该方法为Alpha操作者特有，即“操作者”类中未定义该方法。</li>
<li>操作者的消息包含在Alpha的消息文件夹中。该操作者仅定义一个消息，即Alpha任务消息，该消息从“消息”类继承，包含下列文件：</li>
<li>Alpha任务消息控件是该消息携带的数据。</li>
<li>发送Alpha任务是其他操作者用来发送“任务”消息至Alpha操作者的VI。该VI将创建消息的一个实例并用一些数据填充消息。</li>
<li>执行定义了Alpha收到“任务”消息时执行的动作。本模板中，“执行”VI命令Alpha执行其“任务”方法。</li>
</ul>
</li>
<li><p>示例项目类间关系图如下所示（需要加上Msg类的表示，需要重新制UML图）</p>
</li>
</ul>
<h5 id="5-1-1-3-操作者之间的通信"><a href="#5-1-1-3-操作者之间的通信" class="headerlink" title="5.1.1.3 操作者之间的通信"></a>5.1.1.3 操作者之间的通信</h5><ul>
<li><p>在通用Actor Model中，一个Actor能够与任一Actor进行消息通信，但在LabVIEW Actor Framework中，为了减少通信错误，默认情况下，一个操作者只能将消息发送至两种操作者：</p>
<ul>
<li>调用方-启动X的VI（可能是一个操作者）</li>
<li>嵌套操作者－X启动的任何操作者</li>
</ul>
</li>
<li><p>这种被限制的通信顺序称为任务树。这样的优势在于，只有一个通信路径需要管理，因此可以确保某操作在关闭之前其他操作者有机会接收其消息并作出响应。</p>
</li>
<li><p>本模板所定义的任务树如下</p>
</li>
<li><p>该图表明应用程序操作者同时启动Alpha和Beta操作者。因此，应用程序操作者称为顶层操作者，顶层操作者启动所有其他操作者。顶层操作者从一个正常VI启动。</p>
</li>
<li>在该任务树中，下列通信规则有效：<ul>
<li>应用程序可将消息发送至Alpha和Beta</li>
<li>Alpha仅能将消息发送至应用程序</li>
<li>Beta仅能将消息发送至应用程序</li>
</ul>
</li>
<li>这说明Alpha和Beta无法将消息发送至对方。Alpha必须发送一个消息至应用程序，确定Beta是否需要接收该消息并采取相应的动作。同样，限制通信路径有助于写入更多易于管理和正确无误的代码。</li>
<li><p>消息通过队列发送，每一个操作者维护一个自己的队列，下图显示了两个操作者如何进行通信：</p>
</li>
<li><p>如图所示，X能够将消息发送至自身(1)和Y (2)。Y能够将消息发送至X (3)和自身(4)。尽管有四个消息可进入的方向，但只包含了两个队列。此外，两个操作者都无法释放对方的队列。相反，每个操作者释放自身的队列，作为其关闭程序的一部分。</p>
</li>
</ul>
<h4 id="5-1-2-本项目Actor结构"><a href="#5-1-2-本项目Actor结构" class="headerlink" title="5.1.2 本项目Actor结构"></a>5.1.2 本项目Actor结构</h4><ul>
<li><p>由于Actor编程模型天然的并发和模块化特性，使得机器人协作系统软件体系结构能够非常容易地转化为LabVIEW中的Actor图，其中：</p>
<ul>
<li>。。。</li>
<li>。。。</li>
<li>。。。</li>
</ul>
</li>
<li><p>软件实现的Actor任务树如图所示（这张图要改，风格不对）</p>
</li>
</ul>
<p><strong><em>Actor结构图见Components-3rd-Refinement-final.pdf</em></strong></p>
<ul>
<li>最后的类图如下图所示（包括操作者类和消息类，作为两张图）<strong><em>这两张图要放在构件设计中</em></strong></li>
</ul>
<h3 id="5-2-基于构件的开发——构件选择与复用"><a href="#5-2-基于构件的开发——构件选择与复用" class="headerlink" title="5.2 基于构件的开发——构件选择与复用"></a>5.2 基于构件的开发——构件选择与复用</h3><ul>
<li>基于构件的软件工程（CBSE）强调使用可复用的软件构件来设计和构造软件系统。一方面，我们从一些标准构件库购买构件，对构件进行适应性修改后即可进行组装，另一方面，我们也需要开发新的软件构件，不过需要进行领域分析，按照标准数据结构和接口协议进行设计。本项目软件实现过程充分采用了这种思想，借助LabVIEW自带的丰富构件库进行开发，同时自己也开发出部分构件作后续使用。（component based development）</li>
</ul>
<h4 id="5-2-1-LabVIEW-Tools-Network介绍和构件清单"><a href="#5-2-1-LabVIEW-Tools-Network介绍和构件清单" class="headerlink" title="5.2.1 LabVIEW Tools Network介绍和构件清单"></a>5.2.1 LabVIEW Tools Network介绍和构件清单</h4><ul>
<li><p>LabVIEW工具网络，被称为工程师的APP商店，提供了经认证的第三方附加组件，以帮助用户扩展LabVIEW系统设计软件功能，提高开发人员的效率。这些由第三方提供的软件组件主要包括以下几类：</p>
<ul>
<li>LabVIEW 插件：包括应用程序接口，代码模板，自定义控件，小工具，示例代码等</li>
<li>应用程序：LabVIEW环境之外的独立产品</li>
</ul>
</li>
<li><p>LabVIEW工具网络所提供的组件大多可免费使用（如使用BSD许可协议），在VI Package Manager中进行搜索下载安装即可。</p>
</li>
<li>下图所示为VI Package Manager及本项目软件所使用的一个组件，XBox手柄控制器的工具介绍页面，下一节将使用这一标准组件，进行适应性修改后制作出本项目需要的手柄操作者。</li>
</ul>
<h4 id="5-2-2-构件修改及组装举例——手柄操作者的构建"><a href="#5-2-2-构件修改及组装举例——手柄操作者的构建" class="headerlink" title="5.2.2 构件修改及组装举例——手柄操作者的构建"></a>5.2.2 构件修改及组装举例——手柄操作者的构建</h4><h5 id="5-2-2-1-手柄操作者功能与通信分析"><a href="#5-2-2-1-手柄操作者功能与通信分析" class="headerlink" title="5.2.2.1 手柄操作者功能与通信分析"></a>5.2.2.1 手柄操作者功能与通信分析</h5><h5 id="5-2-2-2-核心函数编写"><a href="#5-2-2-2-核心函数编写" class="headerlink" title="5.2.2.2 核心函数编写"></a>5.2.2.2 核心函数编写</h5><h5 id="5-2-2-3-消息函数编写"><a href="#5-2-2-3-消息函数编写" class="headerlink" title="5.2.2.3 消息函数编写"></a>5.2.2.3 消息函数编写</h5><h3 id="5-3-构件设计"><a href="#5-3-构件设计" class="headerlink" title="5.3 构件设计"></a>5.3 构件设计</h3><h4 id="5-3-1-构件设计举例-协调者构件应用状态设计模式"><a href="#5-3-1-构件设计举例-协调者构件应用状态设计模式" class="headerlink" title="5.3.1 构件设计举例-协调者构件应用状态设计模式"></a>5.3.1 构件设计举例-协调者构件应用状态设计模式</h4><h4 id="5-3-2-协调者操作者功能与通信分析"><a href="#5-3-2-协调者操作者功能与通信分析" class="headerlink" title="5.3.2 协调者操作者功能与通信分析"></a>5.3.2 协调者操作者功能与通信分析</h4><h4 id="5-3-3-核心函数编写"><a href="#5-3-3-核心函数编写" class="headerlink" title="5.3.3 核心函数编写"></a>5.3.3 核心函数编写</h4><h4 id="5-3-4-消息函数编写"><a href="#5-3-4-消息函数编写" class="headerlink" title="5.3.4 消息函数编写"></a>5.3.4 消息函数编写</h4><h4 id="5-3-5"><a href="#5-3-5" class="headerlink" title="5.3.5"></a>5.3.5</h4><h3 id="5-4-基于LabVIEW的构件（任务）间通信模式的实现"><a href="#5-4-基于LabVIEW的构件（任务）间通信模式的实现" class="headerlink" title="5.4 基于LabVIEW的构件（任务）间通信模式的实现"></a>5.4 基于LabVIEW的构件（任务）间通信模式的实现</h3><p><strong><em>除了操作者相关的都移动到前面去</em></strong></p>
<h4 id="5-4-1-消息队列——操作者框架提供的若干模式"><a href="#5-4-1-消息队列——操作者框架提供的若干模式" class="headerlink" title="5.4.1 消息队列——操作者框架提供的若干模式"></a>5.4.1 消息队列——操作者框架提供的若干模式</h4><h4 id="5-4-2-信号（在LabVIEW中的实现）"><a href="#5-4-2-信号（在LabVIEW中的实现）" class="headerlink" title="5.4.2 信号（在LabVIEW中的实现）"></a>5.4.2 信号（在LabVIEW中的实现）</h4><h4 id="5-4-3-共享变量"><a href="#5-4-3-共享变量" class="headerlink" title="5.4.3 共享变量"></a>5.4.3 共享变量</h4><h4 id="5-4-4-Socket"><a href="#5-4-4-Socket" class="headerlink" title="5.4.4 Socket"></a>5.4.4 Socket</h4><h2 id="6-结论与展望"><a href="#6-结论与展望" class="headerlink" title="6-结论与展望"></a>6-结论与展望</h2><h3 id="6-1-结论"><a href="#6-1-结论" class="headerlink" title="6.1-结论"></a>6.1-结论</h3><h3 id="6-2-未来工作——一个参考模型（功能扩展-分布式部署）"><a href="#6-2-未来工作——一个参考模型（功能扩展-分布式部署）" class="headerlink" title="6.2-未来工作——一个参考模型（功能扩展+分布式部署）"></a>6.2-未来工作——一个参考模型（功能扩展+分布式部署）</h3><h2 id="附录A-ROS系统软件开发概述"><a href="#附录A-ROS系统软件开发概述" class="headerlink" title="附录A-ROS系统软件开发概述"></a>附录A-ROS系统软件开发概述</h2><h3 id="A-1"><a href="#A-1" class="headerlink" title="A.1"></a>A.1</h3><h3 id="A-2"><a href="#A-2" class="headerlink" title="A.2"></a>A.2</h3><h3 id="A-3"><a href="#A-3" class="headerlink" title="A.3"></a>A.3</h3><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol>
<li>Murphy R. Introduction to AI Robotics[M]. MIT Press, 2000.</li>
<li>Gomaa H. Software Modeling and Design: UML, Use Cases, Patterns, and Software Architectures[M]. Cambridge University Press, 2011.</li>
<li>Pressman R S. Software Engineering: A Practioner’s Approach[M]. 7 ed. McGraw-Hill Companies, Inc, 2005.</li>
<li>Andrade H A, Kovner S. Software synthesis from dataflow models for G and LabVIEW/sup TM[C]. IEEE, 1998.</li>
<li>Bitter R, Mohiuddin T, Nawrocki M. LabView: Advanced Programming Techniques, Second Edition[M]. CRC Press, 2006.</li>
<li>LabVIEW Graphical Development Platform Part I – An Open Platform for Long-Term Continuity[EB/OL]. National Instruments Corporation. 2005.</li>
<li>Będkowski J. Mobile Robots - Control Architectures, Bio-Interfacing, Navigation, Multi Robot Motion Planning and Operator Training[M]. InTech, 2011: 402.</li>
<li>陈树学，刘萱. LabVIEW宝典[M]. 北京: 电子工业出版社, 2011.</li>
<li>徐坤. 搜救机器人人机协作行为控制研究[D]. 山东大学, 2009.</li>
<li>王挺，王越超. 人机系统在移动机器人平台的应用[J]. 机器人. 2004(06): 553-557.</li>
<li>黄志华，屠大维，赵其杰. 基于人机交互的移动服务机器人导航系统[J]. 机器人. 2009(03): 248-253.</li>
<li>Goodrich M A, Schultz A C. Human-robot interaction: a survey[J]. Found. Trends Hum.-Comput. Interact. 2007, 1(3): 203-275.</li>
<li>Wei X, Jiachen M, Mingli Y. Research on Building Mechanism of System for Intelligent Service Mobile Robot[M]. MOBILE ROBOTS – CONTROL ARCHITECTURES, BIO-INTERFACING, NAVIGATION, MULTI ROBOT MOTION PLANNING AND OPERATOR TRAINING, INTECTWEB.ORG, 2011.</li>
<li>Jones J L, Roth D. Robot programming : a practical guide to behavior-based robotics[M]. McGraw-Hill, 2004: 293.</li>
<li>Pfeifer R, Iida F, Bongard J. New robotics: Design principles for intelligent systems[J]. Artificial life. 2005, 11(1-2): 99-120.</li>
<li>Bischoff R, Guhl T, Prassler E, et al. BRICS-Best practice in robotics[C]. VDE, 2010.</li>
<li>Jang C, Lee S, Jung S, et al. OPRoS: A new component-based robot software platform[J]. ETRI journal. 2010, 32(5): 646-656.</li>
<li>Domínguez-Brito A C, Santana-Jorge F J, Santana-De-La-Fe S, et al. CoolBOT: An Open Source Distributed Component Based Programming Framework for Robotics[C]. Springer, 2011.</li>
<li>Mallet A, Pasteur C, Herrb M, et al. GenoM3: Building middleware-independent robotic components[C]. IEEE, 2010.</li>
<li>Reichardt M, Föhst T, Berns K. Introducing finroc: A convenient real-time framework for robotics based on a systematic design approach[J]. Robotics Research Lab, Department of Computer Science, University of Kaiserslautern, Kaiserslautern, Germany, Technical Report. 2012.</li>
<li>Brugali D, Scandurra P. Component-based robotic engineering (part i)[tutorial][J]. IEEE Robotics &amp; Automation Magazine. 2009, 16(4): 84-96.</li>
<li>Brugali D, Shakhimardanov A. Component-based robotic engineering (part ii)[J]. IEEE Robotics &amp; Automation Magazine. 2010, 17(1): 100-112.</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;0-摘要&quot;&gt;&lt;a href=&quot;#0-摘要&quot; class=&quot;headerlink&quot; title=&quot;0 摘要&quot;&gt;&lt;/a&gt;0 摘要&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;（第一章）探讨和综述了机器人系统设计中的复用，包括设计方法级别复用（各种设计方法和原则）和体系结构级别复用（传统的智能组织到基于组件机器人工程）。介绍基于组件机器人工程（软总线技术CORBA和组件库技术）&lt;/li&gt;
&lt;li&gt;（第一章）介绍机器人系统设计中的一个重要模块，人机协作系统。&lt;/li&gt;
&lt;li&gt;（第二章）基础知识。&lt;/li&gt;
&lt;li&gt;（第三，四章）基于功能分析和UML模型对机器人协作系统软件进行建模和设计&lt;/li&gt;
&lt;li&gt;（第五章）基于LabVIEW对软件进行实现&lt;/li&gt;
&lt;li&gt;（第六章）针对当前软件的扩展性，提出一种软件设计参考模型。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>【整机】安装显卡驱动.md</title>
    <link href="https://ZhenshengLee.github.io/2016/09/04/160904-%E5%AE%89%E8%A3%85%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8-md/"/>
    <id>https://ZhenshengLee.github.io/2016/09/04/160904-安装显卡驱动-md/</id>
    <published>2016-09-03T16:48:57.000Z</published>
    <updated>2016-09-03T16:51:49.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li>老板办公室来了台Linux主机，给自己的移动硬盘系统装下驱动，以后好好用</li>
</ul>
<a id="more"></a>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><h4 id="禁用和卸载"><a href="#禁用和卸载" class="headerlink" title="禁用和卸载"></a>禁用和卸载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo subl /etc/modprobe.d/blacklist.conf</span><br><span class="line"></span><br><span class="line">(尾部添加)</span><br><span class="line"></span><br><span class="line">blacklist vga16fb</span><br><span class="line"></span><br><span class="line">blacklist nouveau</span><br><span class="line"></span><br><span class="line">blacklist rivafb</span><br><span class="line"></span><br><span class="line">blacklist nvidiafb</span><br><span class="line"></span><br><span class="line">blacklist rivatv</span><br><span class="line"></span><br><span class="line">(空行)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：code 对 sudo 的支持不好</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo apt-get --purge remove nvidia-*</span><br><span class="line"></span><br><span class="line">sudo apt-get --purge remove xserver-xorg-video-nouveau-lts-vivid</span><br></pre></td></tr></table></figure>
<h3 id="重启电脑到命令行界面"><a href="#重启电脑到命令行界面" class="headerlink" title="重启电脑到命令行界面"></a>重启电脑到命令行界面</h3><ul>
<li>关闭图形化界面</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo server lightdm stop</span><br><span class="line"></span><br><span class="line">* 运行驱动程序即可</span><br><span class="line"></span><br><span class="line">``` shell</span><br><span class="line"></span><br><span class="line">sudo sh ./Download/...run</span><br></pre></td></tr></table></figure>
<ul>
<li>重启服务</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo server lightdm start</span><br></pre></td></tr></table></figure>
<h3 id="重启电脑，完毕"><a href="#重启电脑，完毕" class="headerlink" title="重启电脑，完毕"></a>重启电脑，完毕</h3>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;老板办公室来了台Linux主机，给自己的移动硬盘系统装下驱动，以后好好用&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="其他" scheme="https://ZhenshengLee.github.io/tags/%E5%85%B6%E4%BB%96/"/>
    
  </entry>
  
  <entry>
    <title>【组件】ompl-open motion planning library1-基础理论</title>
    <link href="https://ZhenshengLee.github.io/2016/09/03/160903-ompl1/"/>
    <id>https://ZhenshengLee.github.io/2016/09/03/160903-ompl1/</id>
    <published>2016-09-03T07:49:33.000Z</published>
    <updated>2016-09-03T08:35:36.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li><p>open motion plan library，一个开源的运动规划库，主要以sample-based planning算法为主</p>
</li>
<li><p>包括两个核心组件，OMPL，算法库，和OMPL.app，前端用户界面</p>
</li>
</ul>
<a id="more"></a>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>[TOC]</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="http://ompl.kavrakilab.org/" target="_blank" rel="external">ompl home page</a></p>
<p><a href="http://ompl.kavrakilab.org/group__demos.html" target="_blank" rel="external">demos</a></p>
<p><a href="http://ompl.kavrakilab.org/tutorials.html" target="_blank" rel="external">tutorials</a></p>
<p><a href="http://ompl.kavrakilab.org/gallery.html" target="_blank" rel="external">作品展示</a></p>
<p><a href="http://ompl.kavrakilab.org/buildSystem.html" target="_blank" rel="external">intergrated with your build system</a><br><a href="http://planning.cs.uiuc.edu/" target="_blank" rel="external">Planning algorithms.pdf</a></p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo apt-get install libompl-dev ompl-demos</span><br></pre></td></tr></table></figure>
<h3 id="运行demo"><a href="#运行demo" class="headerlink" title="运行demo"></a>运行demo</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(ompl_beginner)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span>(CMAKE_CXX_FLAGS <span class="string">"-std=c++11"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_MODULE_PATH <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/cmake)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># find packages</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(OMPL)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># include dirs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line"></span><br><span class="line">        <span class="variable">$&#123;OMPL_INCLUDE_DIRS&#125;</span> )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(RigidBodyPlanning src/RigidBodyPlanning.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(RigidBodyPlanning <span class="variable">$&#123;OMPL_LIBRARIES&#125;</span> )</span><br></pre></td></tr></table></figure>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h3><ul>
<li><p>ompl包括sample-based 运动规划器，以及构建新规划器的工具集合，用户还可以使用前段工具ompl.app。</p>
</li>
<li><p>熟练使用后，用户能够使用这个框架开发自己的规划算法功能，如sate sampling, collision, nearest neighbor searching.</p>
</li>
</ul>
<h3 id="Sampling-based-Motion-Planning"><a href="#Sampling-based-Motion-Planning" class="headerlink" title="Sampling-based Motion Planning"></a>Sampling-based Motion Planning</h3><ul>
<li><p>机器人运动规划的目的在于：“从起点位姿到终点位姿，并且满足所有外部和内部约束”，当机器人拥有较多的自由度时，解算将变得很困难。</p>
</li>
<li><p>以经典的运动规划问题移动钢琴为例，在这个问题中，钢琴有六个自由度（x, y, z, roll, pitch, yaw），为了解算这个问题，我们必须计算出一个包含钢琴六个参数的数据集合，该数据集合被时间参数化，并且各个参数对于时间的改变应该是连续的。（从一个配置空间（starting configuration）移动到另一个配置空间（goal configuration），同时要满足避障的内，外部约束条件），这个问题已经被证明是一个<a href="https://en.wikipedia.org/wiki/PSPACE-complete" target="_blank" rel="external">PSPACE-hard</a>  问题，解算非常困难。</p>
</li>
</ul>
<h3 id="规划理论的历史进程"><a href="#规划理论的历史进程" class="headerlink" title="规划理论的历史进程"></a>规划理论的历史进程</h3><ul>
<li>精确的和近似的地图单元分解（graph-search）（代表：A*算法）</li>
</ul>
<p>在某些例子中，可以将机器人的工作空间根据有无障碍分解成离散的栅格，这些分解可以建模为一个图(roadmap or graph)。根据这个图，问题变成：将一个点（机器人抽象而来）从一个栅格（包含起点）移动到另外一个栅格（包含终点）。这种规划的问题在于，当机器人拥有非线性动力学特性时（机器人不知道如何从一个栅格移动到另一个栅格，比如汽车，先锋机器人由于可以原地旋转，则不存在这个问题），路径规划是失败的。而且，更多的时候，状态空间是多维的，尤其是机器人运动内部有约束时，比如汽车（汽车有很多弯就拐不过去）。再次，状态空间分解空间复杂度非常大。</p>
<ul>
<li>基于控制的方法（控制的典型特征是反馈环节feedback loop）</li>
</ul>
<p>基于控制的方法尝试对系统进行建模，使用控制理论让系统沿着具体轨迹移动。这种方法在连续空间工作，并且拥有反馈环。基于控制的方法的优点是非常快速，可以在线规划。缺点是在复杂环境下不能够很好地计算期望的可行解。（关节空间规划，笛卡尔空间规划，直线插补，圆弧插补，样条曲线插补）</p>
<ul>
<li>人工势场法</li>
</ul>
<p>典型的人工势场法在工作空间的每个点计算一个函数，计算出的值作为这一点的斥力（或吸引力）。将机器人抽象为一个点，在势场图中沿梯度下降方向到目标点。优点是，可以考虑机器人上的多个点的动作，而且实时性好。缺点是，容易在梯度下降过程中陷入局部极小值。而且，理论上人工势场函数可以在任意维数的状态配置空间构造，这样就和解决原始问题一样了（Ideally the field would be constructed in the state space of the system, but this is equivalent to solving the original problem）。有一些简化方法使用了导航函数，保证人工势场拥有全局最小值。</p>
<ul>
<li>随机/概率规划方法</li>
</ul>
<p>这种方法被证明非常有用。在人工势场中添加布朗运动可以有效跳出局部极小区域。</p>
<p>另外，基于采样的规划方法，使用了随机化，采样和概率的方法，在高自由度系统或复杂动力学场景中非常有效。ompl即是这样的一种库，而且部署在ROS和moveIt!中。</p>
<h3 id="基于采样的运动规划"><a href="#基于采样的运动规划" class="headerlink" title="基于采样的运动规划"></a>基于采样的运动规划</h3><ul>
<li>基于采样的规划通过在机器人的状态空间中采样，来快速和有效的回应规划请求，特别是在复杂的约束和系统下尤其好用。传统方法往往空间和时间复杂度都非常大，在高维空间中往往没有什么用处。基于采样的方法在配置空间中搜索可行的状态点，并且继续通过采样连接这些状态点。这样可以产生足够灵活的可行解，并且是概率完全的，概率完全意味着，如果解存在，那么随着采样次数逐渐增大，可行解一定可以找到。不过，基于采样的方法无法确认一个问题不存在解。</li>
</ul>
<h4 id="一些定义"><a href="#一些定义" class="headerlink" title="一些定义"></a>一些定义</h4><ul>
<li><p>工作空间：机器人操作的物理空间，工作空间的边界被认为是障碍</p>
</li>
<li><p>状态空间：机器人的参数空间。参数空间包括所有的机器人在工作空间中的状态配置，状态空间中的一个点就是一个状态，注意状态空间可能是多维的</p>
</li>
<li><p>自由状态空间：状态空间的一个子集，在这个子集中的每个状态都是无障碍的</p>
</li>
<li><p>路径：状态空间中的连续状态点。如果路径中的每个点都是无障碍的，那么这个路径也是无障碍的。</p>
</li>
</ul>
<p>所以，基于采样的规划方法的目标是：在状态空间中找到一个无障碍的路径。接下来介绍两种主要的基于采样的规划器。</p>
<h4 id="概率地图（PRM）"><a href="#概率地图（PRM）" class="headerlink" title="概率地图（PRM）"></a>概率地图（PRM）</h4><ul>
<li><p>PRM是第一个基于采样的规划器，这种方法使用在状态空间中随机采样的方法构建roadmap，这种roadmap很像城市街区地图。</p>
</li>
<li><p>均匀采样，并连接起来，构造成roadmap，存储在图数据结构中。</p>
<ul>
<li><p>需要注意的是：状态空间从来都不是显式定义的，所以必须要有障碍检测模块，每一次采样都要进行check，只有经过检查的才能够保留下来</p>
</li>
<li><p>有很多不同的采样的方法，改进采样策略往往很有用</p>
</li>
</ul>
</li>
<li><p>一旦采样达到一定的数量，就开始构造边，标准RPM会对每一个采样点，搜索周围K临近点（在之前的采样点中找），使用局部规划器找到最短无障碍路径，局部规划器直接在这些采样点间进行插值（如直线差补），然后在这条直线中以一定的分辨率进行障碍检测，如果没有障碍点，那么这个边就作为合格边加入到roadmap中。</p>
</li>
<li><p>一旦roadmap构造完全，那么规划就成为连接起点和目标点的roadmap。</p>
</li>
<li><p>然后对这个roadmap进行图搜索，执行最短路径搜索</p>
</li>
</ul>
<h4 id="基于树的地图（RRT，快速随机树搜索）"><a href="#基于树的地图（RRT，快速随机树搜索）" class="headerlink" title="基于树的地图（RRT，快速随机树搜索）"></a>基于树的地图（RRT，快速随机树搜索）</h4><ul>
<li><p>现有的很多基于采样的规划器在自由状态空间中构造了树型结构，这种树形结构与上节讲的PRM很像，PRM的图带有环，这里的是树而已。由于基于树的规划器太多（RRT，EST，SBL，KPIECE），这里就不详细讲某一个，而是讲一讲大致的框架。</p>
</li>
<li><p>将机器人的起点当做一个树根，随机采样的点作为这个树的一个节点，树采用一种启发式扩张方法，这种启发式搜索条件往往就命名了这个方法，如果一个节点与树之间有无障碍路径，则将这个节点并入到树中。</p>
</li>
<li><p>尽管采样过程可能永远也不会采样到达机器人的目标状态，规划器往往都会设置有偏（bias）的扩张搜索，一旦将目标状态点并如到树中，路径规划就结束了。</p>
</li>
</ul>
<h4 id="PRM和RRT的不同"><a href="#PRM和RRT的不同" class="headerlink" title="PRM和RRT的不同"></a>PRM和RRT的不同</h4><ul>
<li><p>PRM需要构造覆盖全部状态空间的一个图，然后再连接起点和终点，而RRT不需要，只是逐渐的扩张树，直到终点。</p>
</li>
<li><p>所以，RRT特别适合于一次请求的规划，因为它构造的树并不包含其他目标点的信息，就算要求其到另外一个点，它也要重新进行树的扩张和生长。而PRM只需要构造一次即可。</p>
</li>
<li><p>Controls are usually directed commands, and require a specific pre-condition in order for</p>
</li>
</ul>
<p>a particular control to be valid. Tree-based methods, on the other hand, excel at planning with</p>
<p>complex dynamics because of the directed, acyclic nature of the underlying data structure. Control</p>
<p>information can be encoded for each edge of the tree, with the vertices of the tree satisfying the</p>
<p>prerequisites for the valid controls.（没看懂）</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li><p>基于采样的规划方法所需内存更少</p>
<ul>
<li><p>因为其不需要对状态空间进行显式表示</p>
</li>
<li><p>树和图等的数据结构保障了查找的效率和质量</p>
</li>
</ul>
</li>
</ul>
<h3 id="基于采样的规划的基本组成"><a href="#基于采样的规划的基本组成" class="headerlink" title="基于采样的规划的基本组成"></a>基于采样的规划的基本组成</h3><ul>
<li>基于采样的规划特别适合在高维空间和复杂动力学环境下的路径规划，有很多中不同的规划器及其附件，但是核心是：在一次采样中，发生了什么？</li>
</ul>
<h4 id="障碍检测"><a href="#障碍检测" class="headerlink" title="障碍检测"></a>障碍检测</h4><ul>
<li><p>障碍检测非常有用。局部规划器在寻找无障碍路径时会用到（见PRM），在采样过程中也会用到。在复杂的高维系统中，显式表示状态空间会很难，但是规划器去不用去可以构造它，因为障碍检测执行了这一功能，如果没有障碍，则这个状态配置是合法的。</p>
<ul>
<li>（这里“障碍”应该是广义的，不仅应该是物理障碍，还应该包括机器人在现有动力学约束下无法到达的状态区域）</li>
</ul>
</li>
</ul>
<h4 id="最临近搜索"><a href="#最临近搜索" class="headerlink" title="最临近搜索"></a>最临近搜索</h4><ul>
<li><p>前面已经提到，规划算法需要找出离当前状态最近的一个状态，寻找无障碍路径。当需要判断机器人的两个状态的距离时就要用到这个方法。</p>
<ul>
<li>但是，在高维空间中，欧式距离已经不能很好地计算。K-d树数据结构提供了一种方法。</li>
</ul>
</li>
</ul>
<h4 id="OMPL"><a href="#OMPL" class="headerlink" title="OMPL"></a>OMPL</h4><ul>
<li>OMPL核心算法库将这些都实现了！</li>
</ul>
<h2 id="下期预告"><a href="#下期预告" class="headerlink" title="下期预告"></a>下期预告</h2><ul>
<li>使用ompl.app</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;open motion plan library，一个开源的运动规划库，主要以sample-based planning算法为主&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;包括两个核心组件，OMPL，算法库，和OMPL.app，前端用户界面&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>【ROS实战】机器人抓取仿真1-安装与构造</title>
    <link href="https://ZhenshengLee.github.io/2016/09/02/160902-%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%8A%93%E5%8F%96%E4%BB%BF%E7%9C%9F1/"/>
    <id>https://ZhenshengLee.github.io/2016/09/02/160902-机器人抓取仿真1/</id>
    <published>2016-09-02T09:15:33.000Z</published>
    <updated>2016-09-02T09:23:47.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>机器人抓取操作仿真实战，使用nasa_r2机器人模型和gazebo7机器人仿真器</li>
</ul>
<a id="more"></a>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>[TOC]</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="http://answers.ros.org/question/188982/message-headers-wont-build-first/" target="_blank" rel="external">catkin msg header generation issue</a></p>
<p><a href="https://bitbucket.org/nasa_ros_pkg/" target="_blank" rel="external">nasa_ros_pkg</a></p>
</blockquote>
<h2 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><ul>
<li><p>下载nasa_r2_simulator-ingigo.zip, nasa_r2_common-hydro.zip, nasa_common_rosdep-master.zip, nasa_ros_pkg-deprecated_nasa_r2_common-xxx.zip</p>
</li>
<li><p>解压前三个文件夹</p>
</li>
<li><p>从nasa_ros_pkg-deprecated_nasa_r2_common-xxx.zip中复制nasa_r2_common_msgs到/masa_r2_common中</p>
</li>
</ul>
<h2 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h2><h3 id="修改包nasa-r2-common-msgs构造描述文件"><a href="#修改包nasa-r2-common-msgs构造描述文件" class="headerlink" title="修改包nasa_r2_common_msgs构造描述文件"></a>修改包nasa_r2_common_msgs构造描述文件</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(nasa_r2_common_msgs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS message_generation message_runtime std_msgs visualization_msgs geometry_msgs</span><br><span class="line"></span><br><span class="line">	trajectory_msgs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate messages in the 'msg' folder</span></span><br><span class="line"></span><br><span class="line">add_message_files(</span><br><span class="line"></span><br><span class="line">  FILES</span><br><span class="line"></span><br><span class="line">  Gains.msg</span><br><span class="line"></span><br><span class="line">  JointControl.msg</span><br><span class="line"></span><br><span class="line">  JointStatusArray.msg</span><br><span class="line"></span><br><span class="line">  JointStatus.msg</span><br><span class="line"></span><br><span class="line">  PDMCStatus.msg</span><br><span class="line"></span><br><span class="line">  PoseCommandArray.msg</span><br><span class="line"></span><br><span class="line">  PoseCommand.msg</span><br><span class="line"></span><br><span class="line">  PoseCommandParams.msg</span><br><span class="line"></span><br><span class="line">  PoseCommandStatus.msg</span><br><span class="line"></span><br><span class="line">  PoseTwistStamped.msg</span><br><span class="line"></span><br><span class="line">  TorsoStatus.msg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  	JointCommand.msg</span><br><span class="line"></span><br><span class="line">	LabeledGripperPositionCommand.msg</span><br><span class="line"></span><br><span class="line">	TorsoStatus.msg</span><br><span class="line"></span><br><span class="line">	JointControlCalibrationMode.msg</span><br><span class="line"></span><br><span class="line">	PDMCStatus.msg</span><br><span class="line"></span><br><span class="line">	ForceControlAxisArray.msg</span><br><span class="line"></span><br><span class="line">	ControllerJointSettings.msg</span><br><span class="line"></span><br><span class="line">	ValueType.msg</span><br><span class="line"></span><br><span class="line">	TrajectoryMonitorFactors.msg</span><br><span class="line"></span><br><span class="line">	PoseTrajectoryReplan.msg</span><br><span class="line"></span><br><span class="line">	Parameter.msg</span><br><span class="line"></span><br><span class="line">	PoseCommandParams.msg</span><br><span class="line"></span><br><span class="line">	PoseState.msg</span><br><span class="line"></span><br><span class="line">	PoseTwistStamped.msg</span><br><span class="line"></span><br><span class="line">	PriorityArray.msg</span><br><span class="line"></span><br><span class="line">	LabeledTrajectoryMonitorFactors.msg</span><br><span class="line"></span><br><span class="line">	LabeledGains.msg</span><br><span class="line"></span><br><span class="line">	LabeledControllerJointSettings.msg</span><br><span class="line"></span><br><span class="line">	VariantMapArray.msg</span><br><span class="line"></span><br><span class="line">	JointTrajectoryReplan.msg</span><br><span class="line"></span><br><span class="line">	JointControlData.msg</span><br><span class="line"></span><br><span class="line">	JointControlMode.msg</span><br><span class="line"></span><br><span class="line">	Gains.msg</span><br><span class="line"></span><br><span class="line">	PowerState.msg</span><br><span class="line"></span><br><span class="line">	VariantMap.msg</span><br><span class="line"></span><br><span class="line">	JointControlClearFaultMode.msg</span><br><span class="line"></span><br><span class="line">	JointCapability.msg</span><br><span class="line"></span><br><span class="line">	PoseCommandStatus.msg</span><br><span class="line"></span><br><span class="line">	SetParameterRequest.msg</span><br><span class="line"></span><br><span class="line">	LabeledJointTrajectory.msg</span><br><span class="line"></span><br><span class="line">	CommandStatus.msg</span><br><span class="line"></span><br><span class="line">	JointStatusArray.msg</span><br><span class="line"></span><br><span class="line">	ControllerPoseSettings.msg</span><br><span class="line"></span><br><span class="line">	PoseCommandArray.msg</span><br><span class="line"></span><br><span class="line">	JointControlDataArray.msg</span><br><span class="line"></span><br><span class="line">	LabeledControllerPoseSettings.msg</span><br><span class="line"></span><br><span class="line">	LabeledJointControlDataArray.msg</span><br><span class="line"></span><br><span class="line">	SetParameterResponse.msg</span><br><span class="line"></span><br><span class="line">	JointStatus.msg</span><br><span class="line"></span><br><span class="line">	PoseCommand.msg</span><br><span class="line"></span><br><span class="line">	SystemCore.msg</span><br><span class="line"></span><br><span class="line">	SystemStatus.msg</span><br><span class="line"></span><br><span class="line">	Modes.msg</span><br><span class="line"></span><br><span class="line">	PoseTrajectoryPoint.msg</span><br><span class="line"></span><br><span class="line">	JointControlCommandMode.msg</span><br><span class="line"></span><br><span class="line">	JointControl.msg</span><br><span class="line"></span><br><span class="line">	LabeledPoseTrajectory.msg</span><br><span class="line"></span><br><span class="line">	WrenchMonitorLimit.msg</span><br><span class="line"></span><br><span class="line">	JointControlCoeffState.msg</span><br><span class="line"></span><br><span class="line">	WrenchState.msg</span><br><span class="line"></span><br><span class="line">	PoseTrajectory.msg</span><br><span class="line"></span><br><span class="line">	ForceControlAxis.msg</span><br><span class="line"></span><br><span class="line">	LabeledJointState.msg</span><br><span class="line"></span><br><span class="line">	StringArray.msg</span><br><span class="line"></span><br><span class="line">	ReplanType.msg</span><br><span class="line"></span><br><span class="line">	MappedType.msg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate services in the 'srv' folder</span></span><br><span class="line"></span><br><span class="line">add_service_files(</span><br><span class="line"></span><br><span class="line">  FILES</span><br><span class="line"></span><br><span class="line">  ParseTableScene.srv</span><br><span class="line"></span><br><span class="line">  Power.srv</span><br><span class="line"></span><br><span class="line">  ResetTableScene.srv</span><br><span class="line"></span><br><span class="line">  Servo.srv</span><br><span class="line"></span><br><span class="line">  SetJointMode.srv</span><br><span class="line"></span><br><span class="line">  SetTipName.srv</span><br><span class="line"></span><br><span class="line">  TakeSnapshot.srv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  SetTipName.srv</span><br><span class="line"></span><br><span class="line">  Power.srv</span><br><span class="line"></span><br><span class="line">  SetJointMode.srv</span><br><span class="line"></span><br><span class="line">  TakeSnapshot.srv</span><br><span class="line"></span><br><span class="line">  Servo.srv</span><br><span class="line"></span><br><span class="line">  ResetTableScene.srv</span><br><span class="line"></span><br><span class="line">  ParseTableScene.srv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate added messages and services with any dependencies listed here</span></span><br><span class="line"></span><br><span class="line">generate_messages(</span><br><span class="line"></span><br><span class="line">  DEPENDENCIES</span><br><span class="line"></span><br><span class="line">  std_msgs</span><br><span class="line"></span><br><span class="line">  geometry_msgs</span><br><span class="line"></span><br><span class="line">  visualization_msgs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  trajectory_msgs</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">catkin_package(</span><br><span class="line"></span><br><span class="line">   CATKIN_DEPENDS </span><br><span class="line"></span><br><span class="line">    std_msgs </span><br><span class="line"></span><br><span class="line">    geometry_msgs</span><br><span class="line"></span><br><span class="line">    visualization_msgs</span><br><span class="line"></span><br><span class="line">    message_generation</span><br><span class="line"></span><br><span class="line">    message_runtime</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version="1.0"?&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>nasa_r2_common_msgs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Messages for dealing with the Robonaut2/ISS Taskboard<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">"stephen.hart@nasa.gov"</span>&gt;</span>Stephen Hart<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">"davidvlu@gmail.com"</span>&gt;</span>David V. Lu!!<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">license</span>&gt;</span>BSD<span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span> <span class="attr">type</span>=<span class="string">"website"</span>&gt;</span>http://ros.org/wiki/r2_msgs<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>geometry_msgs<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>visualization_msgs<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>visualization_msgs<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>geometry_msgs<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="修改-gazebo-taskboard-构造描述文件"><a href="#修改-gazebo-taskboard-构造描述文件" class="headerlink" title="修改 gazebo_taskboard 构造描述文件"></a>修改 gazebo_taskboard 构造描述文件</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(gazebo_taskboard)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_definitions</span>(-std=c++<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># xxxxxxx</span></span><br><span class="line"><span class="keyword">add_dependencies</span>(gazebo_taskboard gazebo_taskboard_generate_messages_cpp)</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version="1.0"?&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>gazebo_taskboard<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>The gazebo_taskboard package<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">"stephen.hart@nasa.gov"</span>&gt;</span>Stephen Hart<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">"davidvlu@gmail.com"</span>&gt;</span>David Lu!!<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- One license tag required, multiple allowed, one license per tag --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Commonly used license strings: --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--   BSD, MIT, Boost Software License, GPLv2, GPLv3, LGPLv2.1, LGPLv3 --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">license</span>&gt;</span>TODO<span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span> <span class="attr">type</span>=<span class="string">"website"</span>&gt;</span>http://wiki.ros.org/gazebo_taskboard<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>rospy<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>gazebo<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>pluginlib<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>actionlib<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>geometry_msgs<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>rostest<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">plugin_path</span>=<span class="string">"$&#123;prefix&#125;/lib"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="修改gazebo-gripper-gazebo-interface构造描述文件"><a href="#修改gazebo-gripper-gazebo-interface构造描述文件" class="headerlink" title="修改gazebo_gripper, gazebo_interface构造描述文件"></a>修改gazebo_gripper, gazebo_interface构造描述文件</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">add_definitions</span>(-std=c++<span class="number">11</span>)</span><br></pre></td></tr></table></figure>
<h2 id="catkin-make"><a href="#catkin-make" class="headerlink" title="catkin_make"></a>catkin_make</h2><ul>
<li>应该不会出错</li>
</ul>
<h2 id="roslaunch"><a href="#roslaunch" class="headerlink" title="roslaunch"></a>roslaunch</h2><ul>
<li>请结合gazebo操作帮助文档，使用r2_gazebo中的launch文件</li>
</ul>
<h2 id="下期预告"><a href="#下期预告" class="headerlink" title="下期预告"></a>下期预告</h2><ul>
<li>【ROS实战】机器人抓取仿真2-模型与控制</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;机器人抓取操作仿真实战，使用nasa_r2机器人模型和gazebo7机器人仿真器&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>卷首语</title>
    <link href="https://ZhenshengLee.github.io/2016/09/02/160901-%E5%8D%B7%E9%A6%96%E8%AF%AD/"/>
    <id>https://ZhenshengLee.github.io/2016/09/02/160901-卷首语/</id>
    <published>2016-09-01T16:29:20.000Z</published>
    <updated>2016-09-01T16:37:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>亲爱的朋友：</p>
<p>你好！</p>
<p>欢迎访问我的技术博客！</p>
<a id="more"></a>
<p>本博客于2016年8月开始载文，主要目的是为企业招聘主管展现本人的学习轨迹与职业能力。本博客所载文章全部是我研究生期间在实验室学习生活做的笔记，原本是存储在ONENOTE和WizNote软件上，以时间为线索记录的“流水账”，现突发奇想，本着对技术的热爱，建立一个自己的博客。这样做一方面可以全面梳理自己所学知识和业务能力，提升自己对技术的理解和写作能力；另一方面，也能够为企业HR考察自己提供一些便利。然而在学习工作之余做梳理工作本是一件漫长的过程，本博客将首先将笔记本内容上传，再逐渐地（在相当长的时间）将笔记整理为一篇一篇博文，如果博客内容影响到你的知识获取，本人表示歉意。</p>
<p>本人的笔记内容具有以下特点：</p>
<ol>
<li><p>以时间为线索记流水账，学到哪儿记到哪儿。笔记嘛，就是这样，一个窗口工作，鼠标一移，另一个窗口记笔记，还经常会将网页内容发送至笔记中；</p>
</li>
<li><p>包含很多简单，甚至“不足挂齿”的基础知识。一方面本人还是学生，在整个行业中实为一位无名之辈，另一方面，因为自己本科学的不是计算机专业，所以有很多外围知识到现在依然并未深刻理解，本人也一直在努力学习计算机本科的几门专业基础课；</p>
</li>
<li><p>主要的“干货”是自己的工作思路和对技术的理解。这儿并没有非常详细的操作步骤，一般会给你一个网址，也不会整段整段地翻译帮助文档，而是会直接贴英文原版内容。在我的笔记当中，有很多自己的所思所想，可能很杂乱无章，但我认为很有用，因为这样的思维才是解决问题的基础。</p>
</li>
</ol>
<p>本博客还会转载一些生活上的小品文，都是我认为应该多读多想的，欢迎读者能够留下评论，分享自己的见解。</p>
<p>简单介绍一下自己：本科机械设计制造及自动化，方向为机械设计，毕业课题工作为机构设计，运动仿真及有限元分析；研究生专业为机械电子工程，方向为智能机器人，毕业课题工作为机器人协作控制系统软件开发。</p>
<p>相关栏目正在建设中，敬请期待！</p>
<p>最后，希望我的博客能够帮助到你：）</p>
<p>再次感谢！</p>
<p>预祝商祺</p>
<p>附：博客写作方式及版权声明</p>
<p>如前所说，本博客所有文章均来自个人笔记本，会经常引用别人的网页（文章），但会全部给出出处，如果侵犯了他人权利，但请在博客评论指出，本人会删除。</p>
<p>博客文章全部用Markdown编辑器编辑好发布，由于第一次接触，如有不便，敬请谅解。</p>
<p>本博客欢迎转载。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;亲爱的朋友：&lt;/p&gt;
&lt;p&gt;你好！&lt;/p&gt;
&lt;p&gt;欢迎访问我的技术博客！&lt;/p&gt;
    
    </summary>
    
    
      <category term="写在前面" scheme="https://ZhenshengLee.github.io/tags/%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>【编辑】vscode C++程序设计</title>
    <link href="https://ZhenshengLee.github.io/2016/09/01/160901-vscodeC-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    <id>https://ZhenshengLee.github.io/2016/09/01/160901-vscodeC-程序设计/</id>
    <published>2016-09-01T06:43:28.000Z</published>
    <updated>2016-09-01T06:47:32.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li><p>此处介绍使用vscode进行cpp程序设计，使用make进行构建，gdb进行调试</p>
</li>
<li><p>此次项目用于到PAT刷题</p>
</li>
<li><p>以后逐步地使用gTest 进行测试，valgrind 进行深度检查，log4cplus进行日志输出</p>
</li>
</ul>
<a id="more"></a>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><p>[TOC]</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="https://stackoverflow.com/questions/30269449/how-do-i-set-up-vscode-to-compile-c-code" target="_blank" rel="external">how-do-i-set-up-vscode-to-compile-c-code</a></p>
<p><a href="https://code.visualstudio.com/docs/languages/cpp" target="_blank" rel="external">vscode c++ programming</a></p>
<p><a href="https://code.visualstudio.com/docs/editor/tasks" target="_blank" rel="external">vscode external tasks</a></p>
<p><a href="https://stackoverflow.com/questions/20096606/gdb-doesnt-find-sources" target="_blank" rel="external">gdb does’t find sources</a></p>
</blockquote>
<h2 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h2><h3 id="安装c-c-插件"><a href="#安装c-c-插件" class="headerlink" title="安装c/c++插件"></a>安装c/c++插件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Ctrl+Shift+P</span><br><span class="line"></span><br><span class="line">ext install cpp</span><br></pre></td></tr></table></figure>
<h3 id="文件准备"><a href="#文件准备" class="headerlink" title="文件准备"></a>文件准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cd pat-basic</span><br><span class="line"></span><br><span class="line">mkdir bin</span><br><span class="line"></span><br><span class="line">mkdir include</span><br><span class="line"></span><br><span class="line">mkdir src</span><br><span class="line"></span><br><span class="line">touch Makefile</span><br><span class="line"></span><br><span class="line">cd ./src</span><br><span class="line"></span><br><span class="line">touch hello_world.cpp</span><br><span class="line"></span><br><span class="line">touch 1035.cpp</span><br></pre></td></tr></table></figure>
<h4 id="编写Makefile"><a href="#编写Makefile" class="headerlink" title="编写Makefile"></a>编写Makefile</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PROJECT := zs_pat_basic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define files and directories</span></span><br><span class="line"></span><br><span class="line">CXX_SRCS := <span class="variable">$(shell find src/ -name "*.cpp")</span></span><br><span class="line"></span><br><span class="line">HEADER_FILES := <span class="variable">$(shell find include/ -name "*.h")</span></span><br><span class="line"></span><br><span class="line">SRC_DIR := ./src</span><br><span class="line"></span><br><span class="line">INCLUDE_DIR := ./include</span><br><span class="line"></span><br><span class="line">BUILD_DIR := ./bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define debug options</span></span><br><span class="line"></span><br><span class="line">DEBUG_OPTIONS := -g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define build targets</span></span><br><span class="line"></span><br><span class="line">.PHONY : all</span><br><span class="line"></span><br><span class="line">all: $(BUILD_DIR)/hello_world \</span><br><span class="line"></span><br><span class="line">		<span class="variable">$(BUILD_DIR)</span>/1035 \</span><br><span class="line"></span><br><span class="line">		 <span class="variable">$(BUILD_DIR)</span>/1050 \</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(BUILD_DIR)/% : $(SRC_DIR)/%.cpp</span><br><span class="line"></span><br><span class="line">	<span class="variable">$(CXX)</span> -o $@ <span class="variable">$(DEBUG_OPTIONS)</span> -I<span class="variable">$(INCLUDE_DIR)</span> $&lt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.PHONY : clean </span><br><span class="line"></span><br><span class="line">clean : </span><br><span class="line"></span><br><span class="line">	rm -rf <span class="variable">$(BUILD_DIR)</span>/*</span><br></pre></td></tr></table></figure>
<h3 id="编写c-配置文件c-cpp-properties-json"><a href="#编写c-配置文件c-cpp-properties-json" class="headerlink" title="编写c++配置文件c_cpp_properties.json"></a>编写c++配置文件c_cpp_properties.json</h3><ul>
<li><p>vscode自身配置文件全部在./.vscode/目录下，在vscode资源浏览器中可以看到</p>
</li>
<li><p>注意，刚刚对cpp文件进行编辑后，#include <iostream> 这句话是有红色下划线警示的，提示找不到文件，这时使用鼠标悬浮功能，点击“红色灯泡”，vscode会自动在配置文件夹中新建c_cpp_properties.json文件，文件内容如下</iostream></p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Mac"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"includePath"</span>: [<span class="string">"/usr/include"</span>],</span><br><span class="line"></span><br><span class="line">            <span class="attr">"browse"</span> : &#123;</span><br><span class="line"></span><br><span class="line">                <span class="attr">"limitSymbolsToIncludedHeaders"</span> : <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">                <span class="attr">"databaseFilename"</span> : <span class="string">""</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Linux"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"includePath"</span>: [<span class="string">"/usr/include"</span>],</span><br><span class="line"></span><br><span class="line">            <span class="attr">"browse"</span> : &#123;</span><br><span class="line"></span><br><span class="line">                <span class="attr">"limitSymbolsToIncludedHeaders"</span> : <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">                <span class="attr">"databaseFilename"</span> : <span class="string">""</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Win32"</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">"includePath"</span>: [<span class="string">"c:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include"</span>],</span><br><span class="line"></span><br><span class="line">            <span class="attr">"browse"</span> : &#123;</span><br><span class="line"></span><br><span class="line">                <span class="attr">"limitSymbolsToIncludedHeaders"</span> : <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">                <span class="attr">"databaseFilename"</span> : <span class="string">""</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">"clang_format"</span> : &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">"style"</span> : <span class="string">"file"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"fallback-style"</span> : <span class="string">"LLVM"</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">"sort-includes"</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置make任务"><a href="#配置make任务" class="headerlink" title="配置make任务"></a>配置make任务</h3><ul>
<li><p>vscode没有内置make功能，需要借助Task功能进行配置</p>
</li>
<li><p>Ctrl+shift+P 进入命令模式，键入tasks: Configure Task Runner，此时vscode自动生成task.json文件，编写内容如下</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	// See https://go.microsoft.com/fwlink/?LinkId=733558</span><br><span class="line"></span><br><span class="line">	// for the documentation about the tasks.json format</span><br><span class="line"></span><br><span class="line">	"version": "0.1.0",</span><br><span class="line"></span><br><span class="line">    "command": "make",</span><br><span class="line"></span><br><span class="line">    "isShellCommand": true,</span><br><span class="line"></span><br><span class="line">    "tasks": [</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            "taskName": "Makefile",</span><br><span class="line"></span><br><span class="line">            // Make this the default build command.</span><br><span class="line"></span><br><span class="line">            "isBuildCommand": true,</span><br><span class="line"></span><br><span class="line">            // Show the output window only if unrecognized errors occur.</span><br><span class="line"></span><br><span class="line">            "showOutput": "always",</span><br><span class="line"></span><br><span class="line">            // No args</span><br><span class="line"></span><br><span class="line">            "args": ["all"],</span><br><span class="line"></span><br><span class="line">            // Use the standard less compilation problem matcher.</span><br><span class="line"></span><br><span class="line">            // zs: The problem matcher is for gcc task, not for make.</span><br><span class="line"></span><br><span class="line">            "problemMatcher": &#123;</span><br><span class="line"></span><br><span class="line">                "owner": "cpp",</span><br><span class="line"></span><br><span class="line">                "fileLocation": ["relative", "$&#123;workspaceRoot&#125;"],</span><br><span class="line"></span><br><span class="line">                "pattern": &#123;</span><br><span class="line"></span><br><span class="line">                    "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",</span><br><span class="line"></span><br><span class="line">                    "file": 1,</span><br><span class="line"></span><br><span class="line">                    "line": 2,</span><br><span class="line"></span><br><span class="line">                    "column": 3,</span><br><span class="line"></span><br><span class="line">                    "severity": 4,</span><br><span class="line"></span><br><span class="line">                    "message": 5</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="编写调试配置文件launch-json"><a href="#编写调试配置文件launch-json" class="headerlink" title="编写调试配置文件launch.json"></a>编写调试配置文件launch.json</h3><ul>
<li><p>同样，vscode也需要自己定义调试相关选项</p>
</li>
<li><p>点击左侧工具栏”Debug“，点击”齿轮“按钮，此时vscode自动生成launch.json文件，编写内容如下</p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line"></span><br><span class="line">	<span class="attr">"configurations"</span>: [</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="attr">"name"</span>: <span class="string">"C++ Launch"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"targetArchitecture"</span>: <span class="string">"x64"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"program"</span>: <span class="string">"$&#123;workspaceRoot&#125;/bin/hello_world"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"args"</span>: [],</span><br><span class="line"></span><br><span class="line">			<span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceRoot&#125;"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"environment"</span>: [],</span><br><span class="line"></span><br><span class="line">			<span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"linux"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"osx"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"lldb"</span></span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"windows"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="attr">"name"</span>: <span class="string">"C++ Attach"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"targetArchitecture"</span>: <span class="string">"x64"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"program"</span>: <span class="string">"$&#123;workspaceRoot&#125;/bin/hello_world"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"args"</span>: [],</span><br><span class="line"></span><br><span class="line">			<span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceRoot&#125;"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"environment"</span>: [],</span><br><span class="line"></span><br><span class="line">			<span class="attr">"processId"</span>: <span class="string">"$&#123;command.pickProcess&#125;"</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"externalConsole"</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"linux"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"osx"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"lldb"</span></span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line">			<span class="attr">"windows"</span>: &#123;</span><br><span class="line"></span><br><span class="line">				<span class="attr">"MIMode"</span>: <span class="string">"gdb"</span></span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用流程"><a href="#使用流程" class="headerlink" title="使用流程"></a>使用流程</h3><ul>
<li><p>编写hello_world.cpp文件</p>
</li>
<li><p>设置断点</p>
</li>
<li><p>Ctrl+shift+B进行make</p>
</li>
<li><p>点击左侧工具栏”调试“按钮进入调试工具区，点击绿色开始运行按钮，即可开始调试</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;此处介绍使用vscode进行cpp程序设计，使用make进行构建，gdb进行调试&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;此次项目用于到PAT刷题&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;以后逐步地使用gTest 进行测试，valgrind 进行深度检查，log4cplus进行日志输出&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人系统开发" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>【编辑】vi command</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816-vi-command/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816-vi-command/</id>
    <published>2016-08-16T08:49:48.000Z</published>
    <updated>2016-08-16T09:18:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<blockquote>
<p>《嵌入式Linux开发基础知识》</p>
</blockquote>
<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><ul>
<li><p>远程访问需要用到shell内置文本编辑器，必须要学的基础技能</p>
</li>
<li><p>以HELLOWORLD程序为例子进行最基本的程序编辑，编译，调试练习！</p>
</li>
</ul>
<a id="more"></a>
<h4 id="VI学习"><a href="#VI学习" class="headerlink" title="VI学习"></a>VI学习</h4><ul>
<li><p>有三种状态：编辑方式，插入方式和命令方式，当你进入vi时，会首先进入命令方式（同时也是编辑方式），按下i进入插入方式，按下ESC回到命令状态（也是编辑方式）</p>
</li>
<li><blockquote>
<p>在插入方式下，不能打入指令，必需先按〈Esc〉键，返回命令方式。假若户不知身处何态，也可以按〈Esc〉键，不管处於何态，都会返回命令方式。在修改文件时，如何存档及退出指定文件都非常重要。在 vi 内，行使存档或退出的指令时，要先按冒号（: ） ，改变为命令方式，用户就可以看见在荧幕左下方，出现冒号（: ） ，显示 vi 已经改为指令态，可以进行存档或退出等工作。</p>
</blockquote>
</li>
</ul>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="命令模式（ESC进入）"><a href="#命令模式（ESC进入）" class="headerlink" title="命令模式（ESC进入）"></a>命令模式（ESC进入）</h5><h6 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h6><ul>
<li>放弃存档退出</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:q!</span><br></pre></td></tr></table></figure>
<ul>
<li>只读文件强行存档</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w!</span><br></pre></td></tr></table></figure>
<ul>
<li>存档并退出</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:x</span><br></pre></td></tr></table></figure>
<ul>
<li>跳转到n行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nG</span><br></pre></td></tr></table></figure>
<ul>
<li>显示当前行列数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+G</span><br></pre></td></tr></table></figure>
<ul>
<li>左上下右</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">h</span><br><span class="line">j</span><br><span class="line">k</span><br><span class="line">l</span><br></pre></td></tr></table></figure>
<h6 id="进入编辑模式"><a href="#进入编辑模式" class="headerlink" title="进入编辑模式"></a>进入编辑模式</h6><ul>
<li>光标前，后，所处位置插入字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i a r</span><br></pre></td></tr></table></figure>
<blockquote>
<p>i=insert; a=append; r=replace;</p>
</blockquote>
<ul>
<li>一行开始处插入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I</span><br></pre></td></tr></table></figure>
<ul>
<li>行尾处插入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A</span><br></pre></td></tr></table></figure>
<ul>
<li>光标下新开一行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o</span><br></pre></td></tr></table></figure>
<ul>
<li>光标上方新开一行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O</span><br></pre></td></tr></table></figure>
<h5 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h5><ul>
<li>清除整行开始填充</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cc</span><br></pre></td></tr></table></figure>
<ul>
<li>删除当前字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x</span><br></pre></td></tr></table></figure>
<ul>
<li>删除光标后n个字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nx</span><br></pre></td></tr></table></figure>
<ul>
<li>删除光标前n个字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nX</span><br></pre></td></tr></table></figure>
<ul>
<li>删除光标后n个单词</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ndw</span><br></pre></td></tr></table></figure>
<ul>
<li>删除整行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd</span><br></pre></td></tr></table></figure>
<ul>
<li>删除光标到行末</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D</span><br></pre></td></tr></table></figure>
<ul>
<li>回退</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">u</span><br></pre></td></tr></table></figure>
<h5 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h5><ul>
<li>往后搜索str直到文件开头</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?str &lt;return&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>重复检索</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">n</span><br><span class="line">N</span><br></pre></td></tr></table></figure>
<h5 id="复制与粘贴"><a href="#复制与粘贴" class="headerlink" title="复制与粘贴"></a>复制与粘贴</h5><ul>
<li>打开两个文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi file1 file2</span><br></pre></td></tr></table></figure>
<ul>
<li>拷贝所在行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yy</span><br></pre></td></tr></table></figure>
<ul>
<li>切换到下一个文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:n</span><br></pre></td></tr></table></figure>
<ul>
<li>当前光标处粘贴</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p</span><br></pre></td></tr></table></figure>
<ul>
<li>切换回文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:n</span><br></pre></td></tr></table></figure>
<h5 id="另存为"><a href="#另存为" class="headerlink" title="另存为"></a>另存为</h5><ul>
<li>行数之间另存为文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:20,59w /tmp/1</span><br></pre></td></tr></table></figure>
<h5 id="转到shell执行"><a href="#转到shell执行" class="headerlink" title="转到shell执行"></a>转到shell执行</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:!s</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;《嵌入式Linux开发基础知识》&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;远程访问需要用到shell内置文本编辑器，必须要学的基础技能&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;以HELLOWORLD程序为例子进行最基本的程序编辑，编译，调试练习！&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人系统开发" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>【编译】catkin build system</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816-catkin-build-system/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816-catkin-build-system/</id>
    <published>2016-08-16T08:47:24.000Z</published>
    <updated>2016-08-16T09:17:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li>是基于CMake，使用一系列CMake 宏制作而成的ROS构造系统</li>
</ul>
<a id="more"></a>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a href="http://docs.ros.org/api/catkin/html/" target="_blank" rel="external">Catkin Documentation</a></p>
<p><a href="http://wiki.ros.org/catkin" target="_blank" rel="external">ROS Wiki</a></p>
</blockquote>
<p>**推荐一本书：《深入理解软件构建系统》</p>
<h3 id="CMakeLists"><a href="#CMakeLists" class="headerlink" title="CMakeLists"></a><a href="http://wiki.ros.org/catkin/CMakeLists.txt" target="_blank" rel="external">CMakeLists</a></h3><h4 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h4><ul>
<li>此文件是CMake 构造系统的输入文件，构造描述文件记录了代码如何构建以及如何安装，catkin 构建系统基于CMakeLists，但是也添加了额外的不多的约束</li>
</ul>
<h4 id="总体结构（严格按照顺序）"><a href="#总体结构（严格按照顺序）" class="headerlink" title="总体结构（严格按照顺序）"></a>总体结构（严格按照顺序）</h4><ol>
<li><p>Required CMake Version (cmake_minimum_required)</p>
</li>
<li><p>Package Name (project())</p>
</li>
<li><p>Find other CMake/Catkin packages needed for build (find_package())</p>
</li>
<li><p>Message/Service/Action Generators(add_message_files(), add_service_files(), add_action_files())</p>
</li>
<li><p><strong><em>Invoke message/service/action generation (generate_messages())</em></strong></p>
</li>
<li><p><strong><em>Specify package build info export (catkin_package())</em></strong></p>
</li>
<li><p>Libraries/Executables to build (add_library()/add_executable()/target_link_libraries())</p>
</li>
<li><p><strong><em>Tests to build (catkin_add_gtest())</em></strong></p>
</li>
<li><p>Install rules (install())</p>
</li>
</ol>
<h4 id="find-package-思想"><a href="#find-package-思想" class="headerlink" title="find_package()思想"></a>find_package()思想</h4><ul>
<li>CMake中的find模块的作用在于自动寻找已经存在的软件组件，这里的组件概念对应于ROS中的包的概念。如</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS nodelet)</span><br></pre></td></tr></table></figure>
<p><strong>意思是，寻找catkin库中的nodelet组件*</strong>，<strong>在这个语句中不能添加运行时依赖*</strong></p>
<ul>
<li>问题来了，为什么Catkin是一个大库，ROS包是一个组件呢？其实官方文档说了，你可以可以这么写</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED);<span class="keyword">find_package</span>(nodelet REQUIRED)</span><br></pre></td></tr></table></figure>
<p>，因为使用catkin编译，必须包含catkin包，然后你再包含nodelet包，但是这样也太不方便了。所以原因就是要方便，当然也不是方便这么一点点，还有关于环境变量。</p>
<blockquote>
<ul>
<li><p>Catkin packages are not really components of catkin. Rather the components feature of CMake was utilized in the design of catkin to save you significant typing time.</p>
</li>
<li><p>For catkin packages, if you find<em>package them as components of catkin, this is advantageous as a single set of environment variables is created with the catkin</em> prefix.</p>
</li>
</ul>
</blockquote>
<ul>
<li>注意：boost不是catkin组件哦</li>
</ul>
<h4 id="catkin-package-思想"><a href="#catkin-package-思想" class="headerlink" title="catkin_package()思想"></a>catkin_package()思想</h4><ul>
<li><p>是一个CMake 宏，用来明确catkin构建系统信息，这些信息用来生成pkg-config和CMake文件</p>
</li>
<li><blockquote>
<p><strong>This function must be called before declaring any targets with add_library() or add_executable()</strong>. The function has 5 optional arguments:</p>
</blockquote>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">INCLUDE_DIRS - The exported <span class="keyword">include</span> paths (i.e. cflags) for the package</span><br><span class="line"></span><br><span class="line">LIBRARIES - The exported libraries from the <span class="keyword">project</span></span><br><span class="line"></span><br><span class="line">CATKIN_DEPENDS - Other catkin projects that this <span class="keyword">project</span> depends <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line">DEPENDS - Non-catkin CMake projects that this <span class="keyword">project</span> depends <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line">CFG_EXTRAS - Additional configuration options</span><br></pre></td></tr></table></figure>
<h4 id="关于标的的构建选项"><a href="#关于标的的构建选项" class="headerlink" title="关于标的的构建选项"></a>关于标的的构建选项</h4><ul>
<li>自定义输出目录。</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(python_module_library  PROPERTIES LIBRARY_OUTPUT_DIRECTORY <span class="variable">$&#123;CATKIN_DEVEL_PREFIX&#125;</span>/<span class="variable">$&#123;CATKIN_PACKAGE_PYTHON_DESTINATION&#125;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>包含目录和库，创建可执行文件和库文件</li>
</ul>
<p><strong><em>完全是CMake知识</em></strong></p>
<h4 id="消息，服务和动作"><a href="#消息，服务和动作" class="headerlink" title="消息，服务和动作"></a>消息，服务和动作</h4><ul>
<li>一句话，先add_service_files()，再generate_messgaes()，可谓是一键创造消息服务动作</li>
</ul>
<blockquote>
<p>Messages (.msg), services (.srv), and actions (.action) files in ROS require a special preprocessor build step before being built and used by ROS packages. The point of these macros is to generate programming language-specific files so that one can utilize messages, services, and actions in their programming language of choice. The build system will generate bindings using all available generators (e.g. gencpp, genpy, genlisp, etc).</p>
</blockquote>
<h5 id="一系列注意事项（懒得翻译了）"><a href="#一系列注意事项（懒得翻译了）" class="headerlink" title="一系列注意事项（懒得翻译了）"></a>一系列注意事项（懒得翻译了）</h5><blockquote>
<ul>
<li><p>These macros must come BEFORE the catkin_package() macro in order for generation to work correctly.</p>
</li>
<li><p>Your catkin_package() macro must have a CATKIN_DEPENDS dependency on message_runtime.</p>
</li>
<li><p>You must use find_package() for the package message_generation, either alone or as a component of catkin</p>
</li>
<li><p>Your package.xml file must contain a build dependency on message_generation and a runtime dependency on message_runtime. This is not necessary if the dependencies are pulled in transitively from other packages.</p>
</li>
<li><p>If you have a package which builds messages and/or services as well as executables that use them, you need to create an explicit dependency on the automatically-generated message target so that they are built in the correct order. (some_target is the name of the target set by add_executable()):</p>
</li>
</ul>
</blockquote>
<h4 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catkin_add_gtest(myUnitTest test/utest.cpp)</span><br></pre></td></tr></table></figure>
<h4 id="安装（略）"><a href="#安装（略）" class="headerlink" title="安装（略）"></a>安装（略）</h4><h3 id="Package-xml"><a href="#Package-xml" class="headerlink" title="Package.xml"></a><a href="http://wiki.ros.org/catkin/package.xml" target="_blank" rel="external">Package.xml</a></h3><h4 id="使用XML语言设置依赖（略）"><a href="#使用XML语言设置依赖（略）" class="headerlink" title="使用XML语言设置依赖（略）"></a>使用XML语言设置依赖（略）</h4><ul>
<li><p>实际上就是使用标记语言说明本包的基本情况</p>
</li>
<li><p>设置本包为Metapackages</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">metapackage</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"><span class="keyword">project</span>(&lt;PACKAGE_NAME&gt;)</span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED)</span><br><span class="line">catkin_metapackage()</span><br></pre></td></tr></table></figure>
<h3 id="专题：消息，服务，重配置的构造描述文件"><a href="#专题：消息，服务，重配置的构造描述文件" class="headerlink" title="专题：消息，服务，重配置的构造描述文件"></a>专题：消息，服务，重配置的构造描述文件</h3><ul>
<li>只有一个包或节点是消息，服务，动作的提供者时，在构造描述文件中才需要添加相应的描述语句，如果是接受者，那么不需要提供。</li>
</ul>
<blockquote>
<p>请比较rosaria和rosaria_client构造描述文件的区别</p>
</blockquote>
<ul>
<li><p>当需要使用到新的消息和服务类型时，才需要再构造描述文件中添加add语句</p>
</li>
<li><p>通过包含其他含有std_msgs的包，如rosaria，也可以间接包含std_msgs</p>
</li>
<li><p>嘛的，官方例程建立消息和服务都还要</p>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_dependencies</span>()</span><br></pre></td></tr></table></figure>
<p>但是rosaria中没有这么多废话</p>
<ul>
<li>消息和服务的构造描述文件</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS   roscpp   rospy   std_msgs   message_generation)</span><br><span class="line"></span><br><span class="line">catkin_package(  ...  CATKIN_DEPENDS message_runtime ...  ...)</span><br><span class="line"></span><br><span class="line">generate_messages(</span><br><span class="line"></span><br><span class="line"><span class="comment">#   DEPENDENCIES</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   std_msgs</span></span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>message_generation<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>message_runtime<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>为什么有</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_msgs()</span><br></pre></td></tr></table></figure>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_srvs()</span><br></pre></td></tr></table></figure>
<p>而只有</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">generate_messages()</span><br></pre></td></tr></table></figure>
<p>没有</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">generate_srvs()</span><br></pre></td></tr></table></figure>
<p>等？因为服务和参数重配置本质上都是基于msg消息机制，多说一句，消息机制是建立在XMLRPC远程过程调用机制上的，进而建立在TCP/IP网络协议上</p>
<blockquote>
<p>《UNIX网络编程：进程间通信》<br><a href="http://wiki.ros.org/dynamic_reconfigure/Tutorials/SettingUpDynamicReconfigureForANode" target="_blank" rel="external">重配置的构造描述文件</a></p>
</blockquote>
<h3 id="实例：解决zsDoor模块缺失问题"><a href="#实例：解决zsDoor模块缺失问题" class="headerlink" title="实例：解决zsDoor模块缺失问题"></a>实例：解决zsDoor模块缺失问题</h3><h4 id="查看stereo-wall-detection的CMakeLists-txt"><a href="#查看stereo-wall-detection的CMakeLists-txt" class="headerlink" title="查看stereo_wall_detection的CMakeLists.txt"></a>查看stereo_wall_detection的CMakeLists.txt</h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;是基于CMake，使用一系列CMake 宏制作而成的ROS构造系统&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件构造" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E6%9E%84%E9%80%A0/"/>
    
  </entry>
  
  <entry>
    <title>【测试】gtest and rostest</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816-gtest-and-rostest/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816-gtest-and-rostest/</id>
    <published>2016-08-16T08:44:05.000Z</published>
    <updated>2016-08-16T09:17:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="为什么要学GTest"><a href="#为什么要学GTest" class="headerlink" title="为什么要学GTest"></a>为什么要学GTest</h3><ul>
<li><p>开源框架，完全免费</p>
</li>
<li><p>用得人多，项目多，比如ROS就用这个做测试，这是我学习GTEST的直接原因</p>
</li>
<li><p>软件工程师入门啊！</p>
</li>
</ul>
<a id="more"></a>
<h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><blockquote>
<p><a href="http://roclinux.cn/?p=2873" target="_blank" rel="external">Linux 大棚</a></p>
<p><a href="http://wiki.ros.org/rostest" target="_blank" rel="external">ROSTest</a></p>
</blockquote>
<h2 id="好的测试框架应该是（软件测试思想）"><a href="#好的测试框架应该是（软件测试思想）" class="headerlink" title="好的测试框架应该是（软件测试思想）"></a>好的测试框架应该是（软件测试思想）</h2><ul>
<li><p>软件应该是独立的且可重复的，每个测试应该是一个独立的对象</p>
</li>
<li><p>应该有一套好的方法来组织测试，这种组织方法能够较好的反映程序代码的结构</p>
</li>
<li><p>测试应该是可迁移的且可复用的（平台中立）（支持多种编译器）</p>
</li>
<li><p>在测试失败时，要能够提供足够充分的测试信息</p>
</li>
<li><p>测试框架应该让开发者从琐碎的工作中解脱出来，让他们能够专注在测试内容上</p>
</li>
<li><p>测试应该是高效的</p>
</li>
</ul>
<h3 id="科普"><a href="#科普" class="headerlink" title="科普"></a>科普</h3><ul>
<li><p>如果你是一名开发工程师，或者你编写的程序要用到生产环境中，那么，你不可避免的需要学习和掌握一种自动化测试框架，以确保你的程序测试充分，质量上乘。</p>
</li>
<li><p>其实啊，测试工具是什么并不重要，重要的是测试思想，还是在大学期间上过的课，亲身做过的项目才是真货，好吧，去考个计算机三级软件测试技术？</p>
</li>
</ul>
<h2 id="GTest-入门"><a href="#GTest-入门" class="headerlink" title="GTest 入门"></a>GTest 入门</h2><h3 id="综述"><a href="#综述" class="headerlink" title="综述"></a>综述</h3><ul>
<li><p>第一步就是：把gtest编译成一个库，并且链接到你的测试程序中</p>
</li>
<li><p>你的测试项目程序要引用gtest/gtest.h，你的gtest安装在GTEST_ROOT路径下</p>
</li>
</ul>
<h3 id="断言assertion"><a href="#断言assertion" class="headerlink" title="断言assertion"></a>断言assertion</h3><ul>
<li><p>gtest 中的断言是一些宏，assertion在测试一个函数时，可以有两种方案，即ASSERT<em>*和EXPECT</em><em>。在失败发生时，ASSERT_</em>这类assertion会产生fatal failure，并且会终止当前函数；而EXPECT_*则只会产生nonfatal failure。</p>
</li>
<li><p>常用的宏有</p>
</li>
</ul>
<p>EXPECT_EQ/NE/LT/LE/GT/GE([表达式],[表达式])</p>
<ul>
<li><p>对于ASSERT_EQ比较两个C字符串指针，只会检查两个指针是否指向同一块区域，要想检查两个（C风格字符串）字符串内容是否相同，要使用ASSERT_STREQ，不过比较两个C++字符串的话就用ASSERT_EQ就可以了。</p>
</li>
<li><p>特殊的比较宏——字符串比较宏</p>
</li>
</ul>
<p>ASSERT_STRCASEEQ()，此处CASE指不区分大小写的比较</p>
<ul>
<li>字符串比较宏的特殊规则</li>
</ul>
<p>NULL和空字符串””是不相等的。</p>
<ul>
<li>如果你想了解更多有关字符串比较的trick方法，比如在assertion中处理子字符串、前缀、后缀、正则匹配等，请进入“高级gtest指南”。</li>
</ul>
<h3 id="创建一个test"><a href="#创建一个test" class="headerlink" title="创建一个test"></a>创建一个test</h3><ul>
<li>三件事</li>
</ul>
<ol>
<li><p>使用TEST()宏来定义和命名一个test函数，这个test函数不需要return任何值。</p>
</li>
<li><p>在这个test函数中，你可以写任何C++语句，并且使用assertion来检查。</p>
</li>
<li><p>这个test的结果是由assertion决定的。如果任何一个assertion失败了，或者这个test函数崩溃了，这个test则会返回fail。否则，会返回success。</p>
</li>
</ol>
<ul>
<li>语法</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">TEST(test_case_name, test_name) &#123;</span><br><span class="line"></span><br><span class="line">... test body ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Test Fixtures</li>
</ul>
<p>如果你发现你所写的多个test都在操作类似的数据，那么我推荐你使用test fixture。这个特性允许你在不同的test里复用相同的配置。</p>
<p>机制主要是类的继承，具体请看参考教程，见文首</p>
<p>使用Test Fixtures时的宏</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">TEST_F(test_case_name, test_name) &#123;</span><br><span class="line"></span><br><span class="line">... test body ...</span><br><span class="line"></span><br><span class="line">&#125;<span class="comment">// test_case_name 必须是定义的test fixture类的名称</span></span><br></pre></td></tr></table></figure>
<h3 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h3><p>如果要触发运行，请执行RUN_ALL_TESTS()宏，如果所有的test都测试通过，它会返回0，否则会返回1。</p>
<ul>
<li>注意</li>
</ul>
<p>你bixu在你的main函数中return这个值。</p>
<h3 id="编写测试的main函数"><a href="#编写测试的main函数" class="headerlink" title="编写测试的main函数"></a>编写测试的main函数</h3><ul>
<li>参考如下模板</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"this/package/foo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"gtest/gtest.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// The fixture for testing class Foo.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> FooTest : <span class="keyword">public</span> ::testing::Test &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can remove any or all of the following functions if its body is empty.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FooTest() &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can do set-up work for each test here.</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Virtual ~FooTest() &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can do clean-up work that doesn't throw exceptions here.</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// If the constructor and destructor are not enough for setting up</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// and cleaning up each test, you can define the following methods:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Code here will be called immediately after the constructor</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">TearDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Code here will be called immediately after each test</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object declared here can be used by all tests in the test case for Foo.</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Tests that the Foo::Bar() method does Abc.</span></span><br><span class="line"></span><br><span class="line">TEST_F(FooTest, MethodBarDoesAbc) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> input_filepath = <span class="string">"this/package/testdata/myinputfile.dat"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> output_filepath = <span class="string">"this/package/testdata/myoutputfile.dat"</span>;</span><br><span class="line"></span><br><span class="line">Foo f;</span><br><span class="line"></span><br><span class="line">EXPECT_EQ(<span class="number">0</span>, f.Bar(input_filepath, output_filepath));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Tests that Foo does Xyz.</span></span><br><span class="line"></span><br><span class="line">TEST_F(FooTest, DoesXyz) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Execises the Xyz feature of Foo.</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// namespace</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">::testing::InitGoogleTest(&amp;amp;argc, argv);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> RUN_ALL_TESTS();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ROSTest-学习"><a href="#ROSTest-学习" class="headerlink" title="ROSTest 学习"></a>ROSTest 学习</h2><ul>
<li>rostest是roslaunch的扩展，允许跨越多节点进行测试！文件格式可以是.test或.launch，非常建议将测试launch文件嵌入到普通launch文件中</li>
</ul>
<h3 id="编写测试"><a href="#编写测试" class="headerlink" title="编写测试"></a>编写测试</h3><h4 id="前期概念"><a href="#前期概念" class="headerlink" title="前期概念"></a>前期概念</h4><ul>
<li><p>两种层次上的测试：一种是节点层级的测试，主要测试节点与节点之间的交互是否有效，如消息订阅，服务请求等；另一种是代码层级的测试，主要测试节点内部具体执行的程序的有效性，如特定算法。</p>
</li>
<li><p>实际上需要编写一些测试节点来运行测试，rostest基于gtest框架</p>
</li>
</ul>
<h4 id="编写"><a href="#编写" class="headerlink" title="编写"></a>编写</h4><blockquote>
<p><a href="http://wiki.ros.org/gtest" target="_blank" rel="external">Writing C++ tests with gtest</a></p>
</blockquote>
<h4 id="构造描述文件"><a href="#构造描述文件" class="headerlink" title="构造描述文件"></a>构造描述文件</h4><ul>
<li>CMakeLists</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(CATKIN_ENABLE_TESTING)</span><br><span class="line">  <span class="keyword">find_package</span>(rostest REQUIRED)</span><br><span class="line">  add_rostest_gtest(tests_mynode test/mynode.test src/test/test_mynode.cpp [more cpp files])</span><br><span class="line">  <span class="keyword">target_link_libraries</span>(tests_mynode <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>
<ul>
<li>Package.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>launch file</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"mypkg"</span> <span class="attr">type</span>=<span class="string">"mynode"</span> <span class="attr">name</span>=<span class="string">"mynode"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test</span> <span class="attr">test-name</span>=<span class="string">"test_mynode"</span> <span class="attr">pkg</span>=<span class="string">"mypkg"</span> <span class="attr">type</span>=<span class="string">"test_mynode"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>launch 文件会启动节点后立即启动测试节点</p>
</blockquote>
<h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><h2 id="项目：测试zsDoor项目"><a href="#项目：测试zsDoor项目" class="headerlink" title="项目：测试zsDoor项目"></a>项目：测试zsDoor项目</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;h3 id=&quot;为什么要学GTest&quot;&gt;&lt;a href=&quot;#为什么要学GTest&quot; class=&quot;headerlink&quot; title=&quot;为什么要学GTest&quot;&gt;&lt;/a&gt;为什么要学GTest&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;开源框架，完全免费&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用得人多，项目多，比如ROS就用这个做测试，这是我学习GTEST的直接原因&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;软件工程师入门啊！&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件构造" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E6%9E%84%E9%80%A0/"/>
    
  </entry>
  
  <entry>
    <title>【调试】gdb, ros and roslaunch</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816-gdb-ros-and-roslaunch/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816-gdb-ros-and-roslaunch/</id>
    <published>2016-08-16T08:42:12.000Z</published>
    <updated>2016-08-16T09:17:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li><p>这是必须学习的技能，但是不需要精通，应该利用更高层的工具</p>
</li>
<li><p>在ROS项目开发过程中应用，在使用roslaunch过程中应用gdb</p>
</li>
<li><p>在CLion，VSCode使用过程中应用调试功能</p>
</li>
</ul>
<a id="more"></a>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p>《ROS机器人程序开发》</p>
<p>《嵌入式Linux开发基础知识》</p>
<p><a href="http://wiki.ros.org/roslaunch" target="_blank" rel="external">roslaunch wiki</a></p>
</blockquote>
<h3 id="gdb学习"><a href="#gdb学习" class="headerlink" title="gdb学习"></a>gdb学习</h3><ul>
<li><blockquote>
<p>是一个用来调试C/C++程序的强力调试器，常用功能有：监视程序中变量的值；设置断点；单步执行</p>
</blockquote>
</li>
<li><p><strong>为了使gdb正常工作，你必须使你的程序在编译时包含调试信息</strong>。<figure class="highlight plain"><figcaption><span>-g```调试信息包括你程序里的每一个变量的类型和在可执行文件里的地址映射以及源代码的行号。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 你可以使用gdb调试一个可执行文件，也可以用gdb检查一个因程序异常终止而产生的core文件，或者与一个正在运行的程序相连。更多请参考```gdb -h</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>命令支持tab补齐特性</p>
</li>
</ul>
<h4 id="使用要点"><a href="#使用要点" class="headerlink" title="使用要点"></a>使用要点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gdb #打开调试器</span><br><span class="line">file FILE #装载指定可执行文件</span><br><span class="line">break NUM #在指定的行上设置断点</span><br><span class="line">bt #显示所有的调用栈帧，显示函数的调用顺序</span><br><span class="line">clear FILENAME:NUM #删除特定源文件行上的断点</span><br><span class="line">next #在不单步执行进入其他函数的情况下，向前执行一行源代码</span><br><span class="line">continue #继续执行</span><br><span class="line">display EXPR #每次程序停止后显示表达式的值，表达式由程序定义的变量组成</span><br><span class="line">print EXPR #显示表达式的值</span><br><span class="line">info files #显示被调试文件的详细信息</span><br><span class="line">info func #显示所有函数名称</span><br><span class="line">info local #显示当函数中的局部变量信息</span><br><span class="line">info prog #显示被调试程序的执行状态</span><br><span class="line">info var #显示所有的全局和静态变量名称</span><br><span class="line">kill #终止正在被调试的程序</span><br><span class="line">list #显示源代码段</span><br><span class="line">make #在不退出gdb的情况下运行make工具</span><br></pre></td></tr></table></figure>
<h3 id="ROS-node-debug-with-gdb（使用gdb调试ROS节点）"><a href="#ROS-node-debug-with-gdb（使用gdb调试ROS节点）" class="headerlink" title="ROS node debug with gdb（使用gdb调试ROS节点）"></a>ROS node debug with gdb（使用gdb调试ROS节点）</h3><ul>
<li>从调试任意C/C++可执行文件的标准方法开始</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">roscore</span><br><span class="line"></span><br><span class="line">gdb bin/example</span><br><span class="line"></span><br><span class="line">r</span><br></pre></td></tr></table></figure>
<ul>
<li>ros节点启动时调用gdb调试器</li>
</ul>
<p>需要在launch文件中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launch-prefix=&quot;xterm-egdb--args&quot;</span><br></pre></td></tr></table></figure>
<p>该语句意思是：加载节点并等待运行。注意，因为是在xterm中创建gdb绘画，所以还有一个调试窗口。</p>
<p> <code>launch-prefix</code>其实是一个前置启动工具，我们同样可以使用<code>launch-prefix=&quot;valgrind&quot;</code>来在启动节点之前启动valgrind工具检测内存泄露，并执行性能分析。<a href="http://valgrind.org" target="_blank" rel="external">valgrind.org</a></p>
<ul>
<li>更多请见</li>
</ul>
<blockquote>
<p><a href="http://wiki.ros.org/roslaunch/Tutorials/Roslaunch%20Nodes%20in%20Valgrind%20or%20GDB" target="_blank" rel="external">How to Roslaunch Nodes in Valgrind or GDB</a></p>
</blockquote>
<h3 id="roslaunch-学习和调试"><a href="#roslaunch-学习和调试" class="headerlink" title="roslaunch 学习和调试"></a>roslaunch 学习和调试</h3><ul>
<li>launch文件：功能包名传递给pkg属性，节点名传递给type属性，由于同一个节点可以运行多个实例，因此需要给每个实例一个节点名以作区分，即name属性，最好将这些属性配置输出到屏幕，这样就会在启动节点的shell窗口中输出相应调试信息，output=screen。</li>
</ul>
<h3 id="实例：调试ROS项目"><a href="#实例：调试ROS项目" class="headerlink" title="实例：调试ROS项目"></a>实例：调试ROS项目</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;这是必须学习的技能，但是不需要精通，应该利用更高层的工具&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在ROS项目开发过程中应用，在使用roslaunch过程中应用gdb&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在CLion，VSCode使用过程中应用调试功能&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件构造" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E6%9E%84%E9%80%A0/"/>
    
  </entry>
  
  <entry>
    <title>【部署】Git拉取远程分支</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816-Git%E6%8B%89%E5%8F%96%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816-Git拉取远程分支/</id>
    <published>2016-08-16T08:38:48.000Z</published>
    <updated>2016-08-16T09:17:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li><p>自己是git新手，在本地没有分支的时候不知道怎么拉取（从别的电脑push的）远程分支，完全没办法，只好删除整个文件夹重新clone，后来到网上好好学了学，总算知道了。</p>
</li>
<li><p>这里重点介绍一下本地没有该分支，需要到远程拉取该分支的方法</p>
</li>
</ul>
<a id="more"></a>
<h3 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h3><p><a href="http://blog.csdn.net/xqs83/article/details/7382074" target="_blank" rel="external">xqs83</a></p>
<h3 id="错误做法"><a href="#错误做法" class="headerlink" title="错误做法"></a>错误做法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git branch link-rosforlv</span><br><span class="line"></span><br><span class="line">git checkout link-rosforlv</span><br><span class="line"></span><br><span class="line">git pull origin link-rosforlv</span><br></pre></td></tr></table></figure>
<ul>
<li><blockquote>
<p>因为，这样建立的branch是以master为基础建立的，再pull下来的话，会和master的内容进行合并，有可能会发生冲突</p>
</blockquote>
</li>
</ul>
<h3 id="正确用法"><a href="#正确用法" class="headerlink" title="正确用法"></a>正确用法</h3><ul>
<li>用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure>
<p>查看包括远程分支在内的所有分支：</p>
<ul>
<li>使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checkout</span><br></pre></td></tr></table></figure>
<p>命令来把远程分支取到本地，并自动建立tracking</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git checkout -b link-rosforlv origin/link-rosforlv</span><br></pre></td></tr></table></figure>
<ul>
<li>或者使用-t参数，它默认会在本地建立一个和远程分支名字一样的分支</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git checkout -t origin/link-rosforlv</span><br></pre></td></tr></table></figure>
<ul>
<li>也可以使用fetch来做：</li>
</ul>
<p>git fetch origin link-rosforlv:link-rosforlv</p>
<blockquote>
<p><strong>不过通过fetch命令来建立的本地分支不是一个track branch，而且成功后不会自动切换到该分支上</strong></p>
</blockquote>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><ul>
<li>学完之后才发现有这么多种方法可以做到这些，瞬觉自己才疏学浅，惭愧惭愧。</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;自己是git新手，在本地没有分支的时候不知道怎么拉取（从别的电脑push的）远程分支，完全没办法，只好删除整个文件夹重新clone，后来到网上好好学了学，总算知道了。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这里重点介绍一下本地没有该分支，需要到远程拉取该分支的方法&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件构造" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E6%9E%84%E9%80%A0/"/>
    
  </entry>
  
  <entry>
    <title>【ROS】标记工具-Marker</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7-Marker/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816可视化工具-Marker/</id>
    <published>2016-08-16T08:34:55.000Z</published>
    <updated>2016-08-16T08:37:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li><p>顾名思义，标记工具就是在数据可视化的基础上加上用户自定义标记，用来强调某种特征或者添加用户自己想加上的东西</p>
</li>
<li><p>visualization stack 现在已经包含到RViz中，但是我们主要还是要学习这个包集中的东西</p>
</li>
</ul>
<a id="more"></a>
<p>[TOC]</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a href="http://wiki.ros.org/visualization_msgs" target="_blank" rel="external">visualization_msgs</a></p>
<p><a href="http://wiki.ros.org/visualization/Tutorials" target="_blank" rel="external">Tutorials</a></p>
<p><a href="http://wiki.ros.org/rviz" target="_blank" rel="external">RViz Turorials</a></p>
<p><a href="http://wiki.ros.org/rviz/UserGuide" target="_blank" rel="external">RViz User Guid</a></p>
</blockquote>
<h2 id="visuallization-msgs-markers"><a href="#visuallization-msgs-markers" class="headerlink" title="visuallization_msgs/markers"></a>visuallization_msgs/markers</h2><h3 id="Sending-Basic-Shapes-to-RViz"><a href="#Sending-Basic-Shapes-to-RViz" class="headerlink" title="Sending Basic Shapes to RViz"></a><a href="http://wiki.ros.org/rviz/Tutorials/Markers%3A%20Basic%20Shapes" target="_blank" rel="external">Sending Basic Shapes to RViz</a></h3><h4 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h4><ul>
<li>注册一个visualization::marker消息，定义好，然后发出去，RViz在收到后在指定位置显示特定形状</li>
</ul>
<h4 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h4><ul>
<li>package.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">catkin_create_pkg using_markers roscpp visualization_msgs</span><br></pre></td></tr></table></figure>
<ul>
<li>CMakeList.txt</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(basic_shapes src/basic_shapes.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(basic_shapes <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>.cpp</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;visualization_msgs/Marker.h&gt;</span></span></span><br><span class="line">ros::Publisher marker_pub = n.advertise&lt;visualization_msgs::Marker&gt;(<span class="string">"visualization_marker"</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">uint32_t</span> shape = visualization_msgs::Marker::CUBE;</span><br><span class="line">    visualization_msgs::Marker marker;</span><br><span class="line"><span class="comment">// Set the frame ID and timestamp.  See the TF tutorials for information on these.</span></span><br><span class="line">marker.header.frame_id = <span class="string">"/my_frame"</span>;</span><br><span class="line">marker.header.stamp = ros::Time::now();</span><br><span class="line"><span class="comment">// Set the namespace and id for this marker.  This serves to create a unique ID</span></span><br><span class="line"><span class="comment">// Any marker sent with the same namespace and id will overwrite the old one</span></span><br><span class="line">marker.ns = <span class="string">"basic_shapes"</span>;</span><br><span class="line">marker.id = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// Set the marker type.  Initially this is CUBE, and cycles between that and SPHERE, ARROW, and CYLINDER</span></span><br><span class="line">marker.type = shape;</span><br><span class="line"><span class="comment">// Set the marker action.  Options are ADD, DELETE, and new in ROS Indigo: 3 (DELETEALL)</span></span><br><span class="line">marker.action = visualization_msgs::Marker::ADD;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set the pose of the marker.  This is a full 6DOF pose relative to the frame/time specified in the header</span></span><br><span class="line">marker.pose.position.x = <span class="number">0</span>;</span><br><span class="line">marker.pose.position.y = <span class="number">0</span>;</span><br><span class="line">marker.pose.position.z = <span class="number">0</span>;</span><br><span class="line">marker.pose.orientation.x = <span class="number">0.0</span>;</span><br><span class="line">marker.pose.orientation.y = <span class="number">0.0</span>;</span><br><span class="line">marker.pose.orientation.z = <span class="number">0.0</span>;</span><br><span class="line">marker.pose.orientation.w = <span class="number">1.0</span>;</span><br><span class="line"><span class="comment">// Set the scale of the marker -- 1x1x1 here means 1m on a side</span></span><br><span class="line">marker.scale.x = <span class="number">1.0</span>;</span><br><span class="line">marker.scale.y = <span class="number">1.0</span>;</span><br><span class="line">marker.scale.z = <span class="number">1.0</span>;</span><br><span class="line"><span class="comment">// Set the color -- be sure to set alpha to something non-zero!</span></span><br><span class="line">marker.color.r = <span class="number">0.0f</span>;</span><br><span class="line">marker.color.g = <span class="number">1.0f</span>;</span><br><span class="line">marker.color.b = <span class="number">0.0f</span>;</span><br><span class="line">marker.color.a = <span class="number">1.0</span>;</span><br><span class="line">marker.lifetime = ros::Duration();</span><br><span class="line"><span class="comment">// Publish the marker</span></span><br><span class="line"><span class="keyword">while</span> (marker_pub.getNumSubscribers() &lt; <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!ros::ok())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ROS_WARN_ONCE(<span class="string">"Please create a subscriber to the marker"</span>);</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">marker_pub.publish(marker);</span><br></pre></td></tr></table></figure>
<h3 id="Sending-Points-and-lines"><a href="#Sending-Points-and-lines" class="headerlink" title="Sending Points and lines"></a><a href="http://wiki.ros.org/rviz/Tutorials/Markers%3A%20Points%20and%20Lines" target="_blank" rel="external">Sending Points and lines</a></h3><ul>
<li>本质同发送基本形状，都是定义一个消息，然后发送即可，只是点和线可能是数组数据结构，定义起来麻烦一点</li>
</ul>
<h3 id="Interactive-Marker"><a href="#Interactive-Marker" class="headerlink" title="Interactive Marker"></a><a href="http://wiki.ros.org/rviz/Tutorials/Interactive%20Markers%3A%20Getting%20Started" target="_blank" rel="external">Interactive Marker</a></h3><h4 id="基本原理-1"><a href="#基本原理-1" class="headerlink" title="基本原理"></a>基本原理</h4><ul>
<li><p>不仅是将特定形状显示在RViz中，而且用户可以使用鼠标和上下文菜单进行交互，从而实现更复杂的任务</p>
</li>
<li><p>依然是由消息类型来定义，visualization_msgs/InteractiveMarker，这个消息包含一个上下文菜单，多个控件（visualization_msgs/InteractiveMarkerControl消息类型表示）。这些控件用来定义交互式标记的各个部分，每一部分都有不同功能。</p>
</li>
<li><p>要使用交互式标记，需要在节点中实例化一个InteractiveMarkerServer对象，作为与RViz联系的代理服务器，RViz作为客户端向节点发送不同的消息通知，以此来产生交互。</p>
</li>
<li><p>相关的消息类型有</p>
<ul>
<li><p>visualization_msgs/InteractiveMarker</p>
</li>
<li><p>visualization_msgs/InteractiveMarkerControl</p>
</li>
<li><p>visualization_msgs/InteractiveMarkerFeedback</p>
</li>
</ul>
</li>
</ul>
<p>此外还有MenuHandler</p>
<ul>
<li><a href="http://wiki.ros.org/interactive_marker_tutorials" target="_blank" rel="external">帮助文档</a></li>
</ul>
<h4 id="Simple-Interactive-Marker-Server"><a href="#Simple-Interactive-Marker-Server" class="headerlink" title="Simple Interactive Marker Server"></a><a href="http://wiki.ros.org/rviz/Tutorials/Interactive%20Markers%3A%20Writing%20a%20Simple%20Interactive%20Marker%20Server" target="_blank" rel="external">Simple Interactive Marker Server</a></h4><ul>
<li><p>关键思想</p>
<ul>
<li><p>InteractiveMarker–&gt;control–&gt;Marker，标记包含控件，类间是组合关系，均是一对多。</p>
</li>
<li><p>咦？为什么同时有将control赋给marker的属性和将marker赋给control的属性？原来如此</p>
</li>
<li><p>Server给RViz发送Update消息，RViz给Server发送Feedback，Server处定义对Feedback的响应函数</p>
</li>
</ul>
</li>
<li><p>关键代码</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;interactive_markers/interactive_marker_server.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processFeedback</span><span class="params">(</span><br><span class="line">    <span class="keyword">const</span> visualization_msgs::InteractiveMarkerFeedbackConstPtr &amp;feedback )</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  ROS_INFO_STREAM( feedback-&gt;marker_name &lt;&lt; <span class="string">" is now at "</span></span><br><span class="line">      &lt;&lt; feedback-&gt;pose.position.x &lt;&lt; <span class="string">", "</span> &lt;&lt; feedback-&gt;pose.position.y</span><br><span class="line">      &lt;&lt; <span class="string">", "</span> &lt;&lt; feedback-&gt;pose.position.z );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">"simple_marker"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create an interactive marker server on the topic namespace simple_marker</span></span><br><span class="line">  interactive_markers::<span class="function">InteractiveMarkerServer <span class="title">server</span><span class="params">(<span class="string">"simple_marker"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create an interactive marker for our server</span></span><br><span class="line">  visualization_msgs::InteractiveMarker int_marker;</span><br><span class="line">  int_marker.header.frame_id = <span class="string">"base_link"</span>;</span><br><span class="line">  int_marker.header.stamp=ros::Time::now();</span><br><span class="line">  int_marker.name = <span class="string">"my_marker"</span>;</span><br><span class="line">  int_marker.description = <span class="string">"Simple 1-DOF Control"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create a grey box marker</span></span><br><span class="line">  visualization_msgs::Marker box_marker;</span><br><span class="line">  box_marker.type = visualization_msgs::Marker::CUBE;</span><br><span class="line">  box_marker.scale.x = <span class="number">0.45</span>;</span><br><span class="line">  box_marker.scale.y = <span class="number">0.45</span>;</span><br><span class="line">  box_marker.scale.z = <span class="number">0.45</span>;</span><br><span class="line">  box_marker.color.r = <span class="number">0.5</span>;</span><br><span class="line">  box_marker.color.g = <span class="number">0.5</span>;</span><br><span class="line">  box_marker.color.b = <span class="number">0.5</span>;</span><br><span class="line">  box_marker.color.a = <span class="number">1.0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create a non-interactive control which contains the box</span></span><br><span class="line">  visualization_msgs::InteractiveMarkerControl box_control;</span><br><span class="line">  box_control.always_visible = <span class="literal">true</span>;</span><br><span class="line">  box_control.markers.push_back( box_marker );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add the control to the interactive marker</span></span><br><span class="line">  int_marker.controls.push_back( box_control );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// create a control which will move the box</span></span><br><span class="line">  <span class="comment">// this control does not contain any markers,</span></span><br><span class="line">  <span class="comment">// which will cause RViz to insert two arrows</span></span><br><span class="line">  visualization_msgs::InteractiveMarkerControl rotate_control;</span><br><span class="line">  rotate_control.name = <span class="string">"move_x"</span>;</span><br><span class="line">  rotate_control.interaction_mode =</span><br><span class="line">      visualization_msgs::InteractiveMarkerControl::MOVE_AXIS;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add the control to the interactive marker</span></span><br><span class="line">  int_marker.controls.push_back(rotate_control);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add the interactive marker to our collection &amp;</span></span><br><span class="line">  <span class="comment">// tell the server to call processFeedback() when feedback arrives for it</span></span><br><span class="line">  server.insert(int_marker, &amp;processFeedback);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 'commit' changes and send to all clients</span></span><br><span class="line">  server.applyChanges();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// start the ROS main loop</span></span><br><span class="line">  ros::spin();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Basic-Control"><a href="#Basic-Control" class="headerlink" title="Basic Control"></a><a href="http://wiki.ros.org/rviz/Tutorials/Interactive%20Markers%3A%20Basic%20Controls" target="_blank" rel="external">Basic Control</a></h4><ul>
<li><p>告诉你怎样制作一个6-DOF的控件（包括在控制时控件和场景一起移动的，和控件固定的）</p>
</li>
<li><p>关键代码</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="按钮"><a href="#按钮" class="headerlink" title="按钮"></a>按钮</h4><ul>
<li><p>基本思路</p>
<ul>
<li><p>就像菜单栏中的按钮一样</p>
</li>
<li><p>默认是响应鼠标左键</p>
</li>
</ul>
</li>
<li><p>关键代码</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">https:<span class="comment">//raw.githubusercontent.com/ros-visualization/visualization_tutorials/groovy-devel/interactive_marker_tutorials/src/basic_controls.cpp</span></span><br></pre></td></tr></table></figure>
<h4 id="Context-Menu"><a href="#Context-Menu" class="headerlink" title="Context Menu"></a><a href="http://wiki.ros.org/rviz/Tutorials/Interactive%20Markers%3A%20Basic%20Controls" target="_blank" rel="external">Context Menu</a></h4><ul>
<li><p>基本思路</p>
<ul>
<li>将静态菜单附着到一个交互式标记（Interactive Marker）上</li>
</ul>
</li>
</ul>
<h4 id="多客户端单服务器交互"><a href="#多客户端单服务器交互" class="headerlink" title="多客户端单服务器交互"></a>多客户端单服务器交互</h4><ul>
<li><p>意义</p>
<ul>
<li><p>可以同时有多个RViz客户端控制一个或多个交互式控件Marker</p>
</li>
<li><p>这个例子实现了一个简易乒乓球游戏</p>
</li>
<li><p>以后再学吧。</p>
</li>
</ul>
</li>
</ul>
<h3 id="为RViz写插件"><a href="#为RViz写插件" class="headerlink" title="[为RViz写插件]"></a>[为RViz写插件]</h3><ul>
<li>感觉没有学这个的需求啊。。。</li>
</ul>
<h3 id="使用QT和librviz进行窗口程序设计"><a href="#使用QT和librviz进行窗口程序设计" class="headerlink" title="使用QT和librviz进行窗口程序设计"></a><a href="http://docs.ros.org/indigo/api/librviz_tutorial/html/index.html" target="_blank" rel="external">使用QT和librviz进行窗口程序设计</a></h3><ul>
<li>这个相当于是使用QT对RViz进行简单的二次开发，感觉应该要学，既不需要深度了解QT，又可以编出像样的界面，哈哈！</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;顾名思义，标记工具就是在数据可视化的基础上加上用户自定义标记，用来强调某种特征或者添加用户自己想加上的东西&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;visualization stack 现在已经包含到RViz中，但是我们主要还是要学习这个包集中的东西&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>【ROS】Param reconfig讨论</title>
    <link href="https://ZhenshengLee.github.io/2016/08/16/160816Param-reconfig%E8%AE%A8%E8%AE%BA/"/>
    <id>https://ZhenshengLee.github.io/2016/08/16/160816Param-reconfig讨论/</id>
    <published>2016-08-16T08:32:01.000Z</published>
    <updated>2016-08-16T08:33:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li><p>因为windows平台的ROS for LV 没有显式支持action，所以不能直接给move_base节点发送move_base/cancel (actionlib_msgs/GoalID)，故在ROS端添加一个Proxy来代理解决</p>
</li>
<li><p>该代理的功能还包括ROSARIA和move_base的reconfigure，所以要从命令行运行重新配置命令</p>
</li>
<li><p>还修正一个ROSARIA发送的pose_msg内容为相对坐标的问题，改为发送相对于zsWorld坐标系的绝对坐标（在rosaria包中完成）</p>
</li>
<li><p>以后还可以承担打开和关闭各个节点的任务！</p>
</li>
</ul>
<a id="more"></a>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="http://wiki.ros.org/ROS/Tutorials/CreatingPackage" target="_blank" rel="external">ROS WIKI</a></p>
<p><a href="http://wiki.ros.org/dynamic_reconfigure/Tutorials" target="_blank" rel="external">dynamic_reconfigure</a></p>
<h3 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h3><ol>
<li><p>ROSARIA坐标修正，并制作一个reconfiguration_server（在rosaria包中完成）</p>
</li>
<li><p>接收上级节点发送的取消service_call，转发给move_base取消action_msg</p>
</li>
<li><p>接收来自上级节点的move_base reconfigure_msg，运行命令行进行重新配置</p>
</li>
<li><p>接收来自上级节点的rosaria reconfigure_msg，运行命令行进行重新配置</p>
</li>
<li><p>接收来及上级节点的重新定位的msg，运行命令行重新配置tf，主要是zsWorld与odom的坐标系转换关系</p>
</li>
<li><p>确认ROS for LV与ROS的连接关系</p>
</li>
<li><p>用rosaria_client进行测试</p>
</li>
</ol>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><h4 id="坐标修正"><a href="#坐标修正" class="headerlink" title="坐标修正"></a>坐标修正</h4><ul>
<li>建立一个包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">catkin_create_pkg zsProxy std_msgs roscpp</span><br></pre></td></tr></table></figure>
<ul>
<li>修改vscode 配置文件c_cpp_properties.json</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">subl ./.vscode/c_cpp_properties.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">            &quot;name&quot;: &quot;Linux&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;includePath&quot;: [&quot;/usr/include&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;/opt/ros/indigo/include&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;$&#123;ROS_PACKAGE_PATH&#125;&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;/opt/ros/kinetic/include&quot;]</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>修改 .gitignore，vscode的数据文件就不要上传了</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.vscode/</span><br></pre></td></tr></table></figure>
<ul>
<li>试用完vscode之后，发现还是CLion IDE爽，配合git 使用需要做一下特殊设置，不然可能会出现无法访问远程仓库问题</li>
</ul>
<blockquote>
<p><a href="https://stackoverflow.com/questions/27566999/git-with-intellij-idea-could-not-read-from-remote-repository" target="_blank" rel="external">settings–&gt;Version Control–&gt;Git ,and then, In the SSH executable dropdown, choose Native</a></p>
</blockquote>
<ul>
<li><p>修改rosaria包，增加zs_pose_msg</p>
</li>
<li><p>接下来修改reconfiguration server及配置</p>
</li>
</ul>
<h4 id="学习dynamic-config"><a href="#学习dynamic-config" class="headerlink" title="学习dynamic config"></a>学习dynamic config</h4><ul>
<li><a href="http://wiki.ros.org/sig/NextGenerationROS/Parameters" target="_blank" rel="external">关于参数概念的详细讨论</a></li>
</ul>
<blockquote>
<p><strong><em>主要有两种访问参数的方法，一种是参数服务器，生命周期随roscore；另外一种就是动态重新配置参数，可以在程序运行时进行重新配置参数</em></strong></p>
</blockquote>
<ul>
<li><a href="http://wiki.ros.org/ROS/Patterns/Parameterization" target="_blank" rel="external">关于参数具体实现和模式的讨论</a></li>
</ul>
<blockquote>
<p>In roslaunch files, <param> tags are for setting a single parameter and <rosparam> tags are for setting groups or more complex structures of parameters.</rosparam></p>
</blockquote>
<p>The value set by the <param> tag may only be a string, int, bool, or double, which may be set through the xml attribute value, or by reading in from a text file, bin file, or the output of a command line command.</p>
<p>The <rosparam> tag enables users to define a batch of related parameters simultaneously. These can be read from a YAML string which can either be put inline in the launchfile or can be loaded from a file (the rosparam dump command generates YAML output). Unlike the <param> tag, the YAML specification allows nested structures of parameters and parameters with list values. While these data can be represented on the ROS parameter server, it is up to the various client libraries to support complex parameter access.</rosparam></p>
<p>A good example of the <rosparam> tag use in practice is the move_base package, where there are many, many parameters to be set, it’s less cumbersome to just use the YAML format.</rosparam></p>
<h4 id="dynamic-reconfig具体技术"><a href="#dynamic-reconfig具体技术" class="headerlink" title="dynamic reconfig具体技术"></a>dynamic reconfig具体技术</h4><ul>
<li><p>窗口程序界面下的重新配置，实际上这是标准的重新配置界面</p>
</li>
<li><p>另外就是使用<a href="http://wiki.ros.org/hokuyo_node/Tutorials/UsingDynparamToChangeHokuyoLaserParameters" target="_blank" rel="external">dynparam command-line tool</a></p>
</li>
</ul>
<h4 id="Service-Call-Based-Re-configuration-实践"><a href="#Service-Call-Based-Re-configuration-实践" class="headerlink" title="Service Call-Based Re-configuration 实践"></a>Service Call-Based Re-configuration 实践</h4><ul>
<li>使用上面所述第二种方法，使用命令行执行，可以在shell中执行，不过最好在C++中执行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">rosrun dynamic_reconfigure dynparam set /&lt;node_name&gt; &lt;param&gt; &lt;value&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">system(<span class="string">"rosrun dynamic_reconfigure dynparam set camera_synchronizer_node narrow_stereo_trig_mode 3"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://wiki.ros.org/dynamic_reconfigure" target="_blank" rel="external">关于dynparam更详细的用法</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;因为windows平台的ROS for LV 没有显式支持action，所以不能直接给move_base节点发送move_base/cancel (actionlib_msgs/GoalID)，故在ROS端添加一个Proxy来代理解决&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;该代理的功能还包括ROSARIA和move_base的reconfigure，所以要从命令行运行重新配置命令&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;还修正一个ROSARIA发送的pose_msg内容为相对坐标的问题，改为发送相对于zsWorld坐标系的绝对坐标（在rosaria包中完成）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;以后还可以承担打开和关闭各个节点的任务！&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="机器人软件设计" scheme="https://ZhenshengLee.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
</feed>
